import{_ as b,r as n,u as I,j as e,p as T,q as M,t as U,v as G,w as z,x as H,y as q}from"./index-M8aaI8d6.js";import{d as _}from"./dayjs.min-CQ-6mANP.js";import{a as V,b as m,c as p}from"./index-BTbN6ApL.js";import{L as J}from"./Loading-BWkkuZsG.js";const K=()=>{const u="http://35.154.167.170:3000",d=localStorage.getItem("token");return{getOrders:async()=>{try{const l=await fetch(`${u}/orders`,{method:"GET",headers:{Authorization:`Bearer ${d}`}}),h=await l.json();return l.ok?h.data:(b.error("Failed to fetch orders!"),!1)}catch{return b.error("Failed to fetch orders!"),!1}}}},Q=()=>{const u="http://35.154.167.170:3000",d=localStorage.getItem("token");return{getOrders02:async(l,h="ASC",w="order_id")=>{try{const g=await fetch(`${u}/orders?sort_by=${w}&order=${h.toUpperCase()}&per_page=10&page_number=${l}`,{method:"GET",headers:{Authorization:`Bearer ${d}`}}),C=await g.json();return g.ok?C.data:(b.error("Failed to fetch orders!"),!1)}catch{return b.error("Failed to fetch orders!"),!1}}}},se=()=>{const{getOrders:u}=K(),{getOrders02:d}=Q(),[k,l]=n.useState([]),[h,w]=n.useState(0),[g,C]=n.useState(0),[E,F]=n.useState(!0),[t,A]=n.useState(0),[a,D]=n.useState(1),[N,O]=n.useState(0),[c,r]=n.useState(1),[v,y]=n.useState("asc"),S=I(),i=async o=>{F(!0),D(o);const s=await d(o);s&&(l(s.result),F(!1))},x=async o=>{if(v=="desc"){y("asc");const s=await d(a,v,o);s&&l(s.result)}else{y("desc");const s=await d(a,v,o);s&&l(s.result)}};return n.useEffect(()=>{(async()=>{var j;const s=await u();s&&(C((j=s==null?void 0:s.totalPendingAmount)==null?void 0:j.total_pending_due_amount),w(s.inProgressCount),O(s.count),A(Math.ceil(s.count/10)),l(s.result),F(!1))})()},[]),E?e.jsx(J,{}):e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsxs("div",{className:"flex gap-14",children:[e.jsxs("div",{className:"status-card flex gap-8 items-center",children:[e.jsx("span",{className:"bg-[#FFE0EB] inline-block h-[6rem] w-[6rem] rounded-full",children:e.jsx(T,{className:"inline-block p-5 h-full w-full fill-[#FF82AC]"})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("p",{className:"card-label",children:"Total Pending Due Amount"}),e.jsxs("p",{className:"card-price",children:["₹",g||"0"]})]})]}),e.jsxs("div",{className:"status-card flex gap-8 items-center",children:[e.jsx("span",{className:"bg-[#DCFAF8] inline-block h-[6rem] w-[6rem] rounded-full",children:e.jsx(V,{className:"inline-block p-7 h-full w-full fill-[#16DBCC]"})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("p",{className:"card-label",children:"Lifetime Total Order Number"}),e.jsx("p",{className:"card-price",children:N})]})]}),e.jsxs("div",{className:"status-card flex gap-8 items-center",children:[e.jsx("span",{className:"bg-[#FEF7E7] inline-block h-[6rem] w-[6rem] rounded-full",children:e.jsx(M,{className:"inline-block p-6 h-full w-full fill-[#F2B413]"})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("p",{className:"card-label",children:"Total In Progress Orders"}),e.jsx("p",{className:"card-price",children:h})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsx("h3",{className:"booking-title",children:"Your Booking List"}),e.jsxs("div",{className:"orders-table-container",children:[e.jsxs("table",{className:"orders-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>x("order_id"),children:[e.jsx("span",{children:"order id"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(m,{className:"updown-icon"}),e.jsx(p,{className:"updown-icon"})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>x("created_at"),children:[e.jsx("span",{children:"booking date"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(m,{className:"updown-icon"}),e.jsx(p,{className:"updown-icon"})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>x("estimated_delivery_time"),children:[e.jsx("span",{children:"delivery date"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(m,{className:"updown-icon"}),e.jsx(p,{className:"updown-icon"})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>x("total"),children:[e.jsx("span",{children:"amount"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(m,{className:"updown-icon"}),e.jsx(p,{className:"updown-icon"})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>x("kasar_amount"),children:[e.jsx("span",{children:"kasar"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(m,{className:"updown-icon"}),e.jsx(p,{className:"updown-icon"})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>x("paid_amount"),children:[e.jsx("span",{children:"paid amount"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(m,{className:"updown-icon"}),e.jsx(p,{className:"updown-icon"})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>x("order_status"),children:[e.jsx("span",{children:"status"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(m,{className:"updown-icon"}),e.jsx(p,{className:"updown-icon"})]})]}),e.jsx("th",{children:e.jsx("span",{children:"View"})})]})}),e.jsx("tbody",{children:N>0?k.map((o,s)=>{const{order_id:j,total:$,created_at:B,estimated_delivery_time:R,kasar_amount:L,paid_amount:P,order_status:f,order_status_name:Y}=o;return e.jsxs("tr",{children:[e.jsx("td",{children:j}),e.jsx("td",{children:_(B).format("DD/MM/YYYY, hh:mm A")}),e.jsx("td",{children:_(R).format("DD/MM/YYYY")}),e.jsxs("td",{children:["₹",$]}),e.jsxs("td",{children:["₹",L]}),e.jsx("td",{children:P||"₹0"}),e.jsxs("td",{style:{padding:"5px",textAlign:"left"},className:"flex items-center justify-center",children:[f==1&&e.jsx("span",{className:"inline-block px-4 rounded-xl bg-[#FEF7E7] text-[#F2B413] font-medium text-[1rem] leading-[2.4rem]",children:Y}),f==2&&e.jsx("span",{className:"inline-block px-4 rounded-xl bg-[#E8E9EF] text-[#161F5F] font-medium text-[1rem] leading-[2.4rem]",children:"In Process"}),f==3&&e.jsx("span",{className:"inline-block px-4 rounded-xl bg-[#FAEEE7] text-[#CC5511] font-medium text-[1rem] leading-[2.4rem]",children:"Picked Up"}),f==4&&e.jsx("span",{className:"inline-block px-4 rounded-xl bg-[#EBF8FB] text-[#39B8D3] font-medium text-[1rem] leading-[2.4rem]",children:"Out for Delivery"}),f==5&&e.jsx("span",{className:"inline-block px-4 rounded-xl bg-[#EBFBF1] text-[#39D377] font-medium text-[1rem] leading-[2.4rem]",children:"Delivered"})]}),e.jsx("td",{style:{padding:"5px"},className:"flex items-center justify-center",children:e.jsx(U,{className:"inline-block h-8 w-8 cursor-pointer",onClick:()=>S("/dashboard/view-order",{state:{order_id:j}})})})]},s)}):e.jsx("td",{children:"No record found !"})})]}),e.jsx("div",{className:"bg-white flex items-center justify-between px-8",children:N>10&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"current-page-num",children:["Showing"," ",a===1&&"1"||(a-1)*10+1," to"," ",a===t?N:a*10," entries"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{className:`pagination-btn ${c===-2&&"active-page"}`,onClick:()=>{a!==1&&(i(1),r(-2))},children:e.jsx(G,{className:"page-icon"})}),e.jsx("button",{className:`pagination-btn ${c===-1&&"active-page"}`,onClick:()=>{a!==1&&(i(a-1),r(-1))},children:e.jsx(z,{className:"page-icon"})}),e.jsx("button",{className:`pagination-btn ${c===1&&"active-page"}`,onClick:()=>{a!==1&&(i(1),r(1))},children:e.jsx("span",{className:"page-num",children:"1"})}),t>1&&e.jsx("button",{className:`pagination-btn ${c===2&&"active-page"}`,onClick:()=>{a!==2&&(i(2),r(2))},children:e.jsx("span",{className:"page-num",children:"2"})}),t>2&&e.jsx("button",{className:`pagination-btn ${c===3&&"active-page"}`,onClick:()=>{a!==3&&(i(3),r(3))},children:e.jsx("span",{className:"page-num",children:"3"})}),t>3&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"pagination-btn border-transparent",children:e.jsx("span",{className:"page-num",children:"..."})}),e.jsx("button",{className:`pagination-btn ${c===t&&"active-page"}`,onClick:()=>{a!==t&&(i(t),r(t))},children:e.jsx("span",{className:"page-num",children:t})})]}),e.jsx("button",{className:`pagination-btn ${c===100&&"active-page"}`,children:e.jsx(H,{className:"page-icon",onClick:()=>{a!==t&&(i(a+1),r(100))}})}),e.jsx("button",{className:`pagination-btn ${c===200&&"active-page"}`,children:e.jsx(q,{className:"page-icon",onClick:()=>{a!==t&&(i(t),r(200))}})})]})]})})]})]})]})};export{se as default};
