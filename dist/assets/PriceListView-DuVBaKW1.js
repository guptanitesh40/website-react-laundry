import{_ as k,r as i,j as e,a4 as A,$ as E,a0 as I,a1 as B,a2 as M}from"./index--w0fTTB7.js";import{c as b,d as f}from"./index-BaTViw4P.js";import{L as V}from"./Loading-DAbTRLxa.js";const G=()=>{const w="http://3.110.208.70:3000",x=localStorage.getItem("token");return{getPriceList:async()=>{try{const h=await fetch(`${w}/prices/customer`,{method:"GET",headers:{Authorization:`Bearer ${x}`}}),N=await h.json();return h.ok?N:(k.error("Failed to retrieve price list. Please try again later.",{className:"toast-error"}),!1)}catch{return k.error("Failed to load pricing information. Please check your connection and try again.",{className:"toast-error"}),!1}}}},q=()=>{const{getPriceList:w}=G(),[x,L]=i.useState([]),[h,N]=i.useState(!0),[t,v]=i.useState(0),[s,c]=i.useState(1),[u,r]=i.useState(1),[P,F]=i.useState("asc"),[_,C]=i.useState([]),[g,S]=i.useState(0),[m,R]=i.useState(10),j=n=>{const a=P==="asc"?"desc":"asc";F(a);const o=x.sort((l,y)=>{const p=l[n],d=y[n];return typeof p=="string"&&typeof d=="string"?a==="asc"?p.localeCompare(d):d.localeCompare(p):a==="asc"?p-d:d-p});C(o)},$=n=>{let a=n.target.value;R(a),c(1),v(Math.ceil(g/a))},D=n=>{c(1),n.preventDefault();let a=n.target.value;const o=x.filter(l=>l.category_name.toLowerCase().includes(a.toLowerCase())||l.product_name.toLowerCase().includes(a.toLowerCase())||l.service_name.toLowerCase().includes(a.toLowerCase())||l.price_price.toString().toLowerCase().includes(a.toLowerCase()));C(o),v(Math.ceil(o.length/m)),S(o.length)};return i.useEffect(()=>{(async()=>{const a=await w();a&&(S(a.length),v(Math.ceil(a.length/10)),L(a),C(a),N(!1))})()},[]),h?e.jsx(V,{}):e.jsxs("div",{className:"price-list-table-container",children:[e.jsx("div",{className:"px-8 py-6 laptop-s:px-6 laptop-s:py-4 tab-m:p-4",children:e.jsxs("form",{className:"flex items-center justify-between relative tab:flex-wrap tab:gap-3 mb-l:flex-col",onSubmit:n=>n.preventDefault(),children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 tab-m:gap-3",children:[e.jsx("label",{htmlFor:"rpp",className:"rpp-label",children:"Rows per page"}),e.jsxs("select",{className:"rpp-dropdown",name:"rpp",id:"rpp",onChange:$,children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:30,children:"30"}),e.jsx("option",{value:40,children:"40"}),e.jsx("option",{value:50,children:"50"})]})]}),e.jsxs("span",{className:"search-input-container relative",children:[e.jsx("input",{type:"text",placeholder:"Search for items",className:"searc-input focus:border-indigo-300 focus:outline-none",onChange:D}),e.jsx("span",{className:"search-icon",children:e.jsx(A,{className:"inline-block h-8 w-8 fill-[#d1d5db] laptop-s:h-6 laptop-s:w-6 tab-m:h-5 tab-m:w-5"})})]})]})}),e.jsx("div",{className:"allow-x-scroll",children:e.jsxs("table",{className:"price-list-table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#F7F8FD]",children:[e.jsx("th",{className:"min-w-[12.5rem] tab-l:min-w-40 tab-s:min-w-32 mb-l:min-w-24",children:"index"}),e.jsx("th",{className:"min-w-[20rem] tab-l:min-w-[17.5rem] tab-s:min-w-[15rem] mb-l:min-w-[12.5rem]",onClick:()=>j("category_name"),children:e.jsxs("div",{className:"flex items-center justify-center gap-2 cursor-pointer tab-m:gap-1",children:[e.jsx("span",{children:"category"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(b,{className:"updown-icon"}),e.jsx(f,{className:"updown-icon"})]})]})}),e.jsx("th",{className:"min-w-[22.5rem] tab-l:min-w-[20rem] tab-s:min-w-[17.5rem] mb-l:min-w-[15rem]",onClick:()=>j("product_name"),children:e.jsxs("div",{className:"flex items-center justify-center gap-2 cursor-pointer tab-m:gap-1",children:[e.jsx("span",{children:"product"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(b,{className:"updown-icon"}),e.jsx(f,{className:"updown-icon"})]})]})}),e.jsx("th",{className:"min-w-[22.5rem] tab-l:min-w-[20rem] tab-s:min-w-[17.5rem] mb-l:min-w-[15rem]",onClick:()=>j("service_name"),children:e.jsxs("div",{className:"flex items-center justify-center gap-2 cursor-pointer tab-m:gap-1",children:[e.jsx("span",{children:"service"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(b,{className:"updown-icon"}),e.jsx(f,{className:"updown-icon"})]})]})}),e.jsx("th",{className:"min-w-[20rem] tab-l:min-w-[17.5rem] tab-s:min-w-[15rem] mb-l:min-w-[12.5rem]",onClick:()=>j("price_price"),children:e.jsxs("div",{className:"flex items-center justify-center gap-2 cursor-pointer tab-m:gap-1",children:[e.jsx("span",{children:"price"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(b,{className:"updown-icon"}),e.jsx(f,{className:"updown-icon"})]})]})})]})}),e.jsxs("tbody",{children:[_.slice((s-1)*m,s*m).map((n,a)=>{const{category_name:o,price_price:l,product_name:y,service_name:p}=n;return e.jsxs("tr",{className:"transition duration-200 hover:bg-[rgba(226,225,231,0.39)]",children:[e.jsx("td",{children:(s-1)*m+(a+1)}),e.jsx("td",{children:o}),e.jsx("td",{children:y}),e.jsx("td",{children:p}),e.jsxs("td",{children:["â‚¹ ",l]})]},a)}),g===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,children:"No Item Found !"})})]})]})}),g!=0&&e.jsxs("div",{className:"flex items-center justify-between px-8 laptop-s:px-6 tab-l:px-4 tab-s:flex-wrap tab-s:p-4 tab-s:gap-4 tab:gap-3 mb-l:flex-col",children:[e.jsxs("p",{className:"current-page-num font-medium",children:["Showing ",(s-1)*m+1," to"," ",s===t?g:s*m," entries"]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 laptop-s:gap-3 mb-l:flex-wrap",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>{s!==1&&(c(1),r(1))},children:e.jsx(E,{className:`${s==1?"page-icon-light":"page-icon"}`})}),e.jsx("button",{className:"pagination-btn",onClick:()=>{s!==1&&(c(s-1),r(s-1))},children:e.jsx(I,{className:`${s==1?"page-icon-light":"page-icon"}`})}),t>1&&e.jsx("button",{className:`pagination-btn ${u===1&&"active-page"}`,onClick:()=>{s!==1&&(c(1),r(1))},children:e.jsx("span",{className:"page-num",children:"1"})}),t>2&&e.jsx("button",{className:`pagination-btn ${u===2&&"active-page"}`,onClick:()=>{s!==2&&(c(2),r(2))},children:e.jsx("span",{className:"page-num",children:"2"})}),t>3&&e.jsx("button",{className:`pagination-btn ${u===3&&"active-page"}`,onClick:()=>{s!==3&&(c(3),r(3))},children:e.jsx("span",{className:"page-num",children:"3"})}),t>2&&e.jsx("button",{className:"pagination-btn border-transparent",children:e.jsx("span",{className:"page-num",children:"..."})}),e.jsx("button",{className:`pagination-btn ${u===t&&"active-page"}`,onClick:()=>{s!==t&&(c(t),r(t))},children:e.jsx("span",{className:"page-num",children:t})}),e.jsx("button",{className:"pagination-btn",onClick:()=>{s!==t&&(c(s+1),r(s+1))},children:e.jsx(B,{className:`${s==t?"page-icon-light":"page-icon"}`})}),e.jsx("button",{className:"pagination-btn",onClick:()=>{s!==t&&(c(t),r(t))},children:e.jsx(M,{className:`${s==t?"page-icon-light":"page-icon"}`})})]})]})]})};export{q as default};
