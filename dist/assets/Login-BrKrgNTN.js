import{u as j,_ as u,b as y,r as x,j as e,L as p,I as N,a as v,c as k,s as S}from"./index-DGumLXYL.js";import{c as C,a as f}from"./index.esm-CTF9Gakp.js";const E=()=>{const i=j(),d="http://35.154.167.170:3000",s=5;return{login:async(o,m)=>{try{const a=await(await fetch(`${d}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:m,role_id:s})})).json();if(a.statusCode==200)return u.success(a.message),localStorage.setItem("token",a.data.token),localStorage.setItem("user",JSON.stringify(a.data.user)),i("/"),a.data;u.error(a.message,{style:{maxWidth:"800px"}})}catch{u.error("Login failed. Please check your credentials and try again.")}}}},I=()=>{const i=y(),{login:d}=E(),[s,c]=x.useState({}),[o,m]=x.useState(!1),[t,a]=x.useState({username:"",password:""}),g=n=>{const{name:r,value:l}=n.target;a({...t,[r]:l})},b=C().shape({username:f().min(10,"Username must be at least 10 characters").required("Username is required"),password:f().min(6,"Password must be at least 6 characters").required("Password is required")}),w=async n=>{n.preventDefault();try{await b.validate(t,{abortEarly:!1});const r=await d(t.username,t.password);r&&(i(k(r.user)),i(S(!!r.token))),c("")}catch(r){const l={};r.inner.forEach(h=>{l[h.path]=h.message}),c(l)}};return e.jsx("section",{className:"h-[100vh] px-6 py-12",children:e.jsx("div",{className:"flex flex-col gap-8 justify-center items-center",children:e.jsxs("form",{className:"login-form-container",children:[e.jsxs("div",{className:"flex flex-col justify-center items-center gap-10",children:[e.jsx("img",{src:"sc-logo.png",alt:"Sikka Cleaner Logo",loading:"lazy",className:"h-12 w-auto"}),e.jsx("h2",{className:"text-center text-3xl font-bold leading-9 tracking-tight text-gray-900",children:"Sign in to your account"})]}),e.jsxs("div",{className:`flex flex-col ${s.username||s.password?"gap-6":"gap-9"}`,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-lg font-medium leading-6 text-gray-900",children:"Username"}),e.jsx("div",{className:"mt-4",children:e.jsx("input",{id:"username",name:"username",placeholder:"email or mobile number",className:"text-xl block font-medium w-full rounded-md py-4 px-6 text-gray-900 shadow-sm placeholder:text-gray-400 leading-6 border-blue-300 border-[1.5px] focus:border-blue-600 focus:outline-none tracking-wide",value:t.username,onChange:g})}),s.username&&e.jsx("p",{className:"pt-2 text-base font-medium text-red-500",children:s.username})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:"password",className:"block text-lg font-medium leading-6 text-gray-900",children:"Password"}),e.jsx("div",{className:"text-lg",children:e.jsx(p,{to:"/forget-password",className:"font-semibold text-indigo-600 hover:text-indigo-500",children:"Forgot password?"})})]}),e.jsxs("div",{className:"mt-2 relative",children:[e.jsx("input",{id:"password",name:"password",type:o?"text":"password",placeholder:"password",className:"text-xl block font-medium w-full rounded-md py-4 px-6 pr-14 text-gray-900 shadow-sm placeholder:text-gray-400 leading-6 border-blue-300 border-[1.5px] focus:border-blue-600 focus:outline-none tracking-wide",value:t.password,onChange:g}),e.jsx("span",{className:"absolute inline-block top-1/2 right-4 -translate-y-1/2 cursor-pointer",onClick:()=>m(!o),children:o?e.jsx(N,{className:"h-8 w-8 fill-indigo-400"}):e.jsx(v,{className:"h-8 w-8 fill-indigo-400"})})]}),s.password&&e.jsx("p",{className:"pt-2 text-base font-medium text-red-500",children:s.password})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-indigo-600 px-6 py-4 text-lg font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",onClick:n=>w(n),children:"Login"})}),e.jsxs("p",{className:"text-center text-lg text-gray-500",children:["Not a member?",e.jsx(p,{to:"/signup",className:"ml-4 font-semibold leading-6 text-indigo-600 hover:text-indigo-500",children:"Register"})]})]})})})};export{I as default};
