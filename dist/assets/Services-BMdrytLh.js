import{j as e,G as b,r as d,_ as h,a as k,d as f,e as w,f as P,h as N,i as S,P as x,u as z,L as U,R as A}from"./index-grspk_p5.js";import{F as D}from"./index-QcvxhTsf.js";import{H as I,a as M}from"./index-B0pWFVu_.js";const O=()=>e.jsx("div",{className:"absolute inset-0 h-[50.2rem] w-full bg-cover bg-center bg-no-repeat z-[-10] bg-[url('/choose-services-bg.png')]"});function _(s){return b({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"},child:[]}]})(s)}function G(s){return b({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"},child:[]},{tag:"path",attr:{d:"M21 21l-6 -6"},child:[]}]})(s)}const W=()=>{const s="http://35.154.167.170:3000",[l,i]=d.useState([]),[c,a]=d.useState(!0);return d.useEffect(()=>{(async()=>{var o;try{const u=await fetch(`${s}/web/services`,{method:"GET"}),t=await u.json();u.ok?i((o=t==null?void 0:t.data)==null?void 0:o.services):h.error("Failed to fetch services!")}catch{h.error("Failed to fetch services!")}finally{a(!1)}})()},[s]),{services:l,loading:c}},H=()=>{const s="http://35.154.167.170:3000";return{fetchCategories:async i=>{try{const c=await fetch(`${s}/web/categories?service_id=${i}`,{method:"GET"}),a=await c.json();if(c.ok)return a==null?void 0:a.data;h.error("Failed to fetch categories!")}catch{h.error("Failed to fetch categories !")}}}},J=()=>{const s=k(),{fetchCategories:l}=H(),i=f(t=>t.service.selectedServiceId),[c,a]=d.useState(""),{services:r,loading:o}=W(),u=async t=>{s(w(t))};return d.useEffect(()=>{!o&&r.length>0&&(i||s(w(r[0].service_id)))},[o,r,i,s]),d.useEffect(()=>{i&&(async()=>{const n=await l(i);n&&(n.length>0?(s(N(n[0].category_category_id)),s(S(n))):(s(N(0)),s(S([]))))})()},[s,l,i]),o?e.jsx(P,{}):e.jsx("section",{className:"section-services",children:e.jsxs("div",{className:"secondary-container",children:[e.jsx("h1",{className:"pb-[7.65rem]",children:"Choose your Service"}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs("div",{className:"bg-white flex flex-col rounded-3xl shadow-lg ",children:[e.jsx("div",{className:"flex justify-center gap-24 pt-12 px-12 border-b border-[#B9BCCF4D] border-black",children:r.map(t=>{const{name:n,image:p,service_id:g}=t;return e.jsxs("div",{className:"service-container flex flex-col gap-8 items-center",onClick:()=>u(g),children:[e.jsx("div",{className:"h-24 w-24 text-center",children:e.jsx("img",{src:p,alt:"Service image",className:"inline-block max-h-full w-auto"})}),e.jsx("h4",{className:"service-name",children:n})]},n)})}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-[0_0_17%] border-r border-black py-8 px-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(D,{className:"h-12 w-12 fill-[#161f5f]"}),e.jsx("p",{className:"text-[1.6rem] leading-[3rem] font-semibold",children:"Paldi"}),e.jsx(_,{className:"h-8 w-8"})]})}),e.jsxs("div",{className:"flex-grow py-8 px-8 flex gap-4",children:[e.jsx(G,{className:"h-12 w-12 stroke-[#687182]"}),e.jsx("input",{type:"text",value:c,onChange:t=>a(t.target.value),placeholder:"Search here...",className:"flex-grow focus:outline-none text-[2rem] leading-[2rem]"}),e.jsx("button",{children:"Search"})]})]})]})})]})})};function v(s){return b({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor"},child:[]}]})(s)}const V=()=>e.jsxs("div",{className:"filter flex flex-col gap-12",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h5",{className:"text-filters",children:"Filters"}),e.jsx("h5",{className:"text-clear",children:"Clear all"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"dd-title mb-8",children:"select cloth types"}),e.jsxs("select",{className:"filter-dd mb-8",children:[e.jsx("option",{value:"shirt",children:"shirt"}),e.jsx("option",{value:"t-shirt",children:"t-shirt"}),e.jsx("option",{value:"pant",children:"pant"}),e.jsx("option",{value:"zabhbha/kurta",children:"shzabhbha/kurtairt"}),e.jsx("option",{value:"coat/blazer",children:"coat/blazer"})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("span",{className:"selected-clothes",children:[e.jsx("span",{children:"pant"}),e.jsx(v,{})]}),e.jsxs("span",{className:"selected-clothes",children:[e.jsx("span",{children:"shirt"}),e.jsx(v,{})]}),e.jsxs("span",{className:"selected-clothes",children:[e.jsx("span",{children:"t-shirt"}),e.jsx(v,{})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-12",children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("p",{className:"dd-title",children:"Price"}),e.jsx("p",{className:"filter-price",children:"₹10 - ₹180"})]}),e.jsx("div",{children:e.jsx("form",{children:e.jsx("input",{type:"range",className:"input-range"})})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[1.2rem]",children:"₹10"}),e.jsx("span",{className:"text-[1.2rem]",children:"₹500"})]})]})]}),Z=()=>{const s="http://35.154.167.170:3000",l=localStorage.getItem("token");return{addToCart:async({category_id:c,product_id:a,service_id:r,itemCount:o})=>{var u;try{const t=await fetch(`${s}/carts`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({category_id:Number(c),product_id:a,service_id:r,quantity:o})});if(t.ok){h.success("Item Added Successfully");const n=await t.json();return(u=n==null?void 0:n.data)==null?void 0:u.cart_id}else return null}catch{return h.error("Error occur while adding item into cart!",{style:{maxWidth:"400px"}}),null}}}},K=()=>{const s="http://35.154.167.170:3000",l=localStorage.getItem("token");return{updateCart:async(c,a)=>{try{(await fetch(`${s}/carts/${a}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({quantity:c})})).ok||h.error("Failed to update cart!")}catch{h.error("Failed to update cart!")}}}},Q=()=>{const s="http://35.154.167.170:3000",l=localStorage.getItem("token");return{deleteCart:async c=>{try{const a=await fetch(`${s}/carts/${c}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`}}),r=await a.json();a.ok&&h.success(r.message,{style:{maxWidth:"400px"}})}catch{h.error("Unable to delete item from cart!")}}}},L=({categoryItem:s,category_id:l})=>{const i=z(),[c,a]=d.useState(1),[r,o]=d.useState(null),[u,t]=d.useState(!1),[n,p]=d.useState(!1),g=f(m=>m.auth.isAuthenticated),{addToCart:F}=Z(),{updateCart:C}=K(),{deleteCart:R}=Q(),T=async()=>{a(c+1);const m=c+1;await C(m,r)},B=async()=>{if(c>0&&c-1!=0){a(c-1);const m=c-1;await C(m,r)}else t(!1),await R(r)},q=async(m,j)=>{if(!g)p(!0);else{t(!0);const y=await F({category_id:l,product_id:m,service_id:j,itemCount:c});y?o(y):h.error("Failed to add item into cart!")}},E=()=>{p(!1)},$=()=>{i("/login")};return d.useEffect(()=>{var m,j;s!=null&&s.carts?(o((m=s==null?void 0:s.carts)==null?void 0:m.cart_id),a((j=s==null?void 0:s.carts)==null?void 0:j.quantity),t(!0)):(t(!1),a(1))},[s]),e.jsxs("div",{className:"overflow-hidden",children:[e.jsxs("div",{className:"cat-item-container flex gap-8",children:[e.jsx("img",{src:s.product.image,alt:"Service Image",className:"h-32 w-32 rounded-2xl"}),e.jsxs("div",{className:"flex-grow flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"cat-item-name",children:s.product.name}),e.jsxs("p",{className:"cat-item-price",children:["₹",s.price]})]}),u?e.jsxs("button",{className:"inc-dec-btn",children:[e.jsx(I,{className:"stroke-[#B9BCCF]",onClick:B}),c,e.jsx(M,{className:"stroke-[#B9BCCF]",onClick:T})]}):e.jsx("button",{className:"add-btn",onClick:()=>q(s.product_id,s.service_id),children:"Add"})]})]},s.product_id),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:e.jsxs("div",{className:"info-login-container",children:[e.jsx("h2",{className:"text-center text-3xl font-bold leading-9 tracking-tight text-gray-900",children:"Login Required"}),e.jsx("p",{className:" text-red-500",children:"Please login to add items to your cart."}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:$,className:"py-4 px-8 rounded-xl bg-indigo-500 text-white font-medium hover:bg-indigo-400",children:"Login"}),e.jsx("button",{onClick:E,className:"py-4 px-8 rounded-xl bg-[#e4e6eb] font-medium",children:"Cancel"})]})]})})]})};L.propTypes={categoryItem:x.shape({carts:x.shape({cart_id:x.number.isRequired,quantity:x.number.isRequired}),price:x.number.isRequired,service_id:x.number.isRequired,product_id:x.number.isRequired,product:x.shape({product_id:x.number.isRequired,name:x.string.isRequired,image:x.string.isRequired}).isRequired}).isRequired,category_id:x.number.isRequired};const X=()=>{const s="http://35.154.167.170:3000";return{fetchServiceItems:async(i,c)=>{try{const a=await fetch(`${s}/web/products?category_id=${i}&service_id=${c}`,{method:"GET"}),r=await a.json();if(a.ok)return r==null?void 0:r.data;h.error("Failed to fetch selected category items !",{style:{maxWidth:"400px"}})}catch{h.error("Failed to fetch selected category items !",{style:{maxWidth:"400px"}})}}}},Y=()=>{const s=k(),{fetchServiceItems:l}=X(),i=f(t=>t.category.categories),c=f(t=>t.service.selectedServiceId),a=f(t=>t.category.selectedCategoryId),[r,o]=d.useState([]);d.useEffect(()=>{c&&a&&(async()=>{const n=await l(a,c);n&&n.length>0&&o(n)})()},[a,c]);const u=t=>{s(N(t))};return e.jsxs("div",{className:"select-clothes-container",children:[e.jsx("h4",{className:"service-title",children:"Select Cloths"}),e.jsx("div",{className:"flex gap-16",children:i.length>0?i.map(t=>{const{category_name:n,category_category_id:p}=t;return e.jsx("span",{className:"category-tags",onClick:()=>u(p),children:n},p)}):"No category Found"}),e.jsx("div",{className:"flex flex-col gap-12",children:i.length>0&&r.map(t=>e.jsx(L,{categoryItem:t,category_id:a},t.product_id))})]})},ee=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card-container",children:[e.jsx("h5",{className:"cart-title",children:"cart"}),e.jsxs("div",{className:"px-12 py-12 flex flex-col gap-8 ",children:[e.jsxs("div",{className:"subtotal-container",children:[e.jsx("p",{children:"Sub Total"}),e.jsx("h5",{children:"₹80"})]}),e.jsxs("div",{className:"shipcharge-container",children:[e.jsx("p",{children:"Shipping Charge"}),e.jsx("h5",{children:"₹5"})]}),e.jsx("span",{className:"line"}),e.jsxs("div",{className:"total-container",children:[e.jsx("p",{children:"Total"}),e.jsx("h5",{children:"₹85"})]}),e.jsx(U,{to:"/cart",className:"view-cart-btn",children:"view cart"})]})]}),e.jsxs("div",{className:"coupon-container",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(A,{className:"h-20 w-20 fill-[#FF2E17]"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"dis-text",children:"20% off on this Holi"}),e.jsx("p",{className:"dis-price",children:"Up to INR 20"})]})]}),e.jsxs("div",{className:"mt-12 flex gap-6 ",children:[e.jsx("p",{className:"view-more",children:"View More Offers"}),e.jsx(_,{className:"h-8 w-auto fill-[#161F5F]"})]})]})]}),se=()=>e.jsx("section",{className:"pt-16 pb-48",children:e.jsx("div",{className:"secondary-container",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"flex-[0_0_28%]",children:e.jsx(V,{})}),e.jsx("div",{className:"flex-[0_0_46%]",children:e.jsx(Y,{})}),e.jsx("div",{className:"flex-[0_0_21.45%]",children:e.jsx(ee,{})})]})})}),ie=()=>e.jsxs("div",{children:[e.jsx(O,{}),e.jsx(J,{}),e.jsx(se,{})]});export{ie as default};
