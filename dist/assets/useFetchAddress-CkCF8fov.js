import{r as h,_ as y,aB as U,a9 as re,P as g,j as n,aC as Z,I as oe,J as C,u as Q,aD as se,aE as le,aF as ie,a as ce,aG as ue}from"./index-DRHF7GeI.js";import{b as Y}from"./index-DuvE3m0x.js";import{a as de,G as ge}from"./esm-CBHNTOBX.js";const pe=()=>{const[r,o]=h.useState(!1),a="http://35.154.167.170:3000",e=localStorage.getItem("token");return{addAddress:async s=>{var l;if(!e)return y.error("User is not authenticated!"),null;const i={...s,address_type:parseInt(s.address_type)};try{o(!0);const d=await fetch(`${a}/address`,{method:"POST",headers:{"Content-type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(i)}),c=await d.json();return d.ok?(y.success(c==null?void 0:c.message,{className:"toast-success"}),(l=c==null?void 0:c.data)==null?void 0:l.result):(y.error("Failed to add address!",{className:"toast-error"}),null)}catch{return y.error("Failed to add address!"),null}finally{o(!1)}},loading:r}},me=()=>{const[r,o]=h.useState(!1),a="http://35.154.167.170:3000",e=localStorage.getItem("token");return{loading:r,editAddress:async(s,i)=>{if(!e)return y.error("User is not authenticated!"),null;const l={...s,address_type:Number(s.address_type),pincode:s.pincode===""?0:String(s.pincode),lat:Number(s.lat),long:Number(s.long)};try{o(!0);const d=await fetch(`${a}/address/${i}`,{method:"PUT",headers:{"Content-type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(l)}),c=await d.json();return d.ok?(y.success(c.message),c):(y.error(c.message,{style:{maxWidth:"700px"}}),null)}catch{return y.error("Unable to update address"),null}finally{o(!1)}}}};var F={},z={},fe="Expected a function",J=NaN,he="[object Symbol]",be=/^\s+|\s+$/g,ye=/^[-+]0x[0-9a-f]+$/i,xe=/^0b[01]+$/i,ve=/^0o[0-7]+$/i,we=parseInt,je=typeof U=="object"&&U&&U.Object===Object&&U,Se=typeof self=="object"&&self&&self.Object===Object&&self,Ne=je||Se||Function("return this")(),Ae=Object.prototype,_e=Ae.toString,Ie=Math.max,ke=Math.min,K=function(){return Ne.Date.now()};function Ce(r,o,a){var e,t,s,i,l,d,c=0,P=!1,I=!1,E=!0;if(typeof r!="function")throw new TypeError(fe);o=X(o)||0,G(a)&&(P=!!a.leading,I="maxWait"in a,s=I?Ie(X(a.maxWait)||0,o):s,E="trailing"in a?!!a.trailing:E);function u(m){var _=e,L=t;return e=t=void 0,c=m,i=r.apply(L,_),i}function p(m){return c=m,l=setTimeout(N,o),P?u(m):i}function S(m){var _=m-d,L=m-c,x=o-_;return I?ke(x,s-L):x}function b(m){var _=m-d,L=m-c;return d===void 0||_>=o||_<0||I&&L>=s}function N(){var m=K();if(b(m))return T(m);l=setTimeout(N,S(m))}function T(m){return l=void 0,E&&e?u(m):(e=t=void 0,i)}function R(){l!==void 0&&clearTimeout(l),c=0,e=d=t=l=void 0}function $(){return l===void 0?i:T(K())}function j(){var m=K(),_=b(m);if(e=arguments,t=this,d=m,_){if(l===void 0)return p(d);if(I)return l=setTimeout(N,o),u(d)}return l===void 0&&(l=setTimeout(N,o)),i}return j.cancel=R,j.flush=$,j}function G(r){var o=typeof r;return!!r&&(o=="object"||o=="function")}function Oe(r){return!!r&&typeof r=="object"}function Pe(r){return typeof r=="symbol"||Oe(r)&&_e.call(r)==he}function X(r){if(typeof r=="number")return r;if(Pe(r))return J;if(G(r)){var o=typeof r.valueOf=="function"?r.valueOf():r;r=G(o)?o+"":o}if(typeof r!="string")return r===0?r:+r;r=r.replace(be,"");var a=xe.test(r);return a||ve.test(r)?we(r.slice(2),a?2:8):ye.test(r)?J:+r}var Ee=Ce,B={};Object.defineProperty(B,"__esModule",{value:!0});B.compose=function(){for(var o=arguments.length,a=Array(o),e=0;e<o;e++)a[e]=arguments[e];return function(){for(var t=arguments.length,s=Array(t),i=0;i<t;i++)s[i]=arguments[i];a.forEach(function(l){return l&&l.apply(void 0,s)})}};B.pick=function(o){for(var a=arguments.length,e=Array(a>1?a-1:0),t=1;t<a;t++)e[t-1]=arguments[t];return e.reduce(function(s,i){return o&&o.hasOwnProperty(i)&&(s[i]=o[i]),s},{})};Object.defineProperty(z,"__esModule",{value:!0});var M=Object.assign||function(r){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e])}return r},Fe=function(){function r(o,a){for(var e=0;e<a.length;e++){var t=a[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(o,t.key,t)}}return function(o,a,e){return a&&r(o.prototype,a),e&&r(o,e),o}}(),Te=h,Le=W(Te),Me=re,f=W(Me),qe=Ee,De=W(qe),O=B;function W(r){return r&&r.__esModule?r:{default:r}}function Ue(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function Be(r,o){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:r}function Re(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);r.prototype=Object.create(o&&o.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(r,o):r.__proto__=o)}var $e=function(o){return{mainText:o.main_text,secondaryText:o.secondary_text}},V=function(r){Re(o,r);function o(a){Ue(this,o);var e=Be(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,a));return e.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");e.autocompleteService=new window.google.maps.places.AutocompleteService,e.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,e.setState(function(t){return t.ready?null:{ready:!0}})},e.autocompleteCallback=function(t,s){if(e.setState({loading:!1}),s!==e.autocompleteOK){e.props.onError(s,e.clearSuggestions);return}var i=e.props.highlightFirstSuggestion;e.setState({suggestions:t.map(function(l,d){return{id:l.id,description:l.description,placeId:l.place_id,active:!!(i&&d===0),index:d,formattedSuggestion:$e(l.structured_formatting),matchedSubstrings:l.matched_substrings,terms:l.terms,types:l.types}})})},e.fetchPredictions=function(){var t=e.props.value;t.length&&(e.setState({loading:!0}),e.autocompleteService.getPlacePredictions(M({},e.props.searchOptions,{input:t}),e.autocompleteCallback))},e.clearSuggestions=function(){e.setState({suggestions:[]})},e.clearActive=function(){e.setState({suggestions:e.state.suggestions.map(function(t){return M({},t,{active:!1})})})},e.handleSelect=function(t,s,i){e.clearSuggestions(),e.props.onSelect?e.props.onSelect(t,s,i):e.props.onChange(t)},e.getActiveSuggestion=function(){return e.state.suggestions.find(function(t){return t.active})},e.selectActiveAtIndex=function(t){var s=e.state.suggestions.find(function(i){return i.index===t}).description;e.setActiveAtIndex(t),e.props.onChange(s)},e.selectUserInputValue=function(){e.clearActive(),e.props.onChange(e.state.userInputValue)},e.handleEnterKey=function(){var t=e.getActiveSuggestion();t===void 0?e.handleSelect(e.props.value,null,null):e.handleSelect(t.description,t.placeId,t)},e.handleDownKey=function(){if(e.state.suggestions.length!==0){var t=e.getActiveSuggestion();t===void 0?e.selectActiveAtIndex(0):t.index===e.state.suggestions.length-1?e.selectUserInputValue():e.selectActiveAtIndex(t.index+1)}},e.handleUpKey=function(){if(e.state.suggestions.length!==0){var t=e.getActiveSuggestion();t===void 0?e.selectActiveAtIndex(e.state.suggestions.length-1):t.index===0?e.selectUserInputValue():e.selectActiveAtIndex(t.index-1)}},e.handleInputKeyDown=function(t){switch(t.key){case"Enter":t.preventDefault(),e.handleEnterKey();break;case"ArrowDown":t.preventDefault(),e.handleDownKey();break;case"ArrowUp":t.preventDefault(),e.handleUpKey();break;case"Escape":e.clearSuggestions();break}},e.setActiveAtIndex=function(t){e.setState({suggestions:e.state.suggestions.map(function(s,i){return i===t?M({},s,{active:!0}):M({},s,{active:!1})})})},e.handleInputChange=function(t){var s=t.target.value;if(e.props.onChange(s),e.setState({userInputValue:s}),!s){e.clearSuggestions();return}e.props.shouldFetchSuggestions&&e.debouncedFetchPredictions()},e.handleInputOnBlur=function(){e.mousedownOnSuggestion||e.clearSuggestions()},e.getActiveSuggestionId=function(){var t=e.getActiveSuggestion();return t?"PlacesAutocomplete__suggestion-"+t.placeId:void 0},e.getIsExpanded=function(){return e.state.suggestions.length>0},e.getInputProps=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(t.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var s={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":e.getIsExpanded(),"aria-activedescendant":e.getActiveSuggestionId(),disabled:!e.state.ready};return M({},s,t,{onKeyDown:(0,O.compose)(e.handleInputKeyDown,t.onKeyDown),onBlur:(0,O.compose)(e.handleInputOnBlur,t.onBlur),value:e.props.value,onChange:function(l){e.handleInputChange(l)}})},e.getSuggestionItemProps=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.handleSuggestionMouseEnter.bind(e,t.index),l=e.handleSuggestionClick.bind(e,t);return M({},s,{key:t.id,id:e.getActiveSuggestionId(),role:"option",onMouseEnter:(0,O.compose)(i,s.onMouseEnter),onMouseLeave:(0,O.compose)(e.handleSuggestionMouseLeave,s.onMouseLeave),onMouseDown:(0,O.compose)(e.handleSuggestionMouseDown,s.onMouseDown),onMouseUp:(0,O.compose)(e.handleSuggestionMouseUp,s.onMouseUp),onTouchStart:(0,O.compose)(e.handleSuggestionTouchStart,s.onTouchStart),onTouchEnd:(0,O.compose)(e.handleSuggestionMouseUp,s.onTouchEnd),onClick:(0,O.compose)(l,s.onClick)})},e.handleSuggestionMouseEnter=function(t){e.setActiveAtIndex(t)},e.handleSuggestionMouseLeave=function(){e.mousedownOnSuggestion=!1,e.clearActive()},e.handleSuggestionMouseDown=function(t){t.preventDefault(),e.mousedownOnSuggestion=!0},e.handleSuggestionTouchStart=function(){e.mousedownOnSuggestion=!0},e.handleSuggestionMouseUp=function(){e.mousedownOnSuggestion=!1},e.handleSuggestionClick=function(t,s){s&&s.preventDefault&&s.preventDefault();var i=t.description,l=t.placeId;e.handleSelect(i,l,t),setTimeout(function(){e.mousedownOnSuggestion=!1})},e.state={loading:!1,suggestions:[],userInputValue:a.value,ready:!a.googleCallbackName},e.debouncedFetchPredictions=(0,De.default)(e.fetchPredictions,a.debounce),e}return Fe(o,[{key:"componentDidMount",value:function(){var e=this.props.googleCallbackName;if(e){var t=window.google&&window.google.maps&&window.google.maps.places;t?this.init():window[e]=this.init}else this.init()}},{key:"componentWillUnmount",value:function(){var e=this.props.googleCallbackName;e&&window[e]&&delete window[e]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),o}(Le.default.Component);V.propTypes={onChange:f.default.func.isRequired,value:f.default.string.isRequired,children:f.default.func.isRequired,onError:f.default.func,onSelect:f.default.func,searchOptions:f.default.shape({bounds:f.default.object,componentRestrictions:f.default.object,location:f.default.object,offset:f.default.oneOfType([f.default.number,f.default.string]),radius:f.default.oneOfType([f.default.number,f.default.string]),types:f.default.array}),debounce:f.default.number,highlightFirstSuggestion:f.default.bool,shouldFetchSuggestions:f.default.bool,googleCallbackName:f.default.string};V.defaultProps={onError:function(o,a){return console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,o)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0};z.default=V;var q={};Object.defineProperty(q,"__esModule",{value:!0});q.geocodeByAddress=function(o){var a=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(t,s){a.geocode({address:o},function(i,l){l!==e&&s(l),t(i)})})};q.getLatLng=function(o){return new Promise(function(a,e){try{var t={lat:o.geometry.location.lat(),lng:o.geometry.location.lng()};a(t)}catch(s){e(s)}})};q.geocodeByPlaceId=function(o){var a=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(t,s){a.geocode({placeId:o},function(i,l){l!==e&&s(l),t(i)})})};Object.defineProperty(F,"__esModule",{value:!0});var ee=F.getLatLng=F.geocodeByPlaceId=te=F.geocodeByAddress=void 0,Ke=z,Ge=ze(Ke),H=q;function ze(r){return r&&r.__esModule?r:{default:r}}var te=F.geocodeByAddress=H.geocodeByAddress;F.geocodeByPlaceId=H.geocodeByPlaceId;ee=F.getLatLng=H.getLatLng;var We=F.default=Ge.default;const Ve={width:"100%",height:"100%"},He=["places"],ne=({setIsMapOpen:r,setFormData:o,initialCenter:a})=>{const{isLoaded:e}=de({googleMapsApiKey:"AIzaSyBZ8HbiXxHEd7x4tlmFli-WK88bLEZScXI",libraries:He}),[t,s]=h.useState(a),[i,l]=h.useState(null),[d,c]=h.useState("Fetching location..."),P=async(p,S)=>{if(!window.google){y.error("Google Maps API is not loaded yet.");return}try{new window.google.maps.Geocoder().geocode({location:{lat:p,lng:S}},(N,T)=>{T==="OK"&&N.length>0?c(N[0].formatted_address):c("Location not found")})}catch(b){c("Unable to fetch location"),y.error(b)}},I=p=>{if(p){l(p);const S=p.getCenter(),b=S.lat(),N=S.lng();s({lat:b,lng:N}),P(b,N)}},E=h.useCallback(()=>{if(!i)return;const p=i.getCenter(),S=p.lat(),b=p.lng();(S!==t.lat||b!==t.lng)&&(s({lat:S,lng:b}),P(S,b))},[i,t]),u=()=>{o(p=>({...p,lat:t==null?void 0:t.lat,long:t==null?void 0:t.lng,area:d})),r(p=>!p)};return e?n.jsx("div",{className:"fixed inset-0 p-8 bg-black bg-opacity-50 grid place-items-center min-h-screen w-full overflow-auto z-50 mb-l:p-4",children:n.jsxs("div",{className:"bg-white rounded-lg h-full w-full overflow-hidden relative",children:[n.jsx(ge,{mapContainerStyle:Ve,center:t,zoom:18,options:{streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1,zoomControl:!1,disableDefaultUI:!0,clickableIcons:!1},onLoad:p=>I(p),onIdle:E}),n.jsx("button",{type:"button",title:"close",className:"absolute top-4 right-4 border border-blue-500 rounded-md inline-flex items-center justify-center text-white focus:outline-none shadow-2xl h-10 w-10 bg-black cursor-pointer",onClick:()=>r(p=>!p),children:n.jsx(Y,{className:"h-8 w-8 tab-s:h-6 tab-s:w-6"})}),n.jsx("span",{className:"inline-block absolute top-1/2 right-1/2 translate-x-1/2 -translate-y-1/2",children:n.jsx(Z,{className:"h-16 w-16 fill-red-600"})}),n.jsx("div",{className:"absolute bottom-4 right-0 left-0 h-auto",children:n.jsxs("div",{className:"max-w-md bg-white mx-auto rounded-lg flex flex-col gap-4 p-2 border border-gray-400 text-[1.6rem]",children:[n.jsx("p",{className:"px-1 leading-[2rem] text-[var(--black)]",children:d}),n.jsx("button",{className:"self-center bg-primary text-white py-1 px-4 rounded-lg",onClick:u,children:"Save"})]})})]})}):n.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 min-h-screen w-full",children:n.jsxs("div",{className:"bg-white inline-flex gap-4 items-center justify-center px-8 py-4 rounded-md",children:[n.jsx("span",{className:"h-12 w-12 rounded-full border-4 border-black/40 border-t-transparent animate-spin"}),n.jsx("span",{className:"text-[1.6rem] leading-[1.5] font-medium",children:"Loading..."})]})})};ne.propTypes={setIsMapOpen:g.func.isRequired,setFormData:g.func.isRequired,initialCenter:g.object.isRequired};const Je=oe().shape({full_name:C().trim().max(50,"Full name cannot exceed 50 characters").required("Full name is required"),phone_number:C().matches(/^[0-9]{10}$/,"Phone number must be exactly 10 digits").required("Phone number is required"),address_type:C().required("Address type is require"),building_number:C().trim().required("House no and society is required"),area:C().trim().required("Please select address"),city:C().trim().required("City is required"),state:C().trim().required("State is required"),country:C().trim().required("Country is required"),pincode:C().transform(r=>r===""?void 0:r).notRequired().test("pincode-format","Pincode must be exactly 6 digits",r=>!r||/^\d{6}$/.test(r))}),Xe=({setIsOpen:r,isOpen:o,address:a,isEditMode:e})=>{const t=Q(),{addAddress:s,loading:i}=pe(),{editAddress:l,loading:d}=me(),[c,P]=h.useState({}),[I,E]=h.useState(!1),[u,p]=h.useState({full_name:"",phone_number:"",address_type:"1",building_number:"",area:"",lat:"",long:"",landmark:"",pincode:"",city:"",state:"Gujarat",country:""}),[S,b]=h.useState(!1),[N,T]=h.useState(!1),R=x=>{p({...u,area:x}),b(!0)},$=async x=>{p({...u,area:x});try{const k=await te(x),v=await ee(k[0]);v&&p(A=>({...A,lat:v==null?void 0:v.lat,long:v==null?void 0:v.lng}))}catch{y.error("Failed to fetch address detail",{className:"toast-error"})}},j=x=>{const{name:k,value:v}=x.target;p({...u,[k]:v})},m=async x=>{x.preventDefault(),!u.lat||!u.long?E(!0):E(!1);const k=Object.fromEntries(Object.entries(u).filter(([A,w])=>w!==""&&w!==void 0&&w!==null&&w!=="0"&&w!=="undefined"));try{await Je.validate(k,{abortEarly:!1})}catch(A){if(A.inner){const w={};A.inner.forEach(D=>{w[D.path]=D.message}),P(w)}return}if(P({}),e){const{address_id:A}=a;if(await l(u,A)){t(le({formData:u,address_id:A})),r(!1);return}return}const v=await s(k);v&&(t(ie(v)),r(!1))},_=()=>{r(!1),p({address_type:"1",full_name:"",phone_number:"",building_number:"",area:"",landmark:"",pincode:"",city:"",state:"",country:""})},L=x=>{x.preventDefault(),T(!0)};return h.useEffect(()=>{a&&p({full_name:a==null?void 0:a.full_name,phone_number:a==null?void 0:a.phone_number,address_type:a==null?void 0:a.address_type,building_number:a==null?void 0:a.building_number,area:a==null?void 0:a.area,lat:a==null?void 0:a.lat,long:a==null?void 0:a.long,landmark:a==null?void 0:a.landmark,pincode:(a==null?void 0:a.pincode)===0?"":a==null?void 0:a.pincode,city:a==null?void 0:a.city,state:a==null?void 0:a.state,country:a==null?void 0:a.country})},[]),h.useEffect(()=>(document.body.style.overflow="hidden",()=>document.body.style.overflow="auto"),[u]),n.jsxs("section",{className:`fixed inset-0 p-8 bg-black bg-opacity-75 grid place-items-center min-h-screen w-full overflow-auto z-50 mb-l:p-6 ${o?"block":"hidden"}`,children:[n.jsxs("div",{className:"w-full max-w-[60rem] bg-white shadow-2xl p-12 pb-16 rounded-[0.75rem] tab-l:rounded-xl mb-l:rounded-lg mb-l:p-10 mb:p-8",children:[n.jsxs("div",{className:"mb-10 flex justify-between items-center flex-wrap tab-l:mb-8",children:[n.jsx("h2",{className:"text-[2.4rem] leading-[1] text-[var(--black)] tab-l:text-[2rem]",children:e?"Edit Address":"Add New Address"}),n.jsx("button",{type:"button",title:"close",className:"border border-gray-300 rounded-md inline-flex items-center justify-center text-gray-400 focus:outline-none focus:border-indigo-500 shadow-2xl h-10 w-10",onClick:_,children:n.jsx(Y,{className:"h-8 w-8 tab-s:h-6 tab-s:w-6"})})]}),n.jsxs("form",{onSubmit:m,className:"grid grid-cols-[repeat(auto-fill,_minmax(25rem,_1fr))] w-full gap-x-10 gap-y-12 tab-s:gap-10 mb-l:grid-cols-1 mb:gap-8",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"full_name",className:"aam-label",children:"Fullname"}),n.jsxs("div",{children:[n.jsx("input",{name:"full_name",id:"full_name",type:"text",onChange:j,value:u.full_name,className:"aam-input"}),c.full_name&&n.jsx("p",{className:"aam-error-label",children:c.full_name})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"phone_number",className:"aam-label",children:"Phone number"}),n.jsxs("div",{children:[n.jsx("input",{name:"phone_number",id:"phone_number",type:"text",onChange:j,value:u.phone_number,className:"aam-input"}),c.phone_number&&n.jsx("p",{className:"aam-error-label",children:c.phone_number})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"address_type",className:"aam-label",children:"Address type"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{name:"address_type",id:"address_type",className:"aam-input appearance-none",onChange:j,value:Number(u.address_type),children:[n.jsx("option",{value:1,children:"home"}),n.jsx("option",{value:2,children:"Office"}),n.jsx("option",{value:3,children:"Other"})]}),n.jsx(se,{className:"absolute top-1/2 right-3 transform -translate-y-1/2 text-gray-500 pointer-events-none"}),c.address_type&&n.jsx("p",{className:"aam-error-label",children:c.address_type})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"area",className:"aam-label",children:"Search Address"}),n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"relative",children:[n.jsx(We,{value:u.area,onChange:R,onSelect:$,children:({getInputProps:x,suggestions:k,getSuggestionItemProps:v,loading:A})=>n.jsxs(n.Fragment,{children:[n.jsx("input",{...x({className:"aam-input",id:"area",type:"text",onFocus:()=>b(!0),onBlur:()=>b(!1)})}),S&&k.length>0&&n.jsx("div",{className:"absolute z-10 bg-white rounded-lg shadow-lg w-full mt-1 border border-gray-200 laptop-l:mt-1 max-h-[150px] overflow-y-auto",children:n.jsxs("ul",{className:"text-[1.4rem] font-normal text-[var(--black)]",children:[A&&n.jsx("li",{className:"block px-4 py-[0.8rem] hover:bg-gray-100",children:"Loading..."}),!A&&k.map((w,D)=>{const{...ae}=v(w);return n.jsx("li",{...ae,className:"block px-4 py-[0.8rem] hover:bg-gray-100",children:w==null?void 0:w.description},D)})]})})]})}),n.jsx("button",{className:"h-full bg-primary text-white px-4 py-1 rounded-br-lg rounded-tr-lg  absolute top-1/2 right-0 -translate-y-1/2",onClick:L,children:n.jsx(Z,{className:"h-8 w-8"})})]}),c.area&&n.jsx("p",{className:"aam-error-label",children:c.area})||I&&n.jsx("p",{className:"aam-error-label",children:"please select valid address from dropdown"})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"building_number",className:"aam-label",children:"House number and society"}),n.jsxs("div",{children:[n.jsx("input",{name:"building_number",id:"building_number",type:"text",onChange:j,value:u.building_number,className:"aam-input"}),c.building_number&&n.jsx("p",{className:"aam-error-label",children:c.building_number})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"landmark",className:"aam-label",children:"Landmark"}),n.jsxs("div",{children:[n.jsx("input",{name:"landmark",id:"landmark",type:"text",onChange:j,value:u.landmark,className:"aam-input"}),c.landmark&&n.jsx("p",{className:"aam-error-label",children:c.landmark})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"city",className:"aam-label",children:"City"}),n.jsxs("div",{children:[n.jsx("input",{name:"city",id:"city",type:"text",onChange:j,value:u.city,className:"aam-input"}),c.city&&n.jsx("p",{className:"aam-error-label",children:c.city})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"pincode",className:"aam-label",children:"Pincode"}),n.jsxs("div",{children:[n.jsx("input",{name:"pincode",id:"pincode",type:"text",onChange:j,value:u.pincode,className:"aam-input"}),c.pincode&&n.jsx("p",{className:"aam-error-label",children:c.pincode})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"state",className:"aam-label",children:"State"}),n.jsxs("div",{children:[n.jsx("input",{name:"state",id:"state",type:"text",onChange:j,value:u.state,className:"aam-input"}),c.state&&n.jsx("p",{className:"aam-error-label",children:c.state})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"country",className:"aam-label",children:"Country"}),n.jsx("input",{name:"country",id:"country",type:"text",onChange:j,value:u.country,className:"aam-input"}),c.country&&n.jsx("p",{className:"aam-error-label",children:c.country})]}),n.jsx("div",{className:"flex justify-start items-end",children:n.jsx("button",{type:"submit",className:"text-white bg-primary text-[1.4rem] font-medium px-6 py-4 rounded-md flex gap-4 items-center",disabled:i||d,children:e?d?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-block h-10 w-10 rounded-full border-4 border-t-white border-white/30 animate-spin"}),n.jsx("span",{children:"Processing..."})]}):"Edit Address":i?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-block h-10 w-10 rounded-full border-4 border-t-white border-white/30 animate-spin"}),n.jsx("span",{children:"Processing..."})]}):"Add Address"})})]})]}),N&&n.jsx(ne,{setIsMapOpen:T,setFormData:p,initialCenter:{lat:Number(u==null?void 0:u.lat)||23.03153299642489,lng:Number(u==null?void 0:u.long)||72.57217419501315},vir:u})]})};Xe.propTypes={setIsOpen:g.func.isRequired,isOpen:g.bool.isRequired,address:g.shape({address_id:g.number,full_name:g.string,phone_number:g.string,address_type:g.oneOfType([g.number,g.string]),building_number:g.string,area:g.string,lat:g.oneOfType([g.number,g.string]),long:g.oneOfType([g.number,g.string]),landmark:g.string,pincode:g.oneOfType([g.number,g.string]),city:g.string,state:g.string,country:g.string}),isEditMode:g.bool.isRequired};const et=()=>{const[r,o]=h.useState(!1),a="http://35.154.167.170:3000",e=localStorage.getItem("token");return{deleteAddress:async s=>{if(!s){y.error("Address Id is required to delete address");return}try{o(!0);const i=await fetch(`${a}/address/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}}),l=await i.json();return i.ok?(y.success((l==null?void 0:l.message)||"Address deleted successfully"),l==null?void 0:l.data):null}catch{return y.error("Unable to delete address, please try again later!"),null}finally{o(!1)}},loading:r}},tt=()=>{const r=Q(),o=ce(l=>{var d;return(d=l==null?void 0:l.auth)==null?void 0:d.isAuthenticated}),[a,e]=h.useState(!0),t="http://35.154.167.170:3000",s=localStorage.getItem("token"),i=async()=>{var l;if(!o||!s){e(!1);return}try{const d=await fetch(`${t}/address`,{method:"GET",headers:{Authorization:`Bearer ${s}`}}),c=await d.json();d.ok?r(ue((l=c==null?void 0:c.data)==null?void 0:l.result)):y.error("Failed to fetch address data!")}catch{y.error("Failed to fetch address data!")}finally{e(!1)}};return h.useEffect(()=>{i()},[o,t,r,s]),{loading:a,fetchAddress:i}};export{Xe as A,et as a,tt as u};
