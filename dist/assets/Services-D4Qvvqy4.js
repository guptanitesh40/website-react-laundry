import{j as e,G as E,r as x,_ as h,a as k,d as f,e as C,f as P,I as _,h as N,i as S,R as b,P as m,u as z,L as A,k as D}from"./index-D7dDbGKN.js";import{F as I}from"./index-DFplrbaL.js";import{H as U,a as O}from"./index-BJm-8wiI.js";const M=()=>e.jsx("div",{className:"absolute inset-0 max-h-[50.2rem] max-w-full bg-cover bg-center bg-no-repeat z-[-10] bg-[url('/choose-services-bg.png')] laptop-m:max-h-[43.2rem] laptop:max-h-[43rem] laptop-s:max-h-[35.9rem] tab-l:max-h-[31.7rem] tab-m:max-h-[29.3rem] tab-s:max-h-[27.3rem]"});function G(t){return E({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"},child:[]},{tag:"path",attr:{d:"M21 21l-6 -6"},child:[]}]})(t)}const W=()=>{const t="http://35.154.167.170:3000",[o,r]=x.useState([]),[s,a]=x.useState(!0);return x.useEffect(()=>{(async()=>{var n;try{const p=await fetch(`${t}/web/services`,{method:"GET"}),l=await p.json();p.ok?r((n=l==null?void 0:l.data)==null?void 0:n.services):h.error("Failed to fetch services!")}catch{h.error("Failed to fetch services!")}finally{a(!1)}})()},[t]),{services:o,loading:s}},H=()=>{const t="http://35.154.167.170:3000";return{fetchCategories:async r=>{try{const s=await fetch(`${t}/web/categories?service_id=${r}`,{method:"GET"}),a=await s.json();if(s.ok)return a==null?void 0:a.data;h.error("Failed to fetch categories!")}catch{h.error("Failed to fetch categories !")}}}},J=()=>{const t=k(),{fetchCategories:o}=H(),r=f(c=>c.service.selectedServiceId),[s,a]=x.useState(""),{services:i,loading:n}=W(),p=async c=>{t(C(c))},l=c=>{c.preventDefault(),s&&(a(""),h.success(s))};return x.useEffect(()=>{!n&&i.length>0&&(r||t(C(i[0].service_id)))},[n,i,r,t]),x.useEffect(()=>{r&&(async()=>{const d=await o(r);d&&(d.length>0?(t(N(d[0].category_category_id)),t(S(d))):(t(N(0)),t(S([]))))})()},[t,o,r]),n?e.jsx(P,{}):e.jsx("section",{className:"section-services",children:e.jsxs("div",{className:"secondary-container",children:[e.jsx("h1",{children:"Choose your Service"}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs("div",{className:"bg-white flex flex-col rounded-3xl shadow-lg laptop-m:rounded-2xl tab-s:rounded-xl",children:[e.jsx("div",{className:"flex justify-center gap-20 pt-12 px-12 border-b border-[#B9BCCF4D] laptop-l:gap-16 laptop-l:px-10 laptop-l:pt-10 laptop-m:pt-8 laptop-m:px-8 laptop-m:gap-12 laptop-s:px-6 laptop-s:pt-6 laptop-s:gap-8 tab-s:px-4 tab-s:pt-4 tab-s:gap-3",children:i.map(c=>{const{name:d,image:v,service_id:j}=c;return e.jsxs("div",{className:`service-container flex flex-col gap-8 items-center ${r===j?"active-service":""} laptop-l:gap-6 laptop-m:gap-4 tab-s:gap-2`,onClick:()=>p(j),children:[e.jsx("div",{className:"h-24 w-24 text-center laptop-l:h-20 laptop-l:w-20 laptop-m:h-16 laptop-m:w-16 laptop-s:h-14 laptop-s:w-14 tab-s:h-12 tab-s:w-12",children:e.jsx("img",{src:v,alt:"Service image",className:"inline-block max-h-full w-auto"})}),e.jsx("h4",{className:"service-name",children:d})]},d)})}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-[0_0_17%] border-r border-[#B9BCCF4D] px-8 py-10 laptop-l:px-10 laptop-l:py-7  laptop-m:py-5 laptop-m:px-5 laptop-m:pl-8 laptop-s:px-4 laptop-s:py-4 laptop-s:pl-6 tab-s:px-4 tab-s:py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(I,{className:"h-12 w-12 fill-[var(--primary)] laptop-l:h-10 laptop-l:w-10 laptop-m:h-8 laptop-m:w-8 laptop-s:h-6 laptop-s:w-6 tab-s:h-4 tab-s:w-4"}),e.jsx("p",{className:"text-[1.6rem] leading-[3rem] font-semibold text-[var(--black)] laptop-l:text-[1.5rem] laptop-l:leading-[2.5rem] laptop-m:text-[1.4rem] laptop-m:leading-normal laptop-s:text-[1.2rem] tab-s:text-[1rem]",children:"Paldi"}),e.jsx(_,{className:"h-10 w-10 laptop-l:h-8 laptop-l:w-8 laptop-s:h-6 laptop-s:w-6 tab-s:h-4 tab-s:w-4"})]})}),e.jsxs("form",{className:"flex-grow flex gap-4 px-8 py-6 laptop-l:px-10 laptop-l:py-3 laptop-m:px-8 laptop-m:py-2 laptop-s:px-6 laptop-s:py-1 tab-s:px-4",onSubmit:l,children:[e.jsx("label",{htmlFor:"search",className:"flex justify-center items-center",children:e.jsx(G,{className:"h-12 w-12 stroke-[#687182] laptop-l:h-10 laptop-l:w-10 laptop-m:h-8 laptop-m:w-8 laptop-s:h-6 laptop-s:w-6 tab-s:h-4 tab-s:w-6"})}),e.jsx("input",{id:"search",type:"text",value:s,onChange:c=>a(c.target.value),placeholder:"Search here...",className:"flex-grow focus:outline-none text-[1.8rem] text-[var(--black)] leading-[2rem] laptop-l:text-[1.6rem] laptop-m:text-[1.4rem] laptop-m:leading-normal laptop-s:text-[1.2rem] tab-s:text-[1.2rem]"}),e.jsx("button",{type:"submit",className:"search-button",children:"Search"})]})]})]})})]})})},V=()=>e.jsxs("div",{className:"filter flex flex-col gap-12 laptop-l:gap-10 laptop-m:gap-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"text-filters",children:"Filters"}),e.jsx("h5",{className:"text-clear",children:"Clear all"})]}),e.jsxs("div",{className:"flex flex-col justify-center items-stretch gap-8 laptop-l:gap-6 laptop-m:gap-4",children:[e.jsx("p",{className:"dd-title",children:"select cloth types"}),e.jsxs("select",{className:"filter-dd",children:[e.jsx("option",{value:"shirt",children:"shirt"}),e.jsx("option",{value:"t-shirt",children:"t-shirt"}),e.jsx("option",{value:"pant",children:"pant"}),e.jsx("option",{value:"zabhbha/kurta",children:"shzabhbha/kurtairt"}),e.jsx("option",{value:"coat/blazer",children:"coat/blazer"})]}),e.jsxs("div",{className:"flex items-center justify-start flex-wrap gap-6",children:[e.jsxs("span",{className:"selected-clothes",children:[e.jsx("span",{children:"pant"}),e.jsx(b,{})]}),e.jsxs("span",{className:"selected-clothes",children:[e.jsx("span",{children:"shirt"}),e.jsx(b,{})]}),e.jsxs("span",{className:"selected-clothes",children:[e.jsx("span",{children:"t-shirt"}),e.jsx(b,{})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-8 laptop-l:gap-6 laptop-m:gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("p",{className:"dd-title",children:"Price"}),e.jsx("p",{className:"filter-price",children:"₹10 - ₹180"})]}),e.jsx("div",{children:e.jsx("form",{children:e.jsx("input",{type:"range",className:"input-range"})})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[1.2rem]",children:"₹10"}),e.jsx("span",{className:"text-[1.2rem]",children:"₹500"})]})]})]}),K=()=>{const t="http://35.154.167.170:3000",o=localStorage.getItem("token");return{addToCart:async({category_id:s,product_id:a,service_id:i,itemCount:n})=>{var p;try{const l=await fetch(`${t}/carts`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({category_id:Number(s),product_id:a,service_id:i,quantity:n})});if(l.ok){h.success("Item Added Successfully");const c=await l.json();return(p=c==null?void 0:c.data)==null?void 0:p.cart_id}else return null}catch{return h.error("Error occur while adding item into cart!",{style:{maxWidth:"400px"}}),null}}}},Q=()=>{const t="http://35.154.167.170:3000",o=localStorage.getItem("token");return{updateCart:async(s,a)=>{try{(await fetch(`${t}/carts/${a}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({quantity:s})})).ok||h.error("Failed to update cart!")}catch{h.error("Failed to update cart!")}}}},X=()=>{const t="http://35.154.167.170:3000",o=localStorage.getItem("token");return{deleteCart:async s=>{try{const a=await fetch(`${t}/carts/${s}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}}),i=await a.json();a.ok&&h.success(i.message,{style:{maxWidth:"400px"}})}catch{h.error("Unable to delete item from cart!")}}}},F=({categoryItem:t,category_id:o})=>{const r=z(),[s,a]=x.useState(1),[i,n]=x.useState(null),[p,l]=x.useState(!1),[c,d]=x.useState(!1),v=f(u=>u.auth.isAuthenticated),{addToCart:j}=K(),{updateCart:y}=Q(),{deleteCart:R}=X(),L=async()=>{a(s+1);const u=s+1;await y(u,i)},T=async()=>{if(s>0&&s-1!=0){a(s-1);const u=s-1;await y(u,i)}else l(!1),await R(i)},B=async(u,g)=>{if(!v)d(!0);else{l(!0);const w=await j({category_id:o,product_id:u,service_id:g,itemCount:s});w?n(w):h.error("Failed to add item into cart!")}},$=()=>{d(!1)},q=()=>{r("/login")};return x.useEffect(()=>{var u,g;t!=null&&t.carts?(n((u=t==null?void 0:t.carts)==null?void 0:u.cart_id),a((g=t==null?void 0:t.carts)==null?void 0:g.quantity),l(!0)):(l(!1),a(1))},[t]),e.jsxs("div",{className:"overflow-hidden",children:[e.jsxs("div",{className:"cat-item-container flex gap-8 laptop-l:gap-6 laptop-m:gap-4",children:[e.jsx("img",{src:t.product.image,alt:"Service Image",className:"h-32 w-32 rounded-2xl laptop-l:h-28 laptop-l:w-28 laptop-m:h-24 laptop-m:w-24 laptop:h-20 laptop:w-20"}),e.jsxs("div",{className:"flex-grow flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col gap-6 laptop-l:gap-4",children:[e.jsx("h5",{className:"cat-item-name",children:t.product.name}),e.jsxs("p",{className:"cat-item-price",children:["₹",t.price]})]}),p?e.jsxs("button",{className:"inc-dec-btn",children:[e.jsx(U,{className:"stroke-[#B9BCCF]",onClick:T}),s,e.jsx(O,{className:"stroke-[#B9BCCF]",onClick:L})]}):e.jsx("button",{className:"add-btn",onClick:()=>B(t.product_id,t.service_id),children:"Add"})]})]},t.product_id),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:e.jsxs("div",{className:"info-login-container",children:[e.jsx("h2",{className:"text-center text-3xl font-bold leading-9 tracking-tight text-gray-900",children:"Login Required"}),e.jsx("p",{className:" text-red-500",children:"Please login to add items to your cart."}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:q,className:"py-4 px-8 rounded-xl bg-indigo-500 text-white font-medium hover:bg-indigo-400",children:"Login"}),e.jsx("button",{onClick:$,className:"py-4 px-8 rounded-xl bg-[#e4e6eb] font-medium",children:"Cancel"})]})]})})]})};F.propTypes={categoryItem:m.shape({carts:m.shape({cart_id:m.number.isRequired,quantity:m.number.isRequired}),price:m.number.isRequired,service_id:m.number.isRequired,product_id:m.number.isRequired,product:m.shape({product_id:m.number.isRequired,name:m.string.isRequired,image:m.string.isRequired}).isRequired}).isRequired,category_id:m.number.isRequired};const Y=()=>{const t="http://35.154.167.170:3000";return{fetchServiceItems:async(r,s)=>{try{const a=localStorage.getItem("token"),i={};a&&(i.Authorization=`Bearer ${a}`);const n=await fetch(`${t}/web/products?category_id=${r}&service_id=${s}`,{method:"GET",headers:i}),p=await n.json();if(n.ok)return p==null?void 0:p.data;h.error("Failed to fetch selected category items !",{style:{maxWidth:"400px"}})}catch{h.error("Failed to fetch selected category items !",{style:{maxWidth:"400px"}})}}}},Z=()=>{const t=k(),{fetchServiceItems:o}=Y(),r=f(l=>l.category.categories),s=f(l=>l.service.selectedServiceId),a=f(l=>l.category.selectedCategoryId),[i,n]=x.useState([]);x.useEffect(()=>{s&&a&&(async()=>{const c=await o(a,s);c&&c.length>0&&n(c)})()},[a,s]);const p=l=>{t(N(l))};return e.jsxs("div",{className:"select-clothes-container",children:[e.jsx("h4",{className:"service-title",children:"Select Cloths"}),e.jsx("div",{className:"flex items-center gap-16 laptop-l:gap-12 laptop-m:gap-8",children:r.length>0?r.map(l=>{const{category_name:c,category_category_id:d}=l;return e.jsx("span",{className:`category-tags ${a===d?"active-tag":""}`,onClick:()=>p(d),children:c},d)}):"No category Found"}),e.jsx("div",{className:"flex flex-col gap-12 laptop-l:gap-10 laptop-m:gap-8",children:r.length>0&&i.map(l=>e.jsx(F,{categoryItem:l,category_id:a},l.product_id))})]})},ee=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card-container",children:[e.jsx("h5",{className:"cart-title",children:"cart"}),e.jsxs("div",{className:"px-12 py-12 flex flex-col gap-10 laptop-l:px-10 laptop-l:gap-9 laptop-m:px-8 laptop-m:py-10 laptop-m:gap-8",children:[e.jsxs("div",{className:"place-center",children:[e.jsx("p",{children:"Sub Total"}),e.jsx("h5",{children:"₹80"})]}),e.jsxs("div",{className:"place-center",children:[e.jsx("p",{children:"Shipping Charge"}),e.jsx("h5",{children:"₹5"})]}),e.jsx("span",{className:"line"}),e.jsxs("div",{className:"place-center total-container",children:[e.jsx("p",{children:"Total"}),e.jsx("h5",{children:"₹85"})]}),e.jsx(A,{to:"/cart",className:"view-cart-btn",children:"view cart"})]})]}),e.jsxs("div",{className:"coupon-container space-y-12  laptop-m:space-y-8",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(D,{className:"h-20 w-20 fill-[var(--secondary)] laptop-m:h-16 laptop-m:w-16"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"dis-text",children:"20% off on this Holi"}),e.jsx("p",{className:"dis-price",children:"Up to INR 20"})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("p",{className:"view-more",children:"View More Offers"}),e.jsx(_,{className:"h-8 w-auto fill-[var(--primary)] laptop-m:h-6"})]})]})]}),te=()=>e.jsx("section",{className:"pt-16 pb-48 laptop-l:pt-12 laptop-l:pb-40 laptop-m:pb-32 laptop:pb-24",children:e.jsx("div",{className:"services-con-container",children:e.jsxs("div",{className:"flex items-start justify-between gap-12 laptop:gap-8 laptop:justify-around",children:[e.jsx("div",{className:"flex-[0_0_27.78%] laptop:flex-[0_0_26%]",children:e.jsx(V,{})}),e.jsx("div",{className:"flex-[0_0_45.8%] laptop:flex-[0_0_39%]",children:e.jsx(Z,{})}),e.jsx("div",{className:"flex-[0_0_21.45%] laptop:flex-[0_0_22.5%]",children:e.jsx(ee,{})})]})})}),ce=()=>e.jsxs("div",{children:[e.jsx(M,{}),e.jsx(J,{}),e.jsx(te,{})]});export{ce as default};
