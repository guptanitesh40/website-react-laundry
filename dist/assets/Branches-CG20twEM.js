import{j as e,P as y,u as R,r as n,a as E,a0 as z,a1 as L,O as M,a2 as P,_ as j,W as T}from"./index-9AahkJ_v.js";import{u as q,a as H,A as U}from"./useFetchAddress-CmBjCgBq.js";import{F as G}from"./index-CahEKVH5.js";const O=()=>e.jsxs("div",{className:"flex items-center gap-6 p-8 border border-[#e0e0e0] rounded-xl",children:[e.jsx("span",{className:"inline-block h-10 w-10 bg-gray-200 rounded-full shimmer-2"}),e.jsxs("div",{className:"grow flex flex-col gap-3 items-start rounded-sm relative",children:[e.jsx("span",{className:"inline-block w-20 h-12 rounded-md bg-gray-200 shimmer"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"inline-block w-40 h-10 bg-gray-200 rounded-md shimmer"}),e.jsx("span",{className:"inline-block w-40 h-10 bg-gray-200 rounded-md shimmer"})]}),e.jsx("div",{className:"w-1/2 h-10 bg-gray-200 rounded-md shimmer"})]})]}),V=({setSelectAddId:t})=>{const l=R(),[c,o]=n.useState(!1),[u,x]=n.useState(!1),[p,m]=n.useState(null),{loading:d}=q(),{deleteAddress:f,loading:b}=H(),a=E(s=>s.address.address),[i,h]=n.useState();n.useEffect(()=>{if(a.length>0){const s=a==null?void 0:a.find(r=>r.is_default===!0);h(s==null?void 0:s.address_id),t(s==null?void 0:s.address_id)}},[a]);function _(){x(!1),o(!0),m(null)}function w(s,r){s.preventDefault(),m(r),x(!0),o(!0)}async function S(s,r){s.preventDefault(),await f(r)&&l(L(r))}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-12 laptop-md:gap-10",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap mb-l:gap-4 mb:justify-center",children:[e.jsx("h4",{className:"cart-sub-title",children:"Select Address"}),e.jsxs("button",{className:"address-btn flex items-center gap-4 laptop-l:gap-3 laptop-md:gap-2",onClick:_,children:[e.jsx(z,{className:"inline-block h-[1.6rem] w-[1.6rem] fill-[var(--secondary)] laptop-l:h-5 laptop-l:w-5 laptop-md:h-4 laptop-md:w-4 tab-m:h-5 tab-m:w-5"}),e.jsx("span",{children:"Add New Address"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-x-8 gap-y-10 justify-center laptop-md:gap-8 laptop:gap-6 tab-l:grid-cols-1 tab-l:gap-8 tab-m:grid-cols-2 tab-s:grid-cols-1",children:d?e.jsxs(e.Fragment,{children:[e.jsx(O,{}),e.jsx(O,{})]}):a&&a.length>0?a.map(s=>{const{address_id:r,full_name:N,building_number:B,phone_number:v,landmark:k,area:C,city:g,state:A,pincode:I,address_type:D}=s,$={1:"Home",2:"Office",3:"Other"};return e.jsxs("label",{className:"flex items-center gap-8 p-8 border rounded-xl cursor-pointer relative laptop-l:p-7 laptop-md:rounded-lg laptop-md:p-6 laptop-md:gap-6 laptop:p-5 tab-l:p-6",children:[e.jsx("input",{type:"radio",name:"address",className:"styled-radio",checked:r===i,onChange:()=>{h(r),t(r)}}),e.jsxs("div",{className:"flex flex-col gap-3 items-start laptop-md:gap-2 tab-l:grow",children:[e.jsx("span",{className:"bg-[#f0f0f0] px-2 py-2.5 rounded-md uppercase text-[1.2rem] text-[#878787] font-semibold laptop-l:text-[1rem] laptop-md:p-2",children:$[D]}),e.jsxs("div",{className:"flex gap-4 text-[1.6rem] text-[var(--black)] font-semibold laptop-l:text-[1.4rem] laptop:text-[1.3rem] tab-m:text-[1.4rem]",children:[e.jsx("h4",{children:N}),e.jsx("h4",{children:v})]}),e.jsxs("span",{className:"text-[1.6rem] leading-[1.75] text-[var(--black)] font-normal laptop-l:text-[1.4rem] laptop:text-[1.3rem]",children:[`${B}, ${C}, ${k}, ${g}, ${A} - `,e.jsx("h4",{className:"inline-block text-[1.4rem] text-[var(--black)] font-semibold laptop:text-[1.2rem]",children:I})]})]}),e.jsxs("div",{className:"del-edit-menu",children:[e.jsxs("span",{className:"three-dots",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsxs("ul",{className:"shortcut",children:[e.jsx("li",{onClick:F=>w(F,s),children:"Edit"}),e.jsx("li",{onClick:F=>S(F,r),children:b?"Deleting..":"Delete"})]})]})]},r)}):e.jsx("span",{className:"self-center text-3xl text-[var(--black)] font-medium",children:"No address Found !"})})]}),c&&e.jsx(U,{setIsOpen:o,isOpen:c,address:p,isEditMode:u})]})};V.propTypes={setSelectAddId:y.func.isRequired};const W=({instruction:t,setInstruction:l})=>e.jsxs("div",{className:"flex flex-col gap-8 laptop-md:gap-7",children:[e.jsx("label",{htmlFor:"addInstruction",className:"cart-sub-title cursor-pointer",children:"Add Instruction"}),e.jsx("textarea",{name:"add-instruction",id:"addInstruction",value:t,onChange:c=>l(c.target.value),className:"border border-[#B9BCCF4D] rounded-xl focus:outline-none focus:border-indigo-500 px-4 py-6 font-[var(--black)] text-[1.8rem] laptop-l:text-[1.6rem] laptop-l:px-3 laptop-l:py-5 laptop-l:rounded-lg laptop-md:text-[1.5rem] laptop-md:py-4 laptop-md:px-2 laptop:text-[1.4rem] mb-l:p-4",placeholder:"Write Message here ..."})]});W.propTypes={instruction:y.string,setInstruction:y.func.isRequired};function J(t){return M({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11 5.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5z"},child:[]},{tag:"path",attr:{d:"M2 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm13 2v5H1V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1m-1 9H2a1 1 0 0 1-1-1v-1h14v1a1 1 0 0 1-1 1"},child:[]}]})(t)}const K=({setPayementMethod:t,isPickupClothes:l})=>(n.useEffect(()=>{l&&t(1)},[l]),e.jsxs("form",{className:"flex flex-col gap-12 laptop-l:gap-10 mb-l:gap-8",children:[e.jsxs("h4",{className:"cart-sub-title",children:[l?"":"Select"," Payment Method"]}),e.jsxs("label",{className:"border border-gray-400 cursor-pointer p-6 rounded-xl flex justify-between items-center shadow w-[45rem] transition-all duration-300 laptop-l:rounded-lg laptop-md:p-4 laptop-md:w-[38rem] laptop-md:pr-6 laptop:w-[32.5rem] tab-m:w-[35rem] tab-m:rounded-md mb-l:w-full",children:[e.jsxs("div",{className:"flex items-center space-x-5 laptop-l:space-x-6 laptop-md:space-x-4 laptop:space-x-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(J,{className:"inline-block h-12 w-12 fill-[var(black)] laptop-md:h-10 laptop-md:w-10"})}),e.jsx("h2",{className:"text-[2rem] leading-[1.75] capitalize laptop-l:text-[1.8rem] laptop-md:text-[1.6rem] laptop:text-[1.5rem]",children:"Cash On Delivery"})]}),e.jsx("input",{type:"radio",name:"payment",className:"styled-radio",checked:l,onChange:()=>{t(1)}})]}),!l&&e.jsxs("label",{className:"border border-gray-400 cursor-pointer p-6 rounded-xl flex justify-between items-center shadow w-[45rem]  transition-all duration-300 laptop-l:rounded-lg laptop-md:p-4 laptop-md:w-[38rem] laptop-md:pr-6 laptop:w-[32.5rem] tab-m:w-[35rem] tab-m:rounded-md mb-l:w-full",children:[e.jsxs("div",{className:"flex items-center space-x-5 laptop-l:space-x-6 laptop-md:space-x-4 laptop:space-x-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(P,{className:"inline-block h-12 w-12 fill-[var(black)] laptop-md:h-10 laptop-md:w-10"})}),e.jsx("h2",{className:"text-[2rem] leading-[1.75] capitalize laptop-l:text-[1.8rem] laptop-md:text-[1.6rem] laptop:text-[1.5rem]",children:"Online Payement"})]}),e.jsx("input",{type:"radio",name:"payment",value:2,className:"styled-radio",onChange:()=>{t(2)}})]})]}));K.propTypes={setPayementMethod:y.func.isRequired};const ae=()=>{const[t,l]=n.useState(!1),c="http://3.110.208.70:3000",o=localStorage.getItem("token"),u=E(p=>p.user.user.user_id);return{placeOrder:async({items:p,sub_total:m,description:d="",coupon_code:f,normal_delivery_charges:b,payment_type:a,address_id:i,express_delivery_charges:h,express_delivery_hour:_,transaction_id:w="",paid_amount:S=0,branch_id:s,is_quick_order:r=!1,company_name:N,gstin:B})=>{const v=new URLSearchParams;r&&v.append("is_quick_order","true");let k=1;a===2&&w&&(k=2);const C={items:Array.isArray(p)?p:[],sub_total:Number(m??0),description:d??"",coupon_code:f??"",normal_delivery_charges:Number(b??0),payment_type:a??1,address_id:i,express_delivery_charges:Number(h??0),express_delivery_hour:_,transaction_id:w??"",paid_amount:Number(S??0),branch_id:s,payment_status:k,user_id:u,order_status:1,company_name:N??"",gstin:B??""};try{l(!0);const g=await fetch(`${c}/orders?${v.toString()}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(C)}),A=await g.json();return g.ok?(j.success("Order placed successfully!",{className:"toast-success"}),A.data):(j.error(A.message),!1)}catch{return j.error("Failed to place an order!",{className:"toast-error"}),!1}finally{l(!1)}},loading:t}},Q=()=>{const t="http://3.110.208.70:3000",l=window.localStorage.getItem("token"),[c,o]=n.useState(!0),[u,x]=n.useState([]);return n.useEffect(()=>{(async()=>{try{const m=await fetch(`${t}/branches/list`,{method:"GET"});if(!m.ok){j.error("Failed to fetch branches.",{className:"toast-error"});return}const d=await m.json();x((d==null?void 0:d.data)||[])}catch{j.error("Failed to fetch branches. Please check your internet connection.",{className:"toast-error"})}finally{o(!1)}})()},[t,l]),{branches:u,loading:c}},X=({setSelectedBranchId:t,noSelection:l,setNoSelection:c})=>{const{branches:o}=Q(),[u,x]=n.useState(!1),[p,m]=n.useState("Select Branch"),d=n.useRef(null),f=()=>{x(a=>!a)},b=(a,i)=>{m(a),t(i),f(),c(!1)};return n.useEffect(()=>{const a=i=>{d.current&&!d.current.contains(i.target)&&x(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[p]),e.jsxs("div",{className:"flex flex-col gap-8 laptop-md:gap-7 tab-s:gap-6",children:[e.jsx("label",{className:"cart-sub-title",children:"Select Branch"}),e.jsx("div",{className:`self-start border ${l?"border-red-400":"border-gray-400"} rounded-lg w-[45rem] laptop-md:w-[38rem] laptop:w-[32.5rem] tab-m:w-[35rem] tab-m:rounded-md mb-l:w-full mb-l:max-w-full`,ref:d,children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:f,className:"box-border capitalize w-full px-10 py-7 inline-flex items-center justify-between gap-10 rounded-lg text-[1.8rem] text-[var(--black)] focus:outline-none font-medium text-center laptop-l:py-6 laptop-l:px-9 laptop-l:text-[1.7rem] laptop-md:py-4 laptop-md:px-6 laptop-md:text-[1.6rem] laptop:text-[1.5rem] tab-m:rounded-md mb-l:px-5",type:"button",children:[e.jsx(G,{className:"h-10 w-10 fill-primary laptop-l:h-9 laptop-l:w-9 laptop-md:h-8 laptop-md:w-8"}),p,e.jsx(T,{className:`transition-transform h-8 w-8 fill-primary laptop-l:h-7 laptop-l:w-7 mb-l:h-6 mb-l:w-6 ${u?"rotate-180":""}`})]}),u&&e.jsx("div",{className:"absolute z-10 bg-white rounded-lg shadow-lg w-full mt-2 border laptop-l:mt-1 overflow-hidden",children:e.jsx("ul",{className:"py-2 text-[1.7rem] text-[var(--black)] laptop-l:py-0 laptop-l:text-[1.5rem] laptop-md:text-[1.4rem]",children:o&&o.length>0?o.map(a=>{const{branch_id:i,branch_name:h}=a;return e.jsx("li",{className:"block px-8 py-[1.25rem] capitalize hover:bg-gray-100 laptop-l:py-[1.1rem] laptop-l:px-7",onClick:()=>b(h,i),children:h},i)}):e.jsx("li",{className:"block px-8 py-[1.25rem] font-medium hover:bg-gray-100",children:"No Branch Found !"})})})]})})]})};X.propTypes={setSelectedBranchId:y.func.isRequired};export{V as A,X as B,K as P,W as a,ae as u};
