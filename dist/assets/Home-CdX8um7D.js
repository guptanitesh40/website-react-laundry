import{n as Ye,m as Ue,p as re,o as X,q as ue,r,t as Ge,j as e,v as qe,w as Ve,_ as g,V as Ke,P as S,ab as Xe,ac as he,f as xe,a6 as H,ad as ge,ae as fe,af as be,ag as je,a as He,ah as Je,ai as Ze,aj as We,ak as Qe,al as es}from"./index-CtdI_EyE.js";import{b as ne,a as ss,c as G,d as q}from"./index-yTpO4hoA.js";import{L as as}from"./Loading-BVid2nT1.js";import{u as ts}from"./useDownloadInvoice-BuVQEAUn.js";import{u as ye,a as Ne,I as rs}from"./useVerifyPayement-8P2zA5pc.js";import{B as we}from"./Backdrop-CEq1qTfR.js";import{c as ns}from"./createSimplePaletteValueFilter-bm0fmN_7.js";import{k as ve,d as ke}from"./ButtonBase-BblFAVKo.js";import"./useSlot-BWfj1JDP.js";function ls(t){return Ye("MuiCircularProgress",t)}Ue("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const L=44,ae=ve`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,te=ve`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`,os=typeof ae!="string"?ke`
        animation: ${ae} 1.4s linear infinite;
      `:null,is=typeof te!="string"?ke`
        animation: ${te} 1.4s ease-in-out infinite;
      `:null,cs=t=>{const{classes:a,variant:s,color:i,disableShrink:h}=t,d={root:["root",s,`color${X(i)}`],svg:["svg"],circle:["circle",`circle${X(s)}`,h&&"circleDisableShrink"]};return Ve(d,ls,a)},ds=re("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:s}=t;return[a.root,a[s.variant],a[`color${X(s.color)}`]]}})(ue(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:os||{animation:`${ae} 1.4s linear infinite`}},...Object.entries(t.palette).filter(ns()).map(([a])=>({props:{color:a},style:{color:(t.vars||t).palette[a].main}}))]}))),ps=re("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,a)=>a.svg})({display:"block"}),ms=re("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,a)=>{const{ownerState:s}=t;return[a.circle,a[`circle${X(s.variant)}`],s.disableShrink&&a.circleDisableShrink]}})(ue(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:a})=>a.variant==="indeterminate"&&!a.disableShrink,style:is||{animation:`${te} 1.4s ease-in-out infinite`}}]}))),Ce=r.forwardRef(function(a,s){const i=Ge({props:a,name:"MuiCircularProgress"}),{className:h,color:d="primary",disableShrink:n=!1,size:p=40,style:f,thickness:m=3.6,value:l=0,variant:C="indeterminate",...c}=i,D={...i,color:d,disableShrink:n,size:p,thickness:m,value:l,variant:C},N=cs(D),z={},b={},j={};if(C==="determinate"){const x=2*Math.PI*((L-m)/2);z.strokeDasharray=x.toFixed(3),j["aria-valuenow"]=Math.round(l),z.strokeDashoffset=`${((100-l)/100*x).toFixed(3)}px`,b.transform="rotate(-90deg)"}return e.jsx(ds,{className:qe(N.root,h),style:{width:p,height:p,...b,...f},ownerState:D,ref:s,role:"progressbar",...j,...c,children:e.jsx(ps,{className:N.svg,ownerState:D,viewBox:`${L/2} ${L/2} ${L} ${L}`,children:e.jsx(ms,{className:N.circle,style:z,ownerState:D,cx:L,cy:L,r:(L-m)/2,fill:"none",strokeWidth:m})})})}),us=()=>{const t="http://35.154.167.170:3000",a=localStorage.getItem("token"),[s,i]=r.useState(!1);return{getOrders:async()=>{i(!0);try{const d=await fetch(`${t}/orders`,{method:"GET",headers:{Authorization:`Bearer ${a}`}}),n=await d.json();return d.ok?n==null?void 0:n.data:(g.error("Failed to retrieve your orders. Please try again later.",{className:"toast-error"}),!1)}catch{return g.error("Failed to fetch orders. Please check your connection and try again.",{className:"toast-error"}),!1}finally{i(!1)}},loading:s}},hs=()=>{const t="http://35.154.167.170:3000",a=localStorage.getItem("token");return{getOrders02:async(i,h,d)=>{try{const n=!h&&!d?await fetch(`${t}/orders?per_page=10&page_number=${i}`,{method:"GET",headers:{Authorization:`Bearer ${a}`}}):await fetch(`${t}/orders?sort_by=${d}&order=${h.toUpperCase()}&per_page=10&page_number=${i}`,{method:"GET",headers:{Authorization:`Bearer ${a}`}}),p=await n.json();return n.ok?p.data:(g.error("Failed to fetch orders. Please check your connection and try again.",{className:"toast-error"}),!1)}catch{return g.error("Failed to retrieve your orders. Please try again later.",{className:"toast-error"}),!1}}}};function xs(t){return Ke({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Star"},child:[{tag:"path",attr:{d:"M16.6,20.463a1.5,1.5,0,0,1-.7-.174l-3.666-1.927a.5.5,0,0,0-.464,0L8.1,20.289a1.5,1.5,0,0,1-2.177-1.581l.7-4.082a.5.5,0,0,0-.143-.442L3.516,11.293a1.5,1.5,0,0,1,.832-2.559l4.1-.6a.5.5,0,0,0,.376-.273l1.833-3.714a1.5,1.5,0,0,1,2.69,0l1.833,3.714a.5.5,0,0,0,.376.274l4.1.6a1.5,1.5,0,0,1,.832,2.559l-2.965,2.891a.5.5,0,0,0-.144.442l.7,4.082A1.5,1.5,0,0,1,16.6,20.463Zm-3.9-2.986L16.364,19.4a.5.5,0,0,0,.725-.527l-.7-4.082a1.5,1.5,0,0,1,.432-1.328l2.965-2.89a.5.5,0,0,0-.277-.853l-4.1-.6a1.5,1.5,0,0,1-1.13-.821L12.449,4.594a.516.516,0,0,0-.9,0L9.719,8.308a1.5,1.5,0,0,1-1.13.82l-4.1.6a.5.5,0,0,0-.277.853L7.18,13.468A1.5,1.5,0,0,1,7.611,14.8l-.7,4.082a.5.5,0,0,0,.726.527L11.3,17.477a1.5,1.5,0,0,1,1.4,0Z"},child:[]}]}]})(t)}const gs=()=>{const[t,a]=r.useState(!1),s="http://35.154.167.170:3000",i=window.localStorage.getItem("token");return{sendFeedBack:async d=>{if(!d||typeof d!="object"){g.error("Please provide valid feedback data. Ensure all fields are filled correctly.",{className:"toast-error"});return}try{a(!0);const n=await fetch(`${s}/feedback`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(d)}),p=await n.json();if(!n.ok){g.error((p==null?void 0:p.message)||"Oops! Something went wrong while sending your feedback. Please try again later.",{className:"toast-error"});return}return g.success("Thank you for your feedback!",{className:"toast-success"}),p}catch{g.error("Unable to send feedback at the moment. Please check your connection or try again later.",{className:"toast-error"});return}finally{a(!1)}},loading:t}},Se=({order_id:t,setModelIsOpen:a,feedback:s,setRefetch:i})=>{const{sendFeedBack:h,loading:d}=gs(),[n,p]=r.useState({}),[f,m]=r.useState(0),[l,C]=r.useState(""),[c,D]=r.useState(!1);r.useEffect(()=>{if(s){const{comment:b,rating:j}=s;C(b),m(j),D(!0)}},[s,c]);const N=b=>{c||m(b)},z=async()=>{const b={};if(f===0&&(b.star="Please select at least one star."),l===""&&(b.message="Please enter your message."),l.trim().length>=512&&p("message cannot exceed 512 characters"),Object.keys(b).length>0){p(b);return}p({}),await h({rating:f,comment:l,order_id:t,is_publish:1})&&(a(!1),i(v=>!v))};return e.jsx("div",{className:"fixed inset-0 top-0 bg-black bg-opacity-75 flex justify-center items-center mb-l:p-6 mb:p-4",children:e.jsxs("div",{className:"border border-[#b9bccf4d] rounded-xl bg-white px-14 py-16 flex flex-col gap-10 w-[40rem] relative laptop:px-12 laptop:py-14 laptop:gap-8 tab-l:rounded-lg tab-l:px-10 tab-l:py-12 tab-l:w-[37.5rem] tab-s:gap-6 tab-s:w-[35rem] mb-l:gap-4",children:[e.jsx("button",{type:"button",title:"close",className:"absolute top-4 right-4 border border-gray-300 rounded-md p-1 inline-flex items-center justify-center text-gray-400 focus:outline-none focus:border-indigo-500 shadow-2xl laptop:right-3 laptop:top-3 tab-s:right-2 tab-s:top-2",onClick:()=>a(!1),children:e.jsx(ne,{className:"h-7 w-7 tab-s:h-6 tab-s:w-6"})}),e.jsxs("div",{className:"text-[2rem] capitalize text-[var(--black)] font-semibold laptop:text-[1.8rem] tab-s:text-[1.6rem]",children:["Order Id #",t]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-start items-center gap-4 tab-s:gap-3",children:Array(5).fill(0).map((b,j)=>e.jsx(he,{onClick:()=>N(j+1),className:`inline-block h-[4.6rem] w-[4.6rem] cursor-pointer text-3xl laptop:h-[4.2rem] laptop:w-[4.2rem] tab-s:h-[3.8rem] tab-s:w-[3.8rem] ${j<f?"fill-[#FF2E17]":"fill-[#B9BCCF]"}`},j))}),n.star&&e.jsx("span",{className:"block mt-2 text-xl leading-1 text-secondary tab-s:text-lg",children:n.star})]}),e.jsxs("div",{className:"flex flex-col gap-6 laptop:gap-4",children:[e.jsx("label",{htmlFor:"message",className:"text-[1.4rem] leading-[2rem] text-[var(--black)]",children:"Write a Review"}),e.jsxs("div",{children:[e.jsx("textarea",{id:"message",rows:6,value:l,readOnly:c,onChange:b=>C(b.target.value),className:"w-full text-[1.4rem] leading-[2.25rem] text-[var(--black)] border border-indigo-200 focus:border-indigo-500 focus:outline-none rounded-lg p-3 tab-s:leading-[2.1rem] tab-s:p-2"}),n.message&&e.jsx("span",{className:"block mt-2 text-xl leading-1 text-secondary tab-s:text-lg",children:n.message})]})]}),e.jsxs("div",{className:"flex justify-start items-center gap-8 tab-s:gap-6",children:[e.jsx("button",{className:`text-white font-medium w-[8.5rem] h-[3.75rem] text-[1.4rem] leading-[1.25] rounded-lg capitalize flex justify-center items-center ${c?"bg-[#b9bccf] cursor-not-allowed":"bg-primary cursor-pointer"}`,onClick:z,disabled:!!c,children:d?e.jsx("span",{className:"inline-block h-8 w-8 border-2 border-white/25 border-r-white rounded-full animate-spin"}):e.jsx("span",{children:"submit"})}),e.jsx("button",{className:"text-[var(--black)] font-medium w-[8.5rem] h-[3.75rem] text-[1.4rem] leading-[1.25] rounded-lg capitalize flex justify-center items-center border border-gray-300",onClick:()=>a(!1),children:e.jsx("span",{children:"cancel"})})]})]})})};Se.propTypes={order_id:S.number.isRequired,setModelIsOpen:S.func.isRequired,setRefetch:S.func.isRequired,feedback:Xe.oneOfType([S.string,S.shape({comment:S.string,rating:S.number})])};const $e=()=>{const[t,a]=r.useState(!1),s="http://35.154.167.170:3000",i=window.localStorage.getItem("token");return{clearDue:async(d,n,p)=>{try{return a(!0),(await fetch(`${s}/orders/customer/clear-due`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({pay_amount:d,payment_status:2,transaction_id:n,order_ids:p})})).ok?(g.success("Due cleared successfully!",{className:"toast-success"}),{status:!0}):(g.error("Failed to clear due. Please try again.",{className:"toast-error"}),{status:!1})}catch{return g.error("An unexpected error occurred.",{className:"toast-error"}),{status:!1}}finally{a(!1)}},loading:t}},fs=()=>{const t="http://35.154.167.170:3000",a=window.localStorage.getItem("token"),[s,i]=r.useState(!1);return{cancelOrder:async(d,n)=>{try{i(!0);const p=await fetch(`${t}/orders/cancel-by-customer`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({order_id:d,text_note:n})}),f=await p.json();return p.ok?(g.success((f==null?void 0:f.message)||"Order canceled successfully!",{className:"toast-success"}),{status:!0}):(g.error("Failed to cancel the order. Please try again later.",{className:"toast-error"}),{status:!1})}catch{return g.error("Something went wrong while canceling the order. Try again later.",{className:"toast-error"}),{status:!1}}finally{i(!1)}},loading:s}},Pe=({setCancelModelIsOpen:t,order_id:a,setRefetch:s})=>{const{cancelOrder:i,loading:h}=fs(),[d,n]=r.useState(""),[p,f]=r.useState(""),m=async()=>{if(!d.trim()){f("Cancellation reason is required");return}if(d.trim().length>=512){f("Reason cannot exceed 512 characters");return}f("");const l=await i(a,d);l!=null&&l.status&&(t(!1),s(C=>!C))};return e.jsx("div",{className:"fixed inset-0 top-0 bg-black bg-opacity-75 flex justify-center items-center mb-l:p-6 mb:p-4",children:e.jsxs("div",{className:"border border-gray-300 rounded-xl bg-white px-14 py-16 flex flex-col gap-14 w-[40rem] relative laptop:px-12 laptop:py-14 laptop:w-[37.5rem] laptop:gap-12 tab-l:rounded-lg tab-l:px-10 tab-l:py-12 tab-l:w-[35rem] tab-l:gap-10 tab-s:gap-8",children:[e.jsx("button",{type:"button",title:"close",className:"absolute top-4 right-4 border border-gray-300 rounded-md p-1 inline-flex items-center justify-center text-gray-400 focus:outline-none focus:border-indigo-500 shadow-2xl laptop:right-3 laptop:top-3 tab-s:right-2 tab-s:top-2",onClick:()=>t(!1),children:e.jsx(ne,{className:"h-7 w-7 tab-s:h-6 tab-s:w-6"})}),e.jsxs("div",{className:"text-[2rem] capitalize text-[var(--black)] font-semibold laptop:text-[1.8rem] tab-s:text-[1.6rem]",children:["Cancel Order #",a]}),e.jsxs("div",{className:"flex flex-col gap-10 laptop:gap-8 tab-s:gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 tab-s:gap-3",children:[e.jsx("label",{htmlFor:"reason",className:"text-[1.6rem] text-[var(--black)] laptop:text-[1.4rem]",children:"Reason for Cancellation"}),e.jsxs("div",{children:[e.jsx("textarea",{id:"reason",rows:6,value:d,onKeyDown:l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),m())},onChange:l=>n(l.target.value),className:"w-full text-[1.4rem] leading-[2.25rem] text-[var(--black)] border border-indigo-200 focus:border-indigo-500 focus:outline-none rounded-lg p-3 tab-s:leading-[2.1rem] tab-s:p-2"}),p&&e.jsx("span",{className:"block text-xl leading-1 text-red-500 tab-s:text-lg",children:p})]})]}),e.jsxs("div",{className:"flex justify-start items-center gap-8 tab-s:gap-6",children:[e.jsx("button",{className:"bg-primary text-white font-medium w-[8.5rem] h-[3.75rem] text-[1.4rem] leading-[1.25] rounded-lg capitalize flex justify-center items-center",onClick:m,disabled:h,children:h?e.jsx("span",{className:"inline-block h-8 w-8 border-2 border-white/25 border-r-white rounded-full animate-spin"}):e.jsx("span",{children:"submit"})}),e.jsx("button",{className:"text-[var(--black)] font-medium w-[8.5rem] h-[3.75rem] text-[1.4rem] leading-[1.25] rounded-lg capitalize flex justify-center items-center border border-gray-300",onClick:()=>t(!1),children:e.jsx("span",{children:"cancel"})})]})]})]})})};Pe.propTypes={setCancelModelIsOpen:S.func.isRequired,order_id:S.number.isRequired,setRefetch:S.func.isRequired};const bs=t=>{const[a,s]=r.useState({}),[i,h]=r.useState(!0),d="http://35.154.167.170:3000",n=window.localStorage.getItem("token");return n||g.error("user is not authenticated",{className:"toast-error"}),r.useEffect(()=>{(async()=>{try{const f=await fetch(`${d}/orders/invoice-list?per_page=10&page_number=${t}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}}),m=await f.json();f.ok?s(m==null?void 0:m.data):g.error("Failed to fetch due orders, please try again!",{className:"toast-error"})}catch{g.error("Something went wrong! Please try again.",{className:"toast-error"})}finally{h(!1)}})()},[d,n,t]),{dueData:a,loading:i}},js=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 mt-2",children:[e.jsx("span",{className:"w-32 h-16 bg-gray-200 rounded-lg animate-pulse"}),e.jsxs("div",{className:"flex justify-center items-center gap-8",children:[e.jsx("span",{className:"w-36 h-10 bg-gray-200 rounded-lg animate-pulse"}),e.jsx("span",{className:"w-20 h-12 bg-gray-200 rounded-lg animate-pulse"})]})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"pp-table",children:[e.jsx("thead",{className:"border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-40 min-w-40",children:e.jsx("div",{className:"bg-gray-200 h-10 rounded-lg animate-pulse"})}),e.jsx("th",{className:"min-w-48",children:e.jsx("div",{className:"bg-gray-200 h-10 rounded-lg animate-pulse"})}),e.jsx("th",{className:"min-w-[18rem]",children:e.jsx("div",{className:"bg-gray-200 h-10 rounded-lg animate-pulse"})}),e.jsx("th",{className:"min-w-[15rem]",children:e.jsx("div",{className:"bg-gray-200 h-10 rounded-lg animate-pulse"})}),e.jsx("th",{className:"min-w-40",children:e.jsx("div",{className:"bg-gray-200 h-10 rounded-lg animate-pulse"})}),e.jsx("th",{className:"min-w-40",children:e.jsx("div",{className:"bg-gray-200 h-10 rounded-lg animate-pulse"})})]})}),e.jsx("tbody",{children:Array.from({length:10}).map((t,a)=>e.jsx("tr",{children:Array.from({length:6}).map((s,i)=>e.jsx("td",{children:e.jsx("div",{className:"bg-gray-200 h-10 rounded-lg animate-pulse"})},i))},a))})]})})]}),Fe=({setModleHandler:t,setRefetch:a})=>{const[s,i]=r.useState(1),[h,d]=r.useState(1),{dueData:n,loading:p}=bs(s),f=xe(y=>{var P;return(P=y==null?void 0:y.user)==null?void 0:P.user}),[m,l]=r.useState(0),[C,c]=r.useState({}),[D,N]=r.useState(!1),{getTransactionId:z}=ye(),{verifyPayement:b}=Ne(),{clearDue:j}=$e(),x=async()=>{N(!0);const y=await z(m);if(y)try{const{first_name:P,last_name:R,mobile_number:T,email:E}=f,F=Object.values(C).flat(),I={key:void 0,aount:m*100,currency:"INR",description:"Due Payement",order_id:y,handler:async function(A){if(N(!0),(await b(A)).status)(await j(m,y,F)).status&&(N(!1),t(!1),a(J=>!J)),N(!1);else{N(!1);return}},prefill:{name:P+" "+R,email:E,contact:T},theme:{color:"#161F5F"}};new window.Razorpay(I).open()}catch{g.error("Failed to initiate online payement please try again letter!",{className:"toast-error"})}finally{N(!1)}else{g.error("Failed to generated transaction id !",{className:"toast-error"}),N(!1);return}},v=y=>{i(y),d(y)},w=(y,P)=>{const{order_id:R,remaining_amount:T}=P;c(E=>{const F={...E},I=F[s]||[];return y.target.checked?I.includes(R)||(F[s]=[...I,R],l(_=>_+T)):(F[s]=I.filter(_=>_!==R),l(_=>_-T)),F})},{count:$,result:V}=n,k=$<=10?1:Math.ceil($/10);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 top-0 bg-black bg-opacity-75 grid place-items-center p-4 overflow-auto",children:e.jsx("div",{className:"border border-[#b9bccf4d] rounded-xl px-14 py-16 w-full max-w-[1000px] relative laptop:px-12 laptop:py-14 tab-l:rounded-lg tab-l:px-10 tab-l:py-12  tab-s:gap-6  mb-l:gap-4 bg-white",children:p?e.jsx(js,{}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",title:"close",className:"absolute top-4 right-4 border border-gray-300 rounded-md p-1 inline-flex items-center justify-center text-gray-400 focus:outline-none focus:border-indigo-500 shadow-2xl laptop:right-3 laptop:top-3 tab-s:right-2 tab-s:top-2",onClick:()=>t(!1),children:e.jsx(ne,{className:"h-8 w-8 tab-s:h-6 tab-s:w-6"})}),e.jsxs("div",{className:"flex justify-between items-center mb-8 mt-2",children:[e.jsx("h2",{className:"text-[2.25rem] leading-[1.75] capitalize text-[var(--black)] font-semibold laptop:text-[1.8rem] tab-s:text-[1.6rem]",children:"Orders"}),e.jsxs("div",{className:"flex justify-center items-center gap-8",children:[e.jsxs("span",{className:"text-[1.4rem] font-medium text-[var(--secondary)]",children:["Amount: ₹",m]}),e.jsx("button",{onClick:x,disabled:m===0,className:`${m===0?"disabled-ppd-btn":""} ppd-btn`,children:"Pay"})]})]}),e.jsxs("div",{className:"border border-[#b9bccf4d] rounded-lg overflow-hidden",children:[e.jsxs("table",{className:"pp-table",children:[e.jsx("thead",{className:"border-b border-[#b9bccf4d]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-40 min-w-40",children:"check"}),e.jsx("th",{className:"min-w-48",children:"order id"}),e.jsx("th",{className:"min-w-[18rem]",children:"booking date"}),e.jsx("th",{className:"min-w-[15rem]",children:"delivery date"}),e.jsx("th",{className:"min-w-40",children:"Total"}),e.jsx("th",{className:"min-w-40",children:"Remaining"})]})}),e.jsx("tbody",{children:V.length>0?V.map((y,P)=>{var _;const{order_id:R,created_at:T,estimated_delivery_time:E,total:F,remaining_amount:I}=y;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",onChange:A=>w(A,y),checked:((_=C[s])==null?void 0:_.includes(R))||!1,className:"w-8 h-8 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-0"})}),e.jsx("td",{children:R}),e.jsx("td",{children:H(T).format("DD/MM/YYYY, hh:mm A")}),e.jsx("td",{children:H(E).format("DD/MM/YY, hh:mm A")}),e.jsxs("td",{children:["₹",F]}),e.jsxs("td",{children:["₹",I]})]},P)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"font-medium text-center",children:"No Due Order Found!"})})})]}),$>10&&e.jsxs("div",{className:"bg-white flex items-center justify-between px-5 max-w-full laptop:px-6 tab:px-4 tab:flex-wrap mb-l:flex-col mb-l:gap-4 mb-l:py-4 border-t border-[#b9bccf4d]",children:[e.jsxs("p",{className:"cpn-tag",children:["Showing"," ",s===1&&"1"||(s-1)*10+1," ","to ",s===k?$:s*10," ","entries"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{className:"pg-btn",onClick:()=>{s!==1&&v(1)},children:e.jsx(ge,{className:`${s==1?"pg-icon-light":"pg-icon"}`})}),e.jsx("button",{className:"pg-btn",onClick:()=>{s!==1&&v(s-1)},children:e.jsx(fe,{className:`${s==1?"page-icon-light":"page-icon"}`})}),e.jsx("button",{className:`pg-btn ${h===1?"active-pg":""}`,onClick:()=>{s!==1&&v(1)},children:e.jsx("span",{className:"pg-num",children:"1"})}),e.jsx("button",{className:`pg-btn ${h===2?"active-pg":""}`,onClick:()=>{s!==2&&v(2)},children:e.jsx("span",{className:"pg-num",children:"2"})}),$>20&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`pg-btn ${h===3?"active-pg":""}`,onClick:()=>{s!==3&&v(3)},children:e.jsx("span",{className:"pg-num",children:"3"})}),$>30&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`pg-btn ${h===4?"active-pg":""} ${$>40?"!hidden":"!block"}`,onClick:()=>{s!==4&&v(4)},children:e.jsx("span",{className:"pg-num",children:"4"})}),$>40&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`pg-btn ${$>40&&s>=4&&s<k?"active-pg":""}`,children:e.jsx("span",{className:"pg-num",children:"..."})}),e.jsx("button",{className:`pg-btn ${h===k?"active-pg":""}`,onClick:()=>{s!==k&&v(k)},children:e.jsx("span",{className:"pg-num",children:k})})]})]})]}),e.jsx("button",{className:"pg-btn",onClick:()=>{s!==k&&v(s+1)},children:e.jsx(be,{className:`${s===k?"pg-icon-light":"pg-icon"}`})}),e.jsx("button",{className:"pg-btn",onClick:()=>{s!==k&&v(k)},children:e.jsx(je,{className:`${s===k?"pg-icon-light":"pg-icon"}`})})]})]})]})]})})}),e.jsx(we,{sx:y=>({color:"#fff",zIndex:y.zIndex.drawer+1}),open:D,children:e.jsx(Ce,{color:"inherit"})})]})};Fe.propTypes={setModleHandler:S.func.isRequired,setRefetch:S.func.isRequired};const Fs=()=>{const{getOrders:t}=us(),{getOrders02:a}=hs(),[s,i]=r.useState([]),[h,d]=r.useState(0),[n,p]=r.useState(0),[f,m]=r.useState(!0),[l,C]=r.useState(0),[c,D]=r.useState(1),[N,z]=r.useState(0),[b,j]=r.useState(1),[x,v]=r.useState(""),[w,$]=r.useState(""),[V,k]=r.useState(0),[y,P]=r.useState(""),[R,T]=r.useState({}),{downloadInvoice:E,loading:F}=ts(),I=He(),[_,A]=r.useState(!1),[le,oe]=r.useState([]),{getTransactionId:J}=ye(),{verifyPayement:_e}=Ne(),{clearDue:Oe}=$e(),[De,ie]=r.useState(!1),[Re,ce]=r.useState(!1),Ie=xe(u=>{var o;return(o=u==null?void 0:u.user)==null?void 0:o.user}),[Ae,de]=r.useState(!1),[ze,K]=r.useState(!1),B=async u=>{m(!0),D(u);const o=await a(u);o&&(i(o.result),m(!1))},Y=async u=>{if($(u),!x){v("desc");const o=await a(c,"asc",u);o&&i(o.result);return}if(x=="desc"){v("asc");const o=await a(c,x,u);o&&i(o.result)}else{v("desc");const o=await a(c,x,u);o&&i(o.result)}},Me=async(u,o)=>{o===11&&(k(u),await E(u))},Te=(u,o)=>{ie(!0),P(u),T(o)},Be=async()=>{if(!n||n<=0){g("No due amount to clear.",{className:"toast-success"});return}A(!0);const u=await J(n);if(u)try{const{first_name:o,last_name:M,mobile_number:Z}=Ie,W={key:void 0,aount:n*100,currency:"INR",description:"Due Payement",order_id:u,handler:async function(Q){if(A(!0),(await _e(Q)).status)(await Oe(n,u,le)).status&&K(ee=>!ee),A(!1);else{A(!1);return}},prefill:{name:o+" "+M,email:"user@gmail.com",contact:Z},theme:{color:"#161F5F"}};new window.Razorpay(W).open()}catch{g.error("Failed to initiate online payement please try again letter!",{className:"toast-error"})}finally{A(!1)}else{g.error("Failed to generated transaction id !",{className:"toast-error"}),A(!1);return}},Le=(u,o)=>{if(o===11){g("Order is delivered and cannot be canceled.");return}if(o===12||o===13){g("Order is cancelled alredy");return}P(u),ce(!0)},Ee=()=>{de(!0)};return r.useEffect(()=>{(async()=>{m(!0),j(1);const o=await t();o&&(oe(o.order_ids),p(o==null?void 0:o.total_pending_due_amount),d(o.inProgressCount),z(o.count),C(Math.ceil(o.count/10)),i(o.result),m(!1)),m(!1)})()},[ze]),f?e.jsx(as,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-8 tab-l:gap-6 mb-l:gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-14 laptop-m:gap-10 laptop:gap-8 tab-l:gap-6 tab-s:gap-4 tab-s:flex-wrap tab-s:items-stretch",children:[e.jsxs("div",{className:"status-card flex gap-8 items-center laptop:gap-6 tab-l:gap-4 tab-l:flex-col tab-s:min-w-[21rem] tab-s:flex-1 tab-s:order-last mb-l:order-first",children:[e.jsx("span",{className:"bg-[#FFE0EB] inline-block h-24 w-24 rounded-full laptop:h-20 laptop:w-20 tab-l:h-[4.5rem] tab-l:w-[4.5rem] tab-s:h-16 tab-s:w-16",children:e.jsx(Je,{className:"inline-block p-5 h-full w-full fill-[#FF82AC] laptop:p-4 tab-l:p-3 tab-s:p-3"})}),e.jsxs("div",{className:"flex flex-col gap-4 grow laptop-s:gap-3 tab-l:self-stretch tab-l:items-center tab-s:gap-2 ",children:[e.jsx("p",{className:"card-label",children:"Total Pending Due Amount"}),e.jsxs("p",{className:"card-price",children:["₹",n||"0"]}),n&&n>0?e.jsxs("div",{className:"flex justify-start items-center flex-wrap gap-4",children:[e.jsx("button",{className:"paynow-btn",onClick:Be,children:"Pay Full"}),e.jsx("button",{className:"paynow-btn",onClick:Ee,children:"Pay Partial"})]}):""]})]}),e.jsxs("div",{className:"status-card flex gap-8 items-center laptop:gap-6 tab-l:gap-4 tab-l:flex-col tab-s:min-w-[21rem] tab-s:flex-1",children:[e.jsx("span",{className:"bg-[#DCFAF8] inline-block h-24 w-24 rounded-full laptop:h-20 laptop:w-20 tab-l:h-[4.5rem] tab-l:w-[4.5rem] tab-s:h-16 tab-s:w-16",children:e.jsx(ss,{className:"inline-block p-7 h-full w-full fill-[#16DBCC] laptop:p-5 tab-l:p-4"})}),e.jsxs("div",{className:"flex flex-col gap-4 grow laptop:gap-3 tab-l:self-stretch tab-l:items-center tab-s:gap-2 tab-s:items-center",children:[e.jsx("p",{className:"card-label",children:"Lifetime Total Order Number"}),e.jsx("p",{className:"card-price",children:N})]})]}),e.jsxs("div",{className:"status-card flex gap-8 items-center laptop:gap-6 tab-l:gap-4 tab-l:flex-col tab-s:flex-col tab-s:min-w-[21rem] tab-s:flex-1",children:[e.jsx("span",{className:"bg-[#FEF7E7] inline-block h-24 w-24 rounded-full laptop:h-20 laptop:w-20 tab-l:h-[4.5rem] tab-l:w-[4.5rem] tab-s:h-16 tab-s:w-16",children:e.jsx(Ze,{className:"inline-block p-6 h-full w-full fill-[#F2B413] laptop:p-5 tab-l:p-4"})}),e.jsxs("div",{className:"flex flex-col gap-4 grow laptop:gap-3 tab-l:self-stretch tab-l:items-center tab-s:gap-2 tab-s:items-center",children:[e.jsx("p",{className:"card-label",children:"Total In Progress Orders"}),e.jsx("p",{className:"card-price",children:h})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-8 laptop:gap-6 tab-s:gap-5 mb-l:gap-4",children:[e.jsx("h3",{className:"booking-title",children:"Your Booking List"}),e.jsxs("div",{className:"main-orders-container",children:[e.jsx("div",{className:"orders-table-container",children:e.jsxs("table",{className:"orders-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>Y("order_id"),children:[e.jsx("span",{children:"order id"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(G,{className:`updown-icon ${x==="desc"&&w==="order_id"?"!fill-[#676788]":""}`}),e.jsx(q,{className:`updown-icon ${x==="asc"&&w==="order_id"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>Y("created_at"),children:[e.jsx("span",{children:"booking date"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(G,{className:`updown-icon ${x==="desc"&&w==="created_at"?"!fill-[#676788]":""}`}),e.jsx(q,{className:`updown-icon ${x==="asc"&&w==="created_at"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>Y("estimated_delivery_time"),children:[e.jsx("span",{children:"delivery date"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(G,{className:`updown-icon ${x==="desc"&&w==="estimated_delivery_time"?"!fill-[#676788]":""}`}),e.jsx(q,{className:`updown-icon ${x==="asc"&&w==="estimated_delivery_time"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>Y("total"),children:[e.jsx("span",{children:"amount"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(G,{className:`updown-icon ${x==="desc"&&w==="total"?"!fill-[#676788]":""}`}),e.jsx(q,{className:`updown-icon ${x==="asc"&&w==="total"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>Y("kasar_amount"),children:[e.jsx("span",{children:"kasar"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(G,{className:`updown-icon ${x==="desc"&&w==="kasar_amount"?"!fill-[#676788]":""}`}),e.jsx(q,{className:`updown-icon ${x==="asc"&&w==="kasar_amount"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>Y("paid_amount"),children:[e.jsx("span",{children:"paid"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(G,{className:`updown-icon ${x==="desc"&&w==="paid_amount"?"!fill-[#676788]":""}`}),e.jsx(q,{className:`updown-icon ${x==="asc"&&w==="paid_amount"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>Y("order_status"),children:[e.jsx("span",{children:"status"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(G,{className:`updown-icon ${x==="desc"&&w==="order_status"?"!fill-[#676788]":""}`}),e.jsx(q,{className:`updown-icon ${x==="asc"&&w==="order_status"?"!fill-[#676788]":""}`})]})]}),e.jsx("th",{className:"",children:"actions"})]})}),e.jsx("tbody",{children:N>0?s.map((u,o)=>{const{order_id:M,total:Z,created_at:W,estimated_delivery_time:pe,kasar_amount:Q,paid_amount:me,order_status:O,order_status_name:ee,feedback:se}=u;return e.jsxs("tr",{onClick:()=>I("/dashboard/view-order",{state:{order_id:M}}),className:"cursor-pointer",children:[e.jsx("td",{children:M}),e.jsx("td",{children:H(W).format("DD/MM/YYYY, hh:mm A")}),e.jsx("td",{children:H(pe).format("DD/MM/YYYY")}),e.jsxs("td",{children:["₹",Z]}),e.jsxs("td",{children:["₹",Q]}),e.jsx("td",{children:"₹"+me||"0"}),e.jsx("td",{style:{padding:"5px",textAlign:"left"},className:"flex items-center justify-center",children:e.jsx("span",{className:`inline-block px-4 py-1 rounded-lg font-medium text-[1rem] leading-[2.4rem] order-status-label-${O>=4&&O<9?0:O}`,children:ee})}),e.jsxs("td",{className:"flex justify-start items-center gap-5 !p-[0.5rem]",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"icon-button",onClick:U=>{U.stopPropagation(),I("/dashboard/view-order",{state:{order_id:M}})},children:e.jsx(We,{className:"h-7 w-7 fill-primary tab-s:h-6 tab-s:w-6"})}),e.jsxs("div",{role:"tooltip",className:"absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-primary text-white rounded-md shadow-sm px-3 py-2 text-sm text-nowrap tab:hidden",style:{top:"-25px",left:"50%",transform:"translateX(-50%)"},children:["View",e.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]})]}),O===11&&e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"icon-button",disabled:F,onClick:U=>{U.stopPropagation(),Me(M,O)},children:F&&V===M?e.jsx(rs,{children:e.jsx("span",{className:"inline-block h-8 w-8 rounded-full border-[3px] border-white border-r-indigo-600 animate-spin"})}):e.jsx(Qe,{className:"inline-block h-8 w-8 tab-s:h-7 tab-s:w-7 fill-[var(--primary)] cursor-pointer"})}),O===11&&e.jsxs("div",{role:"tooltip",className:"absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-[var(--primary)] text-white rounded-md shadow-sm px-3 py-2 text-sm text-nowrap tab:hidden",style:{top:"-25px",left:"50%",transform:"translateX(-50%)"},children:["Download",e.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]})]}),O===11&&e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"icon-button",onClick:U=>{U.stopPropagation(),Te(M,se)},children:se?e.jsx(he,{className:"inline-block h-8 w-8 cursor-pointer fill-[var(--primary)] tab-s:h-7 tab-s:w-7"}):e.jsx(xs,{className:"inline-block h-8 w-8 cursor-pointer fill-[var(--primary)] tab-s:h-7 tab-s:w-7"})}),e.jsxs("div",{role:"tooltip",className:"absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-[var(--primary)] text-white rounded-md shadow-sm px-3 py-2 text-sm text-nowrap tab:hidden",style:{top:"-25px",left:"50%",transform:"translateX(-50%)"},children:[se?"View Feedback":"Give Feedback",e.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]})]}),O===1||O===2?e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"icon-button",onClick:U=>{U.stopPropagation(),Le(M,O)},children:e.jsx(es,{className:"inline-block h-8 w-8 tab-s:h-6 tab-s:w-6 fill-[var(--primary)]"})}),e.jsxs("div",{role:"tooltip",className:"absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-white rounded-md shadow-sm px-3 py-2 text-sm text-nowrap tab:hidden bg-[var(--primary)]",style:{top:"-25px",left:"50%",transform:"translateX(-50%)"},children:["Cancel Order",e.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]})]}):""]})]},o)}):e.jsx("tr",{children:e.jsx("td",{className:"text-center col-span-full",children:"No record found!"})})})]})}),e.jsx("div",{className:"bg-white flex items-center justify-between px-8 max-w-full laptop:px-6 tab:px-4 tab:flex-wrap mb-l:flex-col mb-l:gap-4 mb-l:py-4",children:N>10&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"current-page-num",children:["Showing"," ",c===1&&"1"||(c-1)*10+1," ","to ",c===l?N:c*10," ","entries"]}),e.jsxs("div",{className:"flex items-center gap-4 mb-l:flex-wrap mb-l:justify-center",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>{c!==1&&(B(1),j(1))},children:e.jsx(ge,{className:`${c==1?"page-icon-light":"page-icon"}`})}),e.jsx("button",{className:"pagination-btn",onClick:()=>{c!==1&&(B(c-1),j(c-1))},children:e.jsx(fe,{className:`${c==1?"page-icon-light":"page-icon"}`})}),e.jsx("button",{className:`pagination-btn ${b===1&&"active-page"}`,onClick:()=>{c!==1&&(B(1),j(1))},children:e.jsx("span",{className:"page-num",children:"1"})}),l>1&&e.jsx("button",{className:`pagination-btn ${b===2&&"active-page"}`,onClick:()=>{c!==2&&(B(2),j(2))},children:e.jsx("span",{className:"page-num",children:"2"})}),l>2&&e.jsx("button",{className:`pagination-btn ${b===3&&"active-page"}`,onClick:()=>{c!==3&&(B(3),j(3))},children:e.jsx("span",{className:"page-num",children:"3"})}),l>3&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"pagination-btn border-transparent",children:e.jsx("span",{className:"page-num",children:"..."})}),e.jsx("button",{className:`pagination-btn ${b===l&&"active-page"}`,onClick:()=>{c!==l&&(B(l),j(l))},children:e.jsx("span",{className:"page-num",children:l})})]}),e.jsx("button",{className:"pagination-btn",children:e.jsx(be,{className:`${c==l?"page-icon-light":"page-icon"}`,onClick:()=>{c!==l&&(B(c+1),j(c+1))}})}),e.jsx("button",{className:"pagination-btn",children:e.jsx(je,{className:`${c==l?"page-icon-light":"page-icon"}`,onClick:()=>{c!==l&&(B(l),j(l))}})})]})]})})]})]})]}),De&&e.jsx(Se,{order_id:y,setModelIsOpen:ie,feedback:R,setRefetch:K}),Re&&e.jsx(Pe,{setCancelModelIsOpen:ce,order_id:y,setRefetch:K}),e.jsx(we,{sx:u=>({color:"#fff",zIndex:u.zIndex.drawer+1}),open:_,children:e.jsx(Ce,{color:"inherit"})}),Ae&&e.jsx(Fe,{setModleHandler:de,setRefetch:K})]})};export{Fs as default};
