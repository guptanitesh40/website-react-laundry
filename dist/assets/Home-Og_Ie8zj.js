import{r as s,_ as m,O as Re,P as C,a9 as Ae,j as e,aa as ie,a as ce,a3 as H,ab as de,ac as pe,ad as me,ae as ue,A as ze,af as Te,ag as Be,ah as Le,ai as Ee,aj as Me}from"./index-y6Aj55EJ.js";import{b as ee,a as Ye,c as M,d as Y}from"./index-CM4IsW0E.js";import{L as Ge}from"./Loading-39ZTzoVH.js";import{u as Ue}from"./useDownloadInvoice-5xsk97MS.js";import{u as he,a as xe,C as be,I as qe}from"./useVerifyPayement-9K-7fwMq.js";import{B as ge}from"./Backdrop-DfPJiUSr.js";import"./ButtonBase-BLMShEFv.js";const Xe=()=>{const i="http://35.154.167.170:3000",o=localStorage.getItem("token"),[a,c]=s.useState(!1);return{getOrders:async()=>{c(!0);try{const d=await fetch(`${i}/orders`,{method:"GET",headers:{Authorization:`Bearer ${o}`}}),r=await d.json();return d.ok?r==null?void 0:r.data:(m.error("Failed to retrieve your orders. Please try again later.",{className:"toast-error"}),!1)}catch{return m.error("Failed to fetch orders. Please check your connection and try again.",{className:"toast-error"}),!1}finally{c(!1)}},loading:a}},He=()=>{const i="http://35.154.167.170:3000",o=localStorage.getItem("token");return{getOrders02:async(c,x,d)=>{try{const r=!x&&!d?await fetch(`${i}/orders?per_page=10&page_number=${c}`,{method:"GET",headers:{Authorization:`Bearer ${o}`}}):await fetch(`${i}/orders?sort_by=${d}&order=${x.toUpperCase()}&per_page=10&page_number=${c}`,{method:"GET",headers:{Authorization:`Bearer ${o}`}}),u=await r.json();return r.ok?u.data:(m.error("Failed to fetch orders. Please check your connection and try again.",{className:"toast-error"}),!1)}catch{return m.error("Failed to retrieve your orders. Please try again later.",{className:"toast-error"}),!1}}}};function Je(i){return Re({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Star"},child:[{tag:"path",attr:{d:"M16.6,20.463a1.5,1.5,0,0,1-.7-.174l-3.666-1.927a.5.5,0,0,0-.464,0L8.1,20.289a1.5,1.5,0,0,1-2.177-1.581l.7-4.082a.5.5,0,0,0-.143-.442L3.516,11.293a1.5,1.5,0,0,1,.832-2.559l4.1-.6a.5.5,0,0,0,.376-.273l1.833-3.714a1.5,1.5,0,0,1,2.69,0l1.833,3.714a.5.5,0,0,0,.376.274l4.1.6a1.5,1.5,0,0,1,.832,2.559l-2.965,2.891a.5.5,0,0,0-.144.442l.7,4.082A1.5,1.5,0,0,1,16.6,20.463Zm-3.9-2.986L16.364,19.4a.5.5,0,0,0,.725-.527l-.7-4.082a1.5,1.5,0,0,1,.432-1.328l2.965-2.89a.5.5,0,0,0-.277-.853l-4.1-.6a1.5,1.5,0,0,1-1.13-.821L12.449,4.594a.516.516,0,0,0-.9,0L9.719,8.308a1.5,1.5,0,0,1-1.13.82l-4.1.6a.5.5,0,0,0-.277.853L7.18,13.468A1.5,1.5,0,0,1,7.611,14.8l-.7,4.082a.5.5,0,0,0,.726.527L11.3,17.477a1.5,1.5,0,0,1,1.4,0Z"},child:[]}]}]})(i)}const Ve=()=>{const[i,o]=s.useState(!1),a="http://35.154.167.170:3000",c=window.localStorage.getItem("token");return{sendFeedBack:async d=>{if(!d||typeof d!="object"){m.error("Please provide valid feedback data. Ensure all fields are filled correctly.",{className:"toast-error"});return}try{o(!0);const r=await fetch(`${a}/feedback`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify(d)}),u=await r.json();if(!r.ok){m.error((u==null?void 0:u.message)||"Oops! Something went wrong while sending your feedback. Please try again later.",{className:"toast-error"});return}return m.success("Thank you for your feedback!",{className:"toast-success"}),u}catch{m.error("Unable to send feedback at the moment. Please check your connection or try again later.",{className:"toast-error"});return}finally{o(!1)}},loading:i}},fe=({order_id:i,setModelIsOpen:o,feedback:a,setRefetch:c})=>{const{sendFeedBack:x,loading:d}=Ve(),[r,u]=s.useState({}),[f,h]=s.useState(0),[l,R]=s.useState(""),[n,G]=s.useState(!1);s.useEffect(()=>{if(a){const{comment:j,rating:y}=a;R(j),h(y),G(!0)}},[a,n]);const v=j=>{n||h(j)},U=async()=>{const j={};if(f===0&&(j.star="Please select at least one star."),l===""&&(j.message="Please enter your message."),l.trim().length>=512&&u("message cannot exceed 512 characters"),Object.keys(j).length>0){u(j);return}u({}),await x({rating:f,comment:l,order_id:i,is_publish:1})&&(o(!1),c(w=>!w))};return e.jsx("div",{className:"fixed inset-0 top-0 bg-black bg-opacity-75 flex justify-center items-center mb-l:p-6 mb:p-4",children:e.jsxs("div",{className:"border border-[#b9bccf4d] rounded-xl bg-white px-14 py-16 flex flex-col gap-10 w-[40rem] relative laptop:px-12 laptop:py-14 laptop:gap-8 tab-l:rounded-lg tab-l:px-10 tab-l:py-12 tab-l:w-[37.5rem] tab-s:gap-6 tab-s:w-[35rem] mb-l:gap-4",children:[e.jsx("button",{type:"button",title:"close",className:"absolute top-4 right-4 border border-gray-300 rounded-md p-1 inline-flex items-center justify-center text-gray-400 focus:outline-none focus:border-indigo-500 shadow-2xl laptop:right-3 laptop:top-3 tab-s:right-2 tab-s:top-2",onClick:()=>o(!1),children:e.jsx(ee,{className:"h-7 w-7 tab-s:h-6 tab-s:w-6"})}),e.jsxs("div",{className:"text-[2rem] capitalize text-[var(--black)] font-semibold laptop:text-[1.8rem] tab-s:text-[1.6rem]",children:["Order Id #",i]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-start items-center gap-4 tab-s:gap-3",children:Array(5).fill(0).map((j,y)=>e.jsx(ie,{onClick:()=>v(y+1),className:`inline-block h-[4.6rem] w-[4.6rem] cursor-pointer text-3xl laptop:h-[4.2rem] laptop:w-[4.2rem] tab-s:h-[3.8rem] tab-s:w-[3.8rem] ${y<f?"fill-[#FF2E17]":"fill-[#B9BCCF]"}`},y))}),r.star&&e.jsx("span",{className:"block mt-2 text-xl leading-1 text-secondary tab-s:text-lg",children:r.star})]}),e.jsxs("div",{className:"flex flex-col gap-6 laptop:gap-4",children:[e.jsx("label",{htmlFor:"message",className:"text-[1.4rem] leading-[2rem] text-[var(--black)]",children:"Write a Review"}),e.jsxs("div",{children:[e.jsx("textarea",{id:"message",rows:6,value:l,readOnly:n,onChange:j=>R(j.target.value),className:"w-full text-[1.4rem] leading-[2.25rem] text-[var(--black)] border border-indigo-200 focus:border-indigo-500 focus:outline-none rounded-lg p-3 tab-s:leading-[2.1rem] tab-s:p-2"}),r.message&&e.jsx("span",{className:"block mt-2 text-xl leading-1 text-secondary tab-s:text-lg",children:r.message})]})]}),e.jsxs("div",{className:"flex justify-start items-center gap-8 tab-s:gap-6",children:[e.jsx("button",{className:`text-white font-medium w-[8.5rem] h-[3.75rem] text-[1.4rem] leading-[1.25] rounded-lg capitalize flex justify-center items-center ${n?"bg-[#b9bccf] cursor-not-allowed":"bg-primary cursor-pointer"}`,onClick:U,disabled:!!n,children:d?e.jsx("span",{className:"inline-block h-8 w-8 border-2 border-white/25 border-r-white rounded-full animate-spin"}):e.jsx("span",{children:"submit"})}),e.jsx("button",{className:"text-[var(--black)] font-medium w-[8.5rem] h-[3.75rem] text-[1.4rem] leading-[1.25] rounded-lg capitalize flex justify-center items-center border border-gray-300",onClick:()=>o(!1),children:e.jsx("span",{children:"cancel"})})]})]})})};fe.propTypes={order_id:C.number.isRequired,setModelIsOpen:C.func.isRequired,setRefetch:C.func.isRequired,feedback:Ae.oneOfType([C.string,C.shape({comment:C.string,rating:C.number})])};const je=()=>{const[i,o]=s.useState(!1),a="http://35.154.167.170:3000",c=window.localStorage.getItem("token");return{clearDue:async(d,r,u)=>{try{return o(!0),(await fetch(`${a}/orders/customer/clear-due`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({pay_amount:d,payment_status:2,transaction_id:r,order_ids:u})})).ok?(m.success("Due cleared successfully!",{className:"toast-success"}),{status:!0}):(m.error("Failed to clear due. Please try again.",{className:"toast-error"}),{status:!1})}catch{return m.error("An unexpected error occurred.",{className:"toast-error"}),{status:!1}}finally{o(!1)}},loading:i}},Ke=()=>{const i="http://35.154.167.170:3000",o=window.localStorage.getItem("token"),[a,c]=s.useState(!1);return{cancelOrder:async(d,r)=>{try{c(!0);const u=await fetch(`${i}/orders/cancel-by-customer`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({order_id:d,text_note:r})}),f=await u.json();return u.ok?(m.success((f==null?void 0:f.message)||"Order canceled successfully!",{className:"toast-success"}),{status:!0}):(m.error("Failed to cancel the order. Please try again later.",{className:"toast-error"}),{status:!1})}catch{return m.error("Something went wrong while canceling the order. Try again later.",{className:"toast-error"}),{status:!1}}finally{c(!1)}},loading:a}},ye=({setCancelModelIsOpen:i,order_id:o,setRefetch:a})=>{const{cancelOrder:c,loading:x}=Ke(),[d,r]=s.useState(""),[u,f]=s.useState(""),h=async()=>{if(!d.trim()){f("Cancellation reason is required");return}if(d.trim().length>=512){f("Reason cannot exceed 512 characters");return}f("");const l=await c(o,d);l!=null&&l.status&&(i(!1),a(R=>!R))};return e.jsx("div",{className:"fixed inset-0 top-0 bg-black bg-opacity-75 flex justify-center items-center mb-l:p-6 mb:p-4",children:e.jsxs("div",{className:"border border-gray-300 rounded-xl bg-white px-14 py-16 flex flex-col gap-14 w-[40rem] relative laptop:px-12 laptop:py-14 laptop:w-[37.5rem] laptop:gap-12 tab-l:rounded-lg tab-l:px-10 tab-l:py-12 tab-l:w-[35rem] tab-l:gap-10 tab-s:gap-8",children:[e.jsx("button",{type:"button",title:"close",className:"absolute top-4 right-4 border border-gray-300 rounded-md p-1 inline-flex items-center justify-center text-gray-400 focus:outline-none focus:border-indigo-500 shadow-2xl laptop:right-3 laptop:top-3 tab-s:right-2 tab-s:top-2",onClick:()=>i(!1),children:e.jsx(ee,{className:"h-7 w-7 tab-s:h-6 tab-s:w-6"})}),e.jsxs("div",{className:"text-[2rem] capitalize text-[var(--black)] font-semibold laptop:text-[1.8rem] tab-s:text-[1.6rem]",children:["Cancel Order #",o]}),e.jsxs("div",{className:"flex flex-col gap-10 laptop:gap-8 tab-s:gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 tab-s:gap-3",children:[e.jsx("label",{htmlFor:"reason",className:"text-[1.6rem] text-[var(--black)] laptop:text-[1.4rem]",children:"Reason for Cancellation"}),e.jsxs("div",{children:[e.jsx("textarea",{id:"reason",rows:6,value:d,onKeyDown:l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),h())},onChange:l=>r(l.target.value),className:"w-full text-[1.4rem] leading-[2.25rem] text-[var(--black)] border border-indigo-200 focus:border-indigo-500 focus:outline-none rounded-lg p-3 tab-s:leading-[2.1rem] tab-s:p-2"}),u&&e.jsx("span",{className:"block text-xl leading-1 text-red-500 tab-s:text-lg",children:u})]})]}),e.jsxs("div",{className:"flex justify-start items-center gap-8 tab-s:gap-6",children:[e.jsx("button",{className:"bg-primary text-white font-medium w-[8.5rem] h-[3.75rem] text-[1.4rem] leading-[1.25] rounded-lg capitalize flex justify-center items-center",onClick:h,disabled:x,children:x?e.jsx("span",{className:"inline-block h-8 w-8 border-2 border-white/25 border-r-white rounded-full animate-spin"}):e.jsx("span",{children:"submit"})}),e.jsx("button",{className:"text-[var(--black)] font-medium w-[8.5rem] h-[3.75rem] text-[1.4rem] leading-[1.25] rounded-lg capitalize flex justify-center items-center border border-gray-300",onClick:()=>i(!1),children:e.jsx("span",{children:"cancel"})})]})]})]})})};ye.propTypes={setCancelModelIsOpen:C.func.isRequired,order_id:C.number.isRequired,setRefetch:C.func.isRequired};const Ze=i=>{const[o,a]=s.useState({}),[c,x]=s.useState(!0),d="http://35.154.167.170:3000",r=window.localStorage.getItem("token");return r||m.error("user is not authenticated",{className:"toast-error"}),s.useEffect(()=>{(async()=>{try{const f=await fetch(`${d}/orders/invoice-list?per_page=10&page_number=${i}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}}),h=await f.json();f.ok?a(h==null?void 0:h.data):m.error("Failed to fetch due orders, please try again!",{className:"toast-error"})}catch{m.error("Something went wrong! Please try again.",{className:"toast-error"})}finally{x(!1)}})()},[d,r,i]),{dueData:o,loading:c}},We=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 mt-2 laptop:mb-6 mb-l:my-4",children:[e.jsx("span",{className:"w-32 h-16 bg-gray-200 rounded-lg animate-pulse laptop:w-28 laptop:h-12 mb:w-20"}),e.jsxs("div",{className:"flex justify-center items-center gap-8 mb-l:gap-6",children:[e.jsx("span",{className:"w-36 h-10 bg-gray-200 rounded-lg animate-pulse mb:w-28"}),e.jsx("span",{className:"w-20 h-12 bg-gray-200 rounded-lg animate-pulse mb:"})]})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-auto",children:e.jsxs("table",{className:"pp-table",children:[e.jsx("thead",{className:"border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-40 min-w-40",children:e.jsx("div",{className:"bg-gray-200 h-10 rounded-lg animate-pulse laptop-s:h-[2.25rem]"})}),e.jsx("th",{className:"min-w-48",children:e.jsx("div",{className:"bg-gray-200 h-10 rounded-lg animate-pulse laptop-s:h-[2.25rem]"})}),e.jsx("th",{className:"min-w-[18rem]",children:e.jsx("div",{className:"bg-gray-200 h-10 rounded-lg animate-pulse laptop-s:h-[2.25rem]"})}),e.jsx("th",{className:"min-w-[15rem]",children:e.jsx("div",{className:"bg-gray-200 h-10 rounded-lg animate-pulse laptop-s:h-[2.25rem]"})}),e.jsx("th",{className:"min-w-40",children:e.jsx("div",{className:"bg-gray-200 h-10 rounded-lg animate-pulse laptop-s:h-[2.25rem]"})}),e.jsx("th",{className:"min-w-40",children:e.jsx("div",{className:"bg-gray-200 h-10 rounded-lg animate-pulse laptop-s:h-[2.25rem]"})})]})}),e.jsx("tbody",{children:Array.from({length:10}).map((i,o)=>e.jsx("tr",{children:Array.from({length:6}).map((a,c)=>e.jsx("td",{children:e.jsx("div",{className:"bg-gray-200 h-10 rounded-lg animate-pulse"})},c))},o))})]})})]}),Ne=({setModleHandler:i,setRefetch:o})=>{const[a,c]=s.useState(1),[x,d]=s.useState(1),{dueData:r,loading:u}=Ze(a),f=ce(g=>{var _;return(_=g==null?void 0:g.user)==null?void 0:_.user}),[h,l]=s.useState(0),[R,n]=s.useState({}),[G,v]=s.useState(!1),{getTransactionId:U}=he(),{verifyPayement:j}=xe(),{clearDue:y}=je(),b=async()=>{v(!0);const g=await U(h);if(g)try{const{first_name:_,last_name:P,mobile_number:z,email:B}=f,F=Object.values(R).flat(),D={key:void 0,aount:h*100,currency:"INR",description:"Due Payement",order_id:g,handler:async function(I){if(v(!0),(await j(I)).status)(await y(h,g,F)).status&&(v(!1),i(!1),o(J=>!J)),v(!1);else{v(!1);return}},prefill:{name:_+" "+P,email:B,contact:z},theme:{color:"#161F5F"}};new window.Razorpay(D).open()}catch{m.error("Failed to initiate online payement please try again letter!",{className:"toast-error"})}finally{v(!1)}else{m.error("Failed to generated transaction id !",{className:"toast-error"}),v(!1);return}},w=g=>{c(g),d(g)},N=(g,_)=>{const{order_id:P,remaining_amount:z}=_;n(B=>{const F={...B},D=F[a]||[];return g.target.checked?D.includes(P)||(F[a]=[...D,P],l(O=>O+z)):(F[a]=D.filter(O=>O!==P),l(O=>O-z)),F})},{count:S,result:q}=r,k=S<=10?1:Math.ceil(S/10);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 top-0 bg-black bg-opacity-75 grid place-items-center p-4 overflow-y-auto tab-s:flex tab-s:items-center tab-s:justify-center tab-s:min-h-screen",children:e.jsx("div",{className:"border border-[#b9bccf4d] rounded-xl px-14 py-16 w-full max-w-[1000px] relative laptop:px-12 laptop:py-14 tab-l:rounded-lg tab-l:px-10 tab-l:py-12  tab-s:gap-6  mb-l:gap-4 bg-white tab-s:max-w-full tab-s:w-full tab:px-8 mb-l:px-6 tab:pb-8 mb-l:pb-6 tab-s:my-auto",children:u?e.jsx(We,{}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",title:"close",className:"absolute top-4 right-4 border border-gray-300 rounded-md p-1 inline-flex items-center justify-center text-gray-400 focus:outline-none focus:border-indigo-500 shadow-2xl laptop:right-3 laptop:top-3 tab-s:right-2 tab-s:top-2",onClick:()=>i(!1),children:e.jsx(ee,{className:"h-8 w-8 laptop:h-7 laptop:w-7"})}),e.jsxs("div",{className:"flex justify-between items-center mb-8 mt-2 laptop:mb-6 mb-l:my-4",children:[e.jsx("h2",{className:"text-[2.25rem] leading-[1.75] capitalize text-[var(--black)] font-semibold laptop:text-[1.8rem] tab-s:text-[1.6rem]",children:"Orders"}),e.jsxs("div",{className:"flex justify-center items-center gap-8 laptop:gap-6",children:[e.jsxs("span",{className:"text-[1.4rem] font-medium text-[var(--secondary)]",children:["Amount: ₹",h]}),e.jsx("button",{onClick:b,disabled:h===0,className:`${h===0?"disabled-ppd-btn":""} ppd-btn`,children:"Pay"})]})]}),e.jsxs("div",{className:"border border-[#b9bccf4d] rounded-lg",children:[e.jsx("div",{className:`
                overflow-x-auto max-w-full`,children:e.jsxs("table",{className:"pp-table",children:[e.jsx("thead",{className:"border-b border-[#b9bccf4d]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-40 min-w-40",children:"check"}),e.jsx("th",{className:"min-w-48",children:"order id"}),e.jsx("th",{className:"min-w-[18rem]",children:"booking date"}),e.jsx("th",{className:"min-w-[15rem]",children:"delivery date"}),e.jsx("th",{className:"min-w-40",children:"Total"}),e.jsx("th",{className:"min-w-40",children:"Remaining"})]})}),e.jsx("tbody",{children:q.length>0?q.map((g,_)=>{var O;const{order_id:P,created_at:z,estimated_delivery_time:B,total:F,remaining_amount:D}=g;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",onChange:I=>N(I,g),checked:((O=R[a])==null?void 0:O.includes(P))||!1,className:"w-8 h-8 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-0 laptop-s:h-7 laptop-s:w-7"})}),e.jsx("td",{children:P}),e.jsx("td",{children:H(z).format("DD/MM/YYYY, hh:mm A")}),e.jsx("td",{children:H(B).format("DD/MM/YY, hh:mm A")}),e.jsxs("td",{children:["₹",F]}),e.jsxs("td",{children:["₹",D]})]},_)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"font-medium text-center",children:"No Due Order Found!"})})})]})}),S>10&&e.jsxs("div",{className:"bg-white flex items-center flex-wrap gap-4 justify-between px-5 max-w-full laptop:px-6  tab:px-4 tab:flex-wrap mb-l:flex-col mb-l:gap-4 border-t border-[#b9bccf4d] tab:py-3 data-[wrapped=true]:justify-center mb-l:p-3",children:[e.jsxs("p",{className:"cpn-tag",children:["Showing"," ",a===1&&"1"||(a-1)*10+1," ","to ",a===k?S:a*10," ","entries"]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-l:flex-wrap",children:[e.jsx("button",{className:"pg-btn",onClick:()=>{a!==1&&w(1)},children:e.jsx(de,{className:`${a==1?"pg-icon-light":"pg-icon"}`})}),e.jsx("button",{className:"pg-btn",onClick:()=>{a!==1&&w(a-1)},children:e.jsx(pe,{className:`${a==1?"page-icon-light":"page-icon"}`})}),e.jsx("button",{className:`pg-btn ${x===1?"active-pg":""}`,onClick:()=>{a!==1&&w(1)},children:e.jsx("span",{className:"pg-num",children:"1"})}),e.jsx("button",{className:`pg-btn ${x===2?"active-pg":""}`,onClick:()=>{a!==2&&w(2)},children:e.jsx("span",{className:"pg-num",children:"2"})}),S>20&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`pg-btn ${x===3?"active-pg":""}`,onClick:()=>{a!==3&&w(3)},children:e.jsx("span",{className:"pg-num",children:"3"})}),S>30&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`pg-btn ${x===4?"active-pg":""} ${S>40?"!hidden":"!block"}`,onClick:()=>{a!==4&&w(4)},children:e.jsx("span",{className:"pg-num",children:"4"})}),S>40&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`pg-btn ${S>40&&a>=4&&a<k?"active-pg":""}`,children:e.jsx("span",{className:"pg-num",children:"..."})}),e.jsx("button",{className:`pg-btn ${x===k?"active-pg":""}`,onClick:()=>{a!==k&&w(k)},children:e.jsx("span",{className:"pg-num",children:k})})]})]})]}),e.jsx("button",{className:"pg-btn",onClick:()=>{a!==k&&w(a+1)},children:e.jsx(me,{className:`${a===k?"pg-icon-light":"pg-icon"}`})}),e.jsx("button",{className:"pg-btn",onClick:()=>{a!==k&&w(k)},children:e.jsx(ue,{className:`${a===k?"pg-icon-light":"pg-icon"}`})})]})]})]})]})})}),e.jsx(ge,{sx:g=>({color:"#fff",zIndex:g.zIndex.drawer+1}),open:G,children:e.jsx(be,{color:"inherit"})})]})};Ne.propTypes={setModleHandler:C.func.isRequired,setRefetch:C.func.isRequired};const na=()=>{const{getOrders:i}=Xe(),{getOrders02:o}=He(),[a,c]=s.useState([]),[x,d]=s.useState(0),[r,u]=s.useState(0),[f,h]=s.useState(!0),[l,R]=s.useState(0),[n,G]=s.useState(1),[v,U]=s.useState(0),[j,y]=s.useState(1),[b,w]=s.useState(""),[N,S]=s.useState(""),[q,k]=s.useState(0),[g,_]=s.useState(""),[P,z]=s.useState({}),{downloadInvoice:B,loading:F}=Ue(),D=ze(),[O,I]=s.useState(!1),[ae,se]=s.useState([]),{getTransactionId:J}=he(),{verifyPayement:we}=xe(),{clearDue:ve}=je(),[ke,te]=s.useState(!1),[Ce,re]=s.useState(!1),Se=ce(p=>{var t;return(t=p==null?void 0:p.user)==null?void 0:t.user}),[_e,le]=s.useState(!1),[Fe,X]=s.useState(!1),T=async p=>{h(!0),G(p);const t=await o(p);t&&(c(t.result),h(!1))},L=async p=>{if(S(p),!b){w("desc");const t=await o(n,"asc",p);t&&c(t.result);return}if(b=="desc"){w("asc");const t=await o(n,b,p);t&&c(t.result)}else{w("desc");const t=await o(n,b,p);t&&c(t.result)}},Oe=async(p,t)=>{t===11&&(k(p),await B(p))},$e=(p,t)=>{te(!0),_(p),z(t)},Pe=async()=>{if(!r||r<=0){m("No due amount to clear.",{className:"toast-success"});return}I(!0);const p=await J(r);if(p)try{const{first_name:t,last_name:A,mobile_number:V}=Se,K={key:void 0,aount:r*100,currency:"INR",description:"Due Payement",order_id:p,handler:async function(Z){if(I(!0),(await we(Z)).status)(await ve(r,p,ae)).status&&X(W=>!W),I(!1);else{I(!1);return}},prefill:{name:t+" "+A,email:"user@gmail.com",contact:V},theme:{color:"#161F5F"}};new window.Razorpay(K).open()}catch{m.error("Failed to initiate online payement please try again letter!",{className:"toast-error"})}finally{I(!1)}else{m.error("Failed to generated transaction id !",{className:"toast-error"}),I(!1);return}},De=(p,t)=>{if(t===11){m("Order is delivered and cannot be canceled.");return}if(t===12||t===13){m("Order is cancelled alredy");return}_(p),re(!0)},Ie=()=>{le(!0)};return s.useEffect(()=>{(async()=>{h(!0),y(1);const t=await i();t&&(se(t.order_ids),u(t==null?void 0:t.total_pending_due_amount),d(t.inProgressCount),U(t.count),R(Math.ceil(t.count/10)),c(t.result),h(!1)),h(!1)})()},[Fe]),f?e.jsx(Ge,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-8 tab-l:gap-6 mb-l:gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-14 laptop-m:gap-10 laptop:gap-8 tab-l:gap-6 tab-s:gap-4 tab-s:flex-wrap tab-s:items-stretch",children:[e.jsxs("div",{className:"status-card flex gap-8 items-center laptop:gap-6 tab-l:gap-4 tab-l:flex-col tab-s:min-w-[21rem] tab-s:flex-1 tab-s:order-last mb-l:order-first",children:[e.jsx("span",{className:"bg-[#FFE0EB] inline-block h-24 w-24 rounded-full laptop:h-20 laptop:w-20 tab-l:h-[4.5rem] tab-l:w-[4.5rem] tab-s:h-16 tab-s:w-16",children:e.jsx(Te,{className:"inline-block p-5 h-full w-full fill-[#FF82AC] laptop:p-4 tab-l:p-3 tab-s:p-3"})}),e.jsxs("div",{className:"flex flex-col gap-4 grow laptop-s:gap-3 tab-l:self-stretch tab-l:items-center tab-s:gap-2 ",children:[e.jsx("p",{className:"card-label",children:"Total Pending Due Amount"}),e.jsxs("p",{className:"card-price",children:["₹",r||"0"]}),r&&r>0?e.jsxs("div",{className:"flex justify-start items-center flex-wrap gap-4",children:[e.jsx("button",{className:"paynow-btn",onClick:Pe,children:"Pay Full"}),e.jsx("button",{className:"paynow-btn",onClick:Ie,children:"Pay Partial"})]}):""]})]}),e.jsxs("div",{className:"status-card flex gap-8 items-center laptop:gap-6 tab-l:gap-4 tab-l:flex-col tab-s:min-w-[21rem] tab-s:flex-1",children:[e.jsx("span",{className:"bg-[#DCFAF8] inline-block h-24 w-24 rounded-full laptop:h-20 laptop:w-20 tab-l:h-[4.5rem] tab-l:w-[4.5rem] tab-s:h-16 tab-s:w-16",children:e.jsx(Ye,{className:"inline-block p-7 h-full w-full fill-[#16DBCC] laptop:p-5 tab-l:p-4"})}),e.jsxs("div",{className:"flex flex-col gap-4 grow laptop:gap-3 tab-l:self-stretch tab-l:items-center tab-s:gap-2 tab-s:items-center",children:[e.jsx("p",{className:"card-label",children:"Lifetime Total Order Number"}),e.jsx("p",{className:"card-price",children:v})]})]}),e.jsxs("div",{className:"status-card flex gap-8 items-center laptop:gap-6 tab-l:gap-4 tab-l:flex-col tab-s:flex-col tab-s:min-w-[21rem] tab-s:flex-1",children:[e.jsx("span",{className:"bg-[#FEF7E7] inline-block h-24 w-24 rounded-full laptop:h-20 laptop:w-20 tab-l:h-[4.5rem] tab-l:w-[4.5rem] tab-s:h-16 tab-s:w-16",children:e.jsx(Be,{className:"inline-block p-6 h-full w-full fill-[#F2B413] laptop:p-5 tab-l:p-4"})}),e.jsxs("div",{className:"flex flex-col gap-4 grow laptop:gap-3 tab-l:self-stretch tab-l:items-center tab-s:gap-2 tab-s:items-center",children:[e.jsx("p",{className:"card-label",children:"Total In Progress Orders"}),e.jsx("p",{className:"card-price",children:x})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-8 laptop:gap-6 tab-s:gap-5 mb-l:gap-4",children:[e.jsx("h3",{className:"booking-title",children:"Your Booking List"}),e.jsxs("div",{className:"main-orders-container",children:[e.jsx("div",{className:"orders-table-container",children:e.jsxs("table",{className:"orders-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>L("order_id"),children:[e.jsx("span",{children:"order id"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(M,{className:`updown-icon ${b==="desc"&&N==="order_id"?"!fill-[#676788]":""}`}),e.jsx(Y,{className:`updown-icon ${b==="asc"&&N==="order_id"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>L("created_at"),children:[e.jsx("span",{children:"booking date"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(M,{className:`updown-icon ${b==="desc"&&N==="created_at"?"!fill-[#676788]":""}`}),e.jsx(Y,{className:`updown-icon ${b==="asc"&&N==="created_at"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>L("estimated_delivery_time"),children:[e.jsx("span",{children:"delivery date"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(M,{className:`updown-icon ${b==="desc"&&N==="estimated_delivery_time"?"!fill-[#676788]":""}`}),e.jsx(Y,{className:`updown-icon ${b==="asc"&&N==="estimated_delivery_time"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>L("total"),children:[e.jsx("span",{children:"amount"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(M,{className:`updown-icon ${b==="desc"&&N==="total"?"!fill-[#676788]":""}`}),e.jsx(Y,{className:`updown-icon ${b==="asc"&&N==="total"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>L("kasar_amount"),children:[e.jsx("span",{children:"kasar"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(M,{className:`updown-icon ${b==="desc"&&N==="kasar_amount"?"!fill-[#676788]":""}`}),e.jsx(Y,{className:`updown-icon ${b==="asc"&&N==="kasar_amount"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>L("paid_amount"),children:[e.jsx("span",{children:"paid"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(M,{className:`updown-icon ${b==="desc"&&N==="paid_amount"?"!fill-[#676788]":""}`}),e.jsx(Y,{className:`updown-icon ${b==="asc"&&N==="paid_amount"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>L("order_status"),children:[e.jsx("span",{children:"status"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(M,{className:`updown-icon ${b==="desc"&&N==="order_status"?"!fill-[#676788]":""}`}),e.jsx(Y,{className:`updown-icon ${b==="asc"&&N==="order_status"?"!fill-[#676788]":""}`})]})]}),e.jsx("th",{className:"",children:"actions"})]})}),e.jsx("tbody",{children:v>0?a.map((p,t)=>{const{order_id:A,total:V,created_at:K,estimated_delivery_time:ne,kasar_amount:Z,paid_amount:oe,order_status:$,order_status_name:W,feedback:Q}=p;return e.jsxs("tr",{onClick:()=>D("/dashboard/view-order",{state:{order_id:A}}),className:"cursor-pointer",children:[e.jsx("td",{children:A}),e.jsx("td",{children:H(K).format("DD/MM/YYYY, hh:mm A")}),e.jsx("td",{children:H(ne).format("DD/MM/YYYY")}),e.jsxs("td",{children:["₹",V]}),e.jsxs("td",{children:["₹",Z]}),e.jsx("td",{children:"₹"+oe||"0"}),e.jsx("td",{style:{padding:"5px",textAlign:"left"},className:"flex items-center justify-center",children:e.jsx("span",{className:`inline-block px-4 py-1 rounded-lg font-medium text-[1rem] leading-[2.4rem] order-status-label-${$>=4&&$<9?0:$}`,children:W})}),e.jsxs("td",{className:"flex justify-start items-center gap-5 !p-[0.5rem]",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"icon-button",onClick:E=>{E.stopPropagation(),D("/dashboard/view-order",{state:{order_id:A}})},children:e.jsx(Le,{className:"h-7 w-7 fill-primary tab-s:h-6 tab-s:w-6"})}),e.jsxs("div",{role:"tooltip",className:"absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-primary text-white rounded-md shadow-sm px-3 py-2 text-sm text-nowrap tab:hidden",style:{top:"-25px",left:"50%",transform:"translateX(-50%)"},children:["View",e.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]})]}),$===11&&e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"icon-button",disabled:F,onClick:E=>{E.stopPropagation(),Oe(A,$)},children:F&&q===A?e.jsx(qe,{children:e.jsx("span",{className:"inline-block h-8 w-8 rounded-full border-[3px] border-white border-r-indigo-600 animate-spin"})}):e.jsx(Ee,{className:"inline-block h-8 w-8 tab-s:h-7 tab-s:w-7 fill-[var(--primary)] cursor-pointer"})}),$===11&&e.jsxs("div",{role:"tooltip",className:"absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-[var(--primary)] text-white rounded-md shadow-sm px-3 py-2 text-sm text-nowrap tab:hidden",style:{top:"-25px",left:"50%",transform:"translateX(-50%)"},children:["Download",e.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]})]}),$===11&&e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"icon-button",onClick:E=>{E.stopPropagation(),$e(A,Q)},children:Q?e.jsx(ie,{className:"inline-block h-8 w-8 cursor-pointer fill-[var(--primary)] tab-s:h-7 tab-s:w-7"}):e.jsx(Je,{className:"inline-block h-8 w-8 cursor-pointer fill-[var(--primary)] tab-s:h-7 tab-s:w-7"})}),e.jsxs("div",{role:"tooltip",className:"absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-[var(--primary)] text-white rounded-md shadow-sm px-3 py-2 text-sm text-nowrap tab:hidden",style:{top:"-25px",left:"50%",transform:"translateX(-50%)"},children:[Q?"View Feedback":"Give Feedback",e.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]})]}),$===1||$===2?e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"icon-button",onClick:E=>{E.stopPropagation(),De(A,$)},children:e.jsx(Me,{className:"inline-block h-8 w-8 tab-s:h-6 tab-s:w-6 fill-[var(--primary)]"})}),e.jsxs("div",{role:"tooltip",className:"absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-white rounded-md shadow-sm px-3 py-2 text-sm text-nowrap tab:hidden bg-[var(--primary)]",style:{top:"-25px",left:"50%",transform:"translateX(-50%)"},children:["Cancel Order",e.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]})]}):""]})]},t)}):e.jsx("tr",{children:e.jsx("td",{className:"text-center col-span-full",children:"No record found!"})})})]})}),e.jsx("div",{className:"bg-white flex items-center justify-between px-8 max-w-full laptop:px-6 tab:px-4 tab:flex-wrap mb-l:flex-col mb-l:gap-4 mb-l:py-4",children:v>10&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"current-page-num",children:["Showing"," ",n===1&&"1"||(n-1)*10+1," ","to ",n===l?v:n*10," ","entries"]}),e.jsxs("div",{className:"flex items-center gap-4 mb-l:flex-wrap mb-l:justify-center",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>{n!==1&&(T(1),y(1))},children:e.jsx(de,{className:`${n==1?"page-icon-light":"page-icon"}`})}),e.jsx("button",{className:"pagination-btn",onClick:()=>{n!==1&&(T(n-1),y(n-1))},children:e.jsx(pe,{className:`${n==1?"page-icon-light":"page-icon"}`})}),e.jsx("button",{className:`pagination-btn ${j===1&&"active-page"}`,onClick:()=>{n!==1&&(T(1),y(1))},children:e.jsx("span",{className:"page-num",children:"1"})}),l>1&&e.jsx("button",{className:`pagination-btn ${j===2&&"active-page"}`,onClick:()=>{n!==2&&(T(2),y(2))},children:e.jsx("span",{className:"page-num",children:"2"})}),l>2&&e.jsx("button",{className:`pagination-btn ${j===3&&"active-page"}`,onClick:()=>{n!==3&&(T(3),y(3))},children:e.jsx("span",{className:"page-num",children:"3"})}),l>3&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"pagination-btn border-transparent",children:e.jsx("span",{className:"page-num",children:"..."})}),e.jsx("button",{className:`pagination-btn ${j===l&&"active-page"}`,onClick:()=>{n!==l&&(T(l),y(l))},children:e.jsx("span",{className:"page-num",children:l})})]}),e.jsx("button",{className:"pagination-btn",children:e.jsx(me,{className:`${n==l?"page-icon-light":"page-icon"}`,onClick:()=>{n!==l&&(T(n+1),y(n+1))}})}),e.jsx("button",{className:"pagination-btn",children:e.jsx(ue,{className:`${n==l?"page-icon-light":"page-icon"}`,onClick:()=>{n!==l&&(T(l),y(l))}})})]})]})})]})]})]}),ke&&e.jsx(fe,{order_id:g,setModelIsOpen:te,feedback:P,setRefetch:X}),Ce&&e.jsx(ye,{setCancelModelIsOpen:re,order_id:g,setRefetch:X}),e.jsx(ge,{sx:p=>({color:"#fff",zIndex:p.zIndex.drawer+1}),open:O,children:e.jsx(be,{color:"inherit"})}),_e&&e.jsx(Ne,{setModleHandler:le,setRefetch:X})]})};export{na as default};
