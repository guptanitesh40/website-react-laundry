import{n as Me,m as Le,p as W,o as L,q as le,r as s,t as Be,j as e,v as Ee,w as Ye,_ as g,W as Ue,P as C,ab as Ge,ac as oe,f as ie,a6 as B,a as qe,ad as Ve,ae as Ke,af as Xe,ag as He,ah as Je,ai as We,aj as Ze,ak as Qe,al as et}from"./index-Y8YvbsgY.js";import{b as Z,a as tt,c as z,d as A}from"./index-CFuw2S1p.js";import{L as at}from"./Loading-BGMlFZZM.js";import{u as st}from"./useDownloadInvoice-DzrCo8fX.js";import{u as ce,a as de,I as rt}from"./useVerifyPayement-B3wQsAyR.js";import{B as pe}from"./Backdrop-BYSgBZh5.js";import{c as nt}from"./createSimplePaletteValueFilter-bm0fmN_7.js";import{k as me,d as ue}from"./ButtonBase-DULlCnuJ.js";import"./useSlot-iXA9LUDZ.js";function lt(a){return Me("MuiCircularProgress",a)}Le("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const O=44,H=me`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,J=me`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`,ot=typeof H!="string"?ue`
        animation: ${H} 1.4s linear infinite;
      `:null,it=typeof J!="string"?ue`
        animation: ${J} 1.4s ease-in-out infinite;
      `:null,ct=a=>{const{classes:t,variant:d,color:p,disableShrink:h}=a,i={root:["root",d,`color${L(p)}`],svg:["svg"],circle:["circle",`circle${L(d)}`,h&&"circleDisableShrink"]};return Ye(i,lt,t)},dt=W("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(a,t)=>{const{ownerState:d}=a;return[t.root,t[d.variant],t[`color${L(d.color)}`]]}})(le(({theme:a})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:a.transitions.create("transform")}},{props:{variant:"indeterminate"},style:ot||{animation:`${H} 1.4s linear infinite`}},...Object.entries(a.palette).filter(nt()).map(([t])=>({props:{color:t},style:{color:(a.vars||a).palette[t].main}}))]}))),pt=W("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(a,t)=>t.svg})({display:"block"}),mt=W("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(a,t)=>{const{ownerState:d}=a;return[t.circle,t[`circle${L(d.variant)}`],d.disableShrink&&t.circleDisableShrink]}})(le(({theme:a})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:a.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:it||{animation:`${J} 1.4s ease-in-out infinite`}}]}))),xe=s.forwardRef(function(t,d){const p=Be({props:t,name:"MuiCircularProgress"}),{className:h,color:i="primary",disableShrink:l=!1,size:u=40,style:j,thickness:b=3.6,value:r=0,variant:k="indeterminate",...c}=p,S={...p,color:i,disableShrink:l,size:u,thickness:b,value:r,variant:k},N=ct(S),P={},o={},x={};if(k==="determinate"){const m=2*Math.PI*((O-b)/2);P.strokeDasharray=m.toFixed(3),x["aria-valuenow"]=Math.round(r),P.strokeDashoffset=`${((100-r)/100*m).toFixed(3)}px`,o.transform="rotate(-90deg)"}return e.jsx(dt,{className:Ee(N.root,h),style:{width:u,height:u,...o,...j},ownerState:S,ref:d,role:"progressbar",...x,...c,children:e.jsx(pt,{className:N.svg,ownerState:S,viewBox:`${O/2} ${O/2} ${O} ${O}`,children:e.jsx(mt,{className:N.circle,style:P,ownerState:S,cx:O,cy:O,r:(O-b)/2,fill:"none",strokeWidth:b})})})}),ut=()=>{const a="http://3.110.208.70:3000",t=localStorage.getItem("token"),[d,p]=s.useState(!1);return{getOrders:async()=>{p(!0);try{const i=await fetch(`${a}/orders`,{method:"GET",headers:{Authorization:`Bearer ${t}`}}),l=await i.json();return i.ok?l==null?void 0:l.data:(g.error("Failed to retrieve your orders. Please try again later.",{className:"toast-error"}),!1)}catch{return g.error("Failed to fetch orders. Please check your connection and try again.",{className:"toast-error"}),!1}finally{p(!1)}},loading:d}},xt=()=>{const a="http://3.110.208.70:3000",t=localStorage.getItem("token");return{getOrders02:async(p,h,i)=>{try{const l=!h&&!i?await fetch(`${a}/orders?per_page=10&page_number=${p}`,{method:"GET",headers:{Authorization:`Bearer ${t}`}}):await fetch(`${a}/orders?sort_by=${i}&order=${h.toUpperCase()}&per_page=10&page_number=${p}`,{method:"GET",headers:{Authorization:`Bearer ${t}`}}),u=await l.json();return l.ok?u.data:(g.error("Failed to fetch orders. Please check your connection and try again.",{className:"toast-error"}),!1)}catch{return g.error("Failed to retrieve your orders. Please try again later.",{className:"toast-error"}),!1}}}};function ht(a){return Ue({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Star"},child:[{tag:"path",attr:{d:"M16.6,20.463a1.5,1.5,0,0,1-.7-.174l-3.666-1.927a.5.5,0,0,0-.464,0L8.1,20.289a1.5,1.5,0,0,1-2.177-1.581l.7-4.082a.5.5,0,0,0-.143-.442L3.516,11.293a1.5,1.5,0,0,1,.832-2.559l4.1-.6a.5.5,0,0,0,.376-.273l1.833-3.714a1.5,1.5,0,0,1,2.69,0l1.833,3.714a.5.5,0,0,0,.376.274l4.1.6a1.5,1.5,0,0,1,.832,2.559l-2.965,2.891a.5.5,0,0,0-.144.442l.7,4.082A1.5,1.5,0,0,1,16.6,20.463Zm-3.9-2.986L16.364,19.4a.5.5,0,0,0,.725-.527l-.7-4.082a1.5,1.5,0,0,1,.432-1.328l2.965-2.89a.5.5,0,0,0-.277-.853l-4.1-.6a1.5,1.5,0,0,1-1.13-.821L12.449,4.594a.516.516,0,0,0-.9,0L9.719,8.308a1.5,1.5,0,0,1-1.13.82l-4.1.6a.5.5,0,0,0-.277.853L7.18,13.468A1.5,1.5,0,0,1,7.611,14.8l-.7,4.082a.5.5,0,0,0,.726.527L11.3,17.477a1.5,1.5,0,0,1,1.4,0Z"},child:[]}]}]})(a)}const ft=()=>{const[a,t]=s.useState(!1),d="http://3.110.208.70:3000",p=window.localStorage.getItem("token");return{sendFeedBack:async i=>{if(!i||typeof i!="object"){g.error("Please provide valid feedback data. Ensure all fields are filled correctly.",{className:"toast-error"});return}try{t(!0);const l=await fetch(`${d}/feedback`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify(i)}),u=await l.json();if(!l.ok){g.error((u==null?void 0:u.message)||"Oops! Something went wrong while sending your feedback. Please try again later.",{className:"toast-error"});return}return g.success("Thank you for your feedback!",{className:"toast-success"}),u}catch{g.error("Unable to send feedback at the moment. Please check your connection or try again later.",{className:"toast-error"});return}finally{t(!1)}},loading:a}},he=({order_id:a,setModelIsOpen:t,feedback:d,setRefetch:p})=>{const{sendFeedBack:h,loading:i}=ft(),[l,u]=s.useState({}),[j,b]=s.useState(0),[r,k]=s.useState(""),[c,S]=s.useState(!1);s.useEffect(()=>{if(d){const{comment:o,rating:x}=d;k(o),b(x),S(!0)}},[d,c]);const N=o=>{c||b(o)},P=async()=>{const o={};if(j===0&&(o.star="Please select at least one star."),r===""&&(o.message="Please enter your message."),r.trim().length>=512&&u("message cannot exceed 512 characters"),Object.keys(o).length>0){u(o);return}u({}),await h({rating:j,comment:r,order_id:a,is_publish:1})&&(t(!1),p(v=>!v))};return e.jsx("div",{className:"fixed inset-0 top-0 bg-black bg-opacity-75 flex justify-center items-center mb-l:p-6 mb:p-4",children:e.jsxs("div",{className:"border border-[#b9bccf4d] rounded-xl bg-white px-14 py-16 flex flex-col gap-10 w-[40rem] relative laptop:px-12 laptop:py-14 laptop:gap-8 tab-l:rounded-lg tab-l:px-10 tab-l:py-12 tab-l:w-[37.5rem] tab-s:gap-6 tab-s:w-[35rem] mb-l:gap-4",children:[e.jsx("button",{type:"button",title:"close",className:"absolute top-4 right-4 border border-gray-300 rounded-md p-1 inline-flex items-center justify-center text-gray-400 focus:outline-none focus:border-indigo-500 shadow-2xl laptop:right-3 laptop:top-3 tab-s:right-2 tab-s:top-2",onClick:()=>t(!1),children:e.jsx(Z,{className:"h-7 w-7 tab-s:h-6 tab-s:w-6"})}),e.jsxs("div",{className:"text-[2rem] capitalize text-[var(--black)] font-semibold laptop:text-[1.8rem] tab-s:text-[1.6rem]",children:["Order Id #",a]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-start items-center gap-4 tab-s:gap-3",children:Array(5).fill(0).map((o,x)=>e.jsx(oe,{onClick:()=>N(x+1),className:`inline-block h-[4.6rem] w-[4.6rem] cursor-pointer text-3xl laptop:h-[4.2rem] laptop:w-[4.2rem] tab-s:h-[3.8rem] tab-s:w-[3.8rem] ${x<j?"fill-[#FF2E17]":"fill-[#B9BCCF]"}`},x))}),l.star&&e.jsx("span",{className:"block mt-2 text-xl leading-1 text-secondary tab-s:text-lg",children:l.star})]}),e.jsxs("div",{className:"flex flex-col gap-6 laptop:gap-4",children:[e.jsx("label",{htmlFor:"message",className:"text-[1.4rem] leading-[2rem] text-[var(--black)]",children:"Write a Review"}),e.jsxs("div",{children:[e.jsx("textarea",{id:"message",rows:6,value:r,readOnly:c,onChange:o=>k(o.target.value),className:"w-full text-[1.4rem] leading-[2.25rem] text-[var(--black)] border border-indigo-200 focus:border-indigo-500 focus:outline-none rounded-lg p-3 tab-s:leading-[2.1rem] tab-s:p-2"}),l.message&&e.jsx("span",{className:"block mt-2 text-xl leading-1 text-secondary tab-s:text-lg",children:l.message})]})]}),e.jsxs("div",{className:"flex justify-start items-center gap-8 tab-s:gap-6",children:[e.jsx("button",{className:`text-white font-medium w-[8.5rem] h-[3.75rem] text-[1.4rem] leading-[1.25] rounded-lg capitalize flex justify-center items-center ${c?"bg-[#b9bccf] cursor-not-allowed":"bg-primary cursor-pointer"}`,onClick:P,disabled:!!c,children:i?e.jsx("span",{className:"inline-block h-8 w-8 border-2 border-white/25 border-r-white rounded-full animate-spin"}):e.jsx("span",{children:"submit"})}),e.jsx("button",{className:"text-[var(--black)] font-medium w-[8.5rem] h-[3.75rem] text-[1.4rem] leading-[1.25] rounded-lg capitalize flex justify-center items-center border border-gray-300",onClick:()=>t(!1),children:e.jsx("span",{children:"cancel"})})]})]})})};he.propTypes={order_id:C.number.isRequired,setModelIsOpen:C.func.isRequired,setRefetch:C.func.isRequired,feedback:Ge.oneOfType([C.string,C.shape({comment:C.string,rating:C.number})])};const fe=()=>{const[a,t]=s.useState(!1),d="http://3.110.208.70:3000",p=window.localStorage.getItem("token");return{clearDue:async(i,l,u)=>{try{return t(!0),(await fetch(`${d}/orders/customer/clear-due`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({pay_amount:i,payment_status:2,transaction_id:l,order_ids:u})})).ok?(g.success("Due cleared successfully!",{className:"toast-success"}),{status:!0}):(g.error("Failed to clear due. Please try again.",{className:"toast-error"}),{status:!1})}catch{return g.error("An unexpected error occurred.",{className:"toast-error"}),{status:!1}}finally{t(!1)}},loading:a}},bt=()=>{const a="http://3.110.208.70:3000",t=window.localStorage.getItem("token"),[d,p]=s.useState(!1);return{cancelOrder:async(i,l)=>{try{p(!0);const u=await fetch(`${a}/orders/cancel-by-customer`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({order_id:i,text_note:l})}),j=await u.json();return u.ok?(g.success((j==null?void 0:j.message)||"Order canceled successfully!",{className:"toast-success"}),{status:!0}):(g.error("Failed to cancel the order. Please try again later.",{className:"toast-error"}),{status:!1})}catch{return g.error("Something went wrong while canceling the order. Try again later.",{className:"toast-error"}),{status:!1}}finally{p(!1)}},loading:d}},be=({setCancelModelIsOpen:a,order_id:t,setRefetch:d})=>{const{cancelOrder:p,loading:h}=bt(),[i,l]=s.useState(""),[u,j]=s.useState(""),b=async()=>{if(!i.trim()){j("Cancellation reason is required");return}if(i.trim().length>=512){j("Reason cannot exceed 512 characters");return}j("");const r=await p(t,i);r!=null&&r.status&&(a(!1),d(k=>!k))};return e.jsx("div",{className:"fixed inset-0 top-0 bg-black bg-opacity-75 flex justify-center items-center mb-l:p-6 mb:p-4",children:e.jsxs("div",{className:"border border-gray-300 rounded-xl bg-white px-14 py-16 flex flex-col gap-14 w-[40rem] relative laptop:px-12 laptop:py-14 laptop:w-[37.5rem] laptop:gap-12 tab-l:rounded-lg tab-l:px-10 tab-l:py-12 tab-l:w-[35rem] tab-l:gap-10 tab-s:gap-8",children:[e.jsx("button",{type:"button",title:"close",className:"absolute top-4 right-4 border border-gray-300 rounded-md p-1 inline-flex items-center justify-center text-gray-400 focus:outline-none focus:border-indigo-500 shadow-2xl laptop:right-3 laptop:top-3 tab-s:right-2 tab-s:top-2",onClick:()=>a(!1),children:e.jsx(Z,{className:"h-7 w-7 tab-s:h-6 tab-s:w-6"})}),e.jsxs("div",{className:"text-[2rem] capitalize text-[var(--black)] font-semibold laptop:text-[1.8rem] tab-s:text-[1.6rem]",children:["Cancel Order #",t]}),e.jsxs("div",{className:"flex flex-col gap-10 laptop:gap-8 tab-s:gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 tab-s:gap-3",children:[e.jsx("label",{htmlFor:"reason",className:"text-[1.6rem] text-[var(--black)] laptop:text-[1.4rem]",children:"Reason for Cancellation"}),e.jsxs("div",{children:[e.jsx("textarea",{id:"reason",rows:6,value:i,onKeyDown:r=>{r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),b())},onChange:r=>l(r.target.value),className:"w-full text-[1.4rem] leading-[2.25rem] text-[var(--black)] border border-indigo-200 focus:border-indigo-500 focus:outline-none rounded-lg p-3 tab-s:leading-[2.1rem] tab-s:p-2"}),u&&e.jsx("span",{className:"block text-xl leading-1 text-red-500 tab-s:text-lg",children:u})]})]}),e.jsxs("div",{className:"flex justify-start items-center gap-8 tab-s:gap-6",children:[e.jsx("button",{className:"bg-primary text-white font-medium w-[8.5rem] h-[3.75rem] text-[1.4rem] leading-[1.25] rounded-lg capitalize flex justify-center items-center",onClick:b,disabled:h,children:h?e.jsx("span",{className:"inline-block h-8 w-8 border-2 border-white/25 border-r-white rounded-full animate-spin"}):e.jsx("span",{children:"submit"})}),e.jsx("button",{className:"text-[var(--black)] font-medium w-[8.5rem] h-[3.75rem] text-[1.4rem] leading-[1.25] rounded-lg capitalize flex justify-center items-center border border-gray-300",onClick:()=>a(!1),children:e.jsx("span",{children:"cancel"})})]})]})]})})};be.propTypes={setCancelModelIsOpen:C.func.isRequired,order_id:C.number.isRequired,setRefetch:C.func.isRequired};const gt=()=>{const[a,t]=s.useState({}),[d,p]=s.useState(!0),h="http://3.110.208.70:3000",i=window.localStorage.getItem("token");return i||g.error("user is not authenticated",{className:"toast-error"}),s.useEffect(()=>{(async()=>{try{const u=await fetch(`${h}/orders/invoice-list`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}}),j=await u.json();u.ok?t(j==null?void 0:j.data):g.error("Failed to fetch due orders, please try again!",{className:"toast-error"})}catch{g.error("Something went wrong! Please try again.",{className:"toast-error"})}finally{p(!1)}})()},[h,i]),{dueData:a,loading:d}},ge=({setModleHandler:a})=>{const{dueData:t,loading:d}=gt(),p=ie(o=>{var x;return(x=o==null?void 0:o.user)==null?void 0:x.user}),[h,i]=s.useState(0),[l,u]=s.useState([]),[j,b]=s.useState(!1),{getTransactionId:r}=ce(),{verifyPayement:k}=de(),{clearDue:c}=fe(),S=async()=>{b(!0);const o=await r(h);if(o)try{const{first_name:x,last_name:m,mobile_number:v,email:y}=p,F={key:void 0,aount:h*100,currency:"INR",description:"Due Payement",order_id:o,handler:async function(M){if(b(!0),(await k(M)).status)(await c(h,o,l)).status&&(b(!1),a(!1)),b(!1);else{b(!1);return}},prefill:{name:x+" "+m,email:y,contact:v},theme:{color:"#161F5F"}};new window.Razorpay(F).open()}catch{g.error("Failed to initiate online payement please try again letter!",{className:"toast-error"})}finally{b(!1)}else{g.error("Failed to generated transaction id !",{className:"toast-error"}),b(!1);return}},N=(o,x)=>{const{order_id:m,remaining_amount:v}=x;u(y=>{const F=y||[];return o.target.checked?F.includes(m)?y:(i($=>$+v),[...F,m]):(i($=>$-v),F.filter($=>$!==m))})},{result:P}=t;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 top-0 bg-black bg-opacity-75 grid place-items-center",children:e.jsxs("div",{className:"border border-[#b9bccf4d] rounded-xl bg-white px-14 py-16 w-full max-w-[1000px] relative laptop:px-12 laptop:py-14 tab-l:rounded-lg tab-l:px-10 tab-l:py-12  tab-s:gap-6  mb-l:gap-4",children:[e.jsx("button",{type:"button",title:"close",className:"absolute top-4 right-4 border border-gray-300 rounded-md p-1 inline-flex items-center justify-center text-gray-400 focus:outline-none focus:border-indigo-500 shadow-2xl laptop:right-3 laptop:top-3 tab-s:right-2 tab-s:top-2",onClick:()=>a(!1),children:e.jsx(Z,{className:"h-8 w-8 tab-s:h-6 tab-s:w-6"})}),e.jsxs("div",{className:"flex justify-between items-center mb-8 mt-2",children:[e.jsx("h2",{className:"text-[2.25rem] leading-[1.75] capitalize text-[var(--black)] font-semibold laptop:text-[1.8rem] tab-s:text-[1.6rem]",children:"Orders"}),e.jsxs("div",{className:"flex justify-center items-center gap-8",children:[e.jsxs("span",{className:"text-[1.4rem] font-medium text-green-700",children:["Amount: ₹",h]}),e.jsx("button",{onClick:S,disabled:h===0,className:`${h===0?"disabled-ppd-btn":""} ppd-btn`,children:"Pay"})]})]}),d?e.jsx("h2",{children:"Loading..."}):e.jsx("div",{className:"border border-[#b9bccf4d] rounded-lg overflow-hidden",children:e.jsxs("table",{className:"pp-table",children:[e.jsx("thead",{className:"border-b border-[#b9bccf4d]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-40 min-w-40",children:"check"}),e.jsx("th",{className:"min-w-48",children:"order id"}),e.jsx("th",{className:"min-w-[18rem]",children:"booking date"}),e.jsx("th",{className:"min-w-[15rem]",children:"delivery date"}),e.jsx("th",{className:"min-w-40",children:"Total"}),e.jsx("th",{className:"min-w-40",children:"Remaining"})]})}),e.jsx("tbody",{children:P.length>0?P.map((o,x)=>{const{order_id:m,created_at:v,estimated_delivery_time:y,total:F,remaining_amount:$}=o;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",onChange:M=>N(M,o),className:"w-8 h-8 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-0"})}),e.jsx("td",{children:m}),e.jsx("td",{children:B(v).format("DD/MM/YYYY, hh:mm A")}),e.jsx("td",{children:B(y).format("DD/MM/YY, hh:mm A")}),e.jsxs("td",{children:["₹",F]}),e.jsxs("td",{children:["₹",$]})]},x)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"font-medium text-center",children:"No Due Order Found!"})})})]})})]})}),e.jsx(pe,{sx:o=>({color:"#fff",zIndex:o.zIndex.drawer+1}),open:j,children:e.jsx(xe,{color:"inherit"})})]})};ge.propTypes={setModleHandler:C.func.isRequired};const $t=()=>{const{getOrders:a}=ut(),{getOrders02:t}=xt(),[d,p]=s.useState([]),[h,i]=s.useState(0),[l,u]=s.useState(0),[j,b]=s.useState(!0),[r,k]=s.useState(0),[c,S]=s.useState(1),[N,P]=s.useState(0),[o,x]=s.useState(1),[m,v]=s.useState(""),[y,F]=s.useState(""),[$,M]=s.useState(0),[E,Y]=s.useState(""),[je,ye]=s.useState({}),{downloadInvoice:we,loading:Q}=st(),ee=qe(),[Ne,T]=s.useState(!1),[ve,ke]=s.useState([]),{getTransactionId:Ce}=ce(),{verifyPayement:Se}=de(),{clearDue:Pe}=fe(),[$e,te]=s.useState(!1),[Fe,ae]=s.useState(!1),_e=ie(f=>{var n;return(n=f==null?void 0:f.user)==null?void 0:n.user}),[De,se]=s.useState(!1),[Oe,U]=s.useState(!1),D=async f=>{b(!0),S(f);const n=await t(f);n&&(p(n.result),b(!1))},R=async f=>{if(F(f),!m){v("desc");const n=await t(c,"asc",f);n&&p(n.result);return}if(m=="desc"){v("asc");const n=await t(c,m,f);n&&p(n.result)}else{v("desc");const n=await t(c,m,f);n&&p(n.result)}},Re=async(f,n)=>{n===11&&(M(f),await we(f))},Ie=(f,n)=>{te(!0),Y(f),ye(n)},ze=async()=>{if(!l||l<=0){g("No due amount to clear.",{className:"toast-success"});return}T(!0);const f=await Ce(l);if(f)try{const{first_name:n,last_name:_,mobile_number:G}=_e,q={key:void 0,aount:l*100,currency:"INR",description:"Due Payement",order_id:f,handler:async function(V){if(T(!0),(await Se(V)).status)(await Pe(l,f,ve)).status&&U(K=>!K),T(!1);else{T(!1);return}},prefill:{name:n+" "+_,email:"user@gmail.com",contact:G},theme:{color:"#161F5F"}};new window.Razorpay(q).open()}catch{g.error("Failed to initiate online payement please try again letter!",{className:"toast-error"})}finally{T(!1)}else{g.error("Failed to generated transaction id !",{className:"toast-error"}),T(!1);return}},Ae=(f,n)=>{if(n===11){g("Order is delivered and cannot be canceled.");return}if(n===12||n===13){g("Order is cancelled alredy");return}Y(f),ae(!0)},Te=()=>{se(!0)};return s.useEffect(()=>{(async()=>{b(!0),x(1);const n=await a();n&&(ke(n.order_ids),u(n==null?void 0:n.total_pending_due_amount),i(n.inProgressCount),P(n.count),k(Math.ceil(n.count/10)),p(n.result),b(!1)),b(!1)})()},[Oe]),j?e.jsx(at,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-8 tab-l:gap-6 mb-l:gap-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-14 laptop-m:gap-10 laptop:gap-8 tab-l:gap-6 tab-s:gap-4 tab-s:flex-wrap tab-s:items-stretch",children:[e.jsxs("div",{className:"status-card flex gap-8 items-center laptop:gap-6 tab-l:gap-4 tab-l:flex-col tab-s:min-w-[21rem] tab-s:flex-1 tab-s:order-last mb-l:order-first",children:[e.jsx("span",{className:"bg-[#FFE0EB] inline-block h-24 w-24 rounded-full laptop:h-20 laptop:w-20 tab-l:h-[4.5rem] tab-l:w-[4.5rem] tab-s:h-16 tab-s:w-16",children:e.jsx(Ve,{className:"inline-block p-5 h-full w-full fill-[#FF82AC] laptop:p-4 tab-l:p-3 tab-s:p-3"})}),e.jsxs("div",{className:"flex flex-col gap-4 grow laptop-s:gap-3 tab-l:self-stretch tab-l:items-center tab-s:gap-2 ",children:[e.jsx("p",{className:"card-label",children:"Total Pending Due Amount"}),e.jsxs("p",{className:"card-price",children:["₹",l||"0"]}),l&&l>0?e.jsxs("div",{className:"flex flex-col justify-start items-center gap-4",children:[e.jsx("button",{className:"paynow-btn",onClick:ze,children:"Pay Now"}),e.jsx("button",{className:"paynow-btn hidden",onClick:Te,children:"Pay Partial"})]}):""]})]}),e.jsxs("div",{className:"status-card flex gap-8 items-center laptop:gap-6 tab-l:gap-4 tab-l:flex-col tab-s:min-w-[21rem] tab-s:flex-1",children:[e.jsx("span",{className:"bg-[#DCFAF8] inline-block h-24 w-24 rounded-full laptop:h-20 laptop:w-20 tab-l:h-[4.5rem] tab-l:w-[4.5rem] tab-s:h-16 tab-s:w-16",children:e.jsx(tt,{className:"inline-block p-7 h-full w-full fill-[#16DBCC] laptop:p-5 tab-l:p-4"})}),e.jsxs("div",{className:"flex flex-col gap-4 grow laptop:gap-3 tab-l:self-stretch tab-l:items-center tab-s:gap-2 tab-s:items-center",children:[e.jsx("p",{className:"card-label",children:"Lifetime Total Order Number"}),e.jsx("p",{className:"card-price",children:N})]})]}),e.jsxs("div",{className:"status-card flex gap-8 items-center laptop:gap-6 tab-l:gap-4 tab-l:flex-col tab-s:flex-col tab-s:min-w-[21rem] tab-s:flex-1",children:[e.jsx("span",{className:"bg-[#FEF7E7] inline-block h-24 w-24 rounded-full laptop:h-20 laptop:w-20 tab-l:h-[4.5rem] tab-l:w-[4.5rem] tab-s:h-16 tab-s:w-16",children:e.jsx(Ke,{className:"inline-block p-6 h-full w-full fill-[#F2B413] laptop:p-5 tab-l:p-4"})}),e.jsxs("div",{className:"flex flex-col gap-4 grow laptop:gap-3 tab-l:self-stretch tab-l:items-center tab-s:gap-2 tab-s:items-center",children:[e.jsx("p",{className:"card-label",children:"Total In Progress Orders"}),e.jsx("p",{className:"card-price",children:h})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-8 laptop:gap-6 tab-s:gap-5 mb-l:gap-4",children:[e.jsx("h3",{className:"booking-title",children:"Your Booking List"}),e.jsxs("div",{className:"main-orders-container",children:[e.jsx("div",{className:"orders-table-container",children:e.jsxs("table",{className:"orders-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>R("order_id"),children:[e.jsx("span",{children:"order id"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(z,{className:`updown-icon ${m==="desc"&&y==="order_id"?"!fill-[#676788]":""}`}),e.jsx(A,{className:`updown-icon ${m==="asc"&&y==="order_id"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>R("created_at"),children:[e.jsx("span",{children:"booking date"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(z,{className:`updown-icon ${m==="desc"&&y==="created_at"?"!fill-[#676788]":""}`}),e.jsx(A,{className:`updown-icon ${m==="asc"&&y==="created_at"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>R("estimated_delivery_time"),children:[e.jsx("span",{children:"delivery date"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(z,{className:`updown-icon ${m==="desc"&&y==="estimated_delivery_time"?"!fill-[#676788]":""}`}),e.jsx(A,{className:`updown-icon ${m==="asc"&&y==="estimated_delivery_time"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>R("total"),children:[e.jsx("span",{children:"amount"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(z,{className:`updown-icon ${m==="desc"&&y==="total"?"!fill-[#676788]":""}`}),e.jsx(A,{className:`updown-icon ${m==="asc"&&y==="total"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>R("kasar_amount"),children:[e.jsx("span",{children:"kasar"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(z,{className:`updown-icon ${m==="desc"&&y==="kasar_amount"?"!fill-[#676788]":""}`}),e.jsx(A,{className:`updown-icon ${m==="asc"&&y==="kasar_amount"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>R("paid_amount"),children:[e.jsx("span",{children:"paid"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(z,{className:`updown-icon ${m==="desc"&&y==="paid_amount"?"!fill-[#676788]":""}`}),e.jsx(A,{className:`updown-icon ${m==="asc"&&y==="paid_amount"?"!fill-[#676788]":""}`})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>R("order_status"),children:[e.jsx("span",{children:"status"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(z,{className:`updown-icon ${m==="desc"&&y==="order_status"?"!fill-[#676788]":""}`}),e.jsx(A,{className:`updown-icon ${m==="asc"&&y==="order_status"?"!fill-[#676788]":""}`})]})]}),e.jsx("th",{className:"col-span-4",children:"actions"})]})}),e.jsx("tbody",{children:N>0?d.map((f,n)=>{const{order_id:_,total:G,created_at:q,estimated_delivery_time:re,kasar_amount:V,paid_amount:ne,order_status:w,order_status_name:K,feedback:X}=f;return e.jsxs("tr",{onClick:()=>ee("/dashboard/view-order",{state:{order_id:_}}),className:"cursor-pointer",children:[e.jsx("td",{children:_}),e.jsx("td",{children:B(q).format("DD/MM/YYYY, hh:mm A")}),e.jsx("td",{children:B(re).format("DD/MM/YYYY")}),e.jsxs("td",{children:["₹",G]}),e.jsxs("td",{children:["₹",V]}),e.jsx("td",{children:"₹"+ne||"0"}),e.jsx("td",{style:{padding:"5px",textAlign:"left"},className:"flex items-center justify-center",children:e.jsx("span",{className:`inline-block px-4 py-1 rounded-lg font-medium text-[1rem] leading-[2.4rem] order-status-label-${w>=4&&w<9?0:w}`,children:K})}),e.jsx("td",{style:{padding:"5px"},className:"flex items-center justify-center",children:e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"icon-button",onClick:I=>{I.stopPropagation(),ee("/dashboard/view-order",{state:{order_id:_}})},children:e.jsx(Xe,{className:"h-7 w-7 fill-primary tab-s:h-6 tab-s:w-6"})}),e.jsxs("div",{role:"tooltip",className:"absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-primary text-white rounded-md shadow-sm px-3 py-2 text-sm text-nowrap tab:hidden",style:{top:"-25px",left:"50%",transform:"translateX(-50%)"},children:["View",e.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]})]})}),e.jsx("td",{style:{padding:"5px"},className:"flex items-center justify-center",children:e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"icon-button",disabled:Q,onClick:I=>{I.stopPropagation(),Re(_,w)},children:Q&&$===_?e.jsx(rt,{children:e.jsx("span",{className:"inline-block h-8 w-8 rounded-full border-[3px] border-indigo-100 border-t-indigo-600 border-r-indigo-600 animate-spin"})}):e.jsx(He,{className:`inline-block h-8 w-8 tab-s:h-7 tab-s:w-7 ${w===11?"fill-[var(--primary)] cursor-pointer":"fill-gray-500 cursor-not-allowed"}`})}),w===11&&e.jsxs("div",{role:"tooltip",className:"absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-[var(--primary)] text-white rounded-md shadow-sm px-3 py-2 text-sm text-nowrap tab:hidden",style:{top:"-25px",left:"50%",transform:"translateX(-50%)"},children:["Download",e.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]})]})}),e.jsx("td",{style:{padding:"5px"},className:"flex items-center justify-center tooltip-style",children:e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"icon-button",onClick:I=>{I.stopPropagation(),Ie(_,X)},children:X?e.jsx(oe,{className:"inline-block h-8 w-8 cursor-pointer fill-[var(--primary)] tab-s:h-7 tab-s:w-7"}):e.jsx(ht,{className:"inline-block h-8 w-8 cursor-pointer fill-[var(--primary)] tab-s:h-7 tab-s:w-7"})}),e.jsxs("div",{role:"tooltip",className:"absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-[var(--primary)] text-white rounded-md shadow-sm px-3 py-2 text-sm text-nowrap tab:hidden",style:{top:"-25px",left:"50%",transform:"translateX(-50%)"},children:[X?"View Feedback":"Give Feedback",e.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]})]})}),e.jsx("td",{style:{padding:"5px"},className:"flex items-center justify-center",children:e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"icon-button",onClick:I=>{I.stopPropagation(),Ae(_,w)},children:e.jsx(Je,{className:`inline-block h-8 w-8 tab-s:h-6 tab-s:w-6 ${w===12||w===13?"fill-[var(--secondary)]":"fill-[var(--primary)]"}`})}),e.jsxs("div",{role:"tooltip",className:`absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-white rounded-md shadow-sm px-3 py-2 text-sm text-nowrap tab:hidden ${w===12||w===13?"bg-[var(--secondary)]":"bg-[var(--primary)]"}`,style:{top:"-25px",left:"50%",transform:"translateX(-50%)"},children:[w===12||w===13?"Canceled order":"Cancel Order",e.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]})]})})]},n)}):e.jsx("tr",{children:e.jsx("td",{className:"text-center col-span-full",children:"No record found!"})})})]})}),e.jsx("div",{className:"bg-white flex items-center justify-between px-8 max-w-full laptop:px-6 tab:px-4 tab:flex-wrap mb-l:flex-col mb-l:gap-4 mb-l:py-4",children:N>10&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"current-page-num",children:["Showing"," ",c===1&&"1"||(c-1)*10+1," ","to ",c===r?N:c*10," ","entries"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>{c!==1&&(D(1),x(1))},children:e.jsx(We,{className:`${c==1?"page-icon-light":"page-icon"}`})}),e.jsx("button",{className:"pagination-btn",onClick:()=>{c!==1&&(D(c-1),x(c-1))},children:e.jsx(Ze,{className:`${c==1?"page-icon-light":"page-icon"}`})}),e.jsx("button",{className:`pagination-btn ${o===1&&"active-page"}`,onClick:()=>{c!==1&&(D(1),x(1))},children:e.jsx("span",{className:"page-num",children:"1"})}),r>1&&e.jsx("button",{className:`pagination-btn ${o===2&&"active-page"}`,onClick:()=>{c!==2&&(D(2),x(2))},children:e.jsx("span",{className:"page-num",children:"2"})}),r>2&&e.jsx("button",{className:`pagination-btn ${o===3&&"active-page"}`,onClick:()=>{c!==3&&(D(3),x(3))},children:e.jsx("span",{className:"page-num",children:"3"})}),r>3&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"pagination-btn border-transparent",children:e.jsx("span",{className:"page-num",children:"..."})}),e.jsx("button",{className:`pagination-btn ${o===r&&"active-page"}`,onClick:()=>{c!==r&&(D(r),x(r))},children:e.jsx("span",{className:"page-num",children:r})})]}),e.jsx("button",{className:"pagination-btn",children:e.jsx(Qe,{className:`${c==r?"page-icon-light":"page-icon"}`,onClick:()=>{c!==r&&(D(c+1),x(c+1))}})}),e.jsx("button",{className:"pagination-btn",children:e.jsx(et,{className:`${c==r?"page-icon-light":"page-icon"}`,onClick:()=>{c!==r&&(D(r),x(r))}})})]})]})})]})]})]}),$e&&e.jsx(he,{order_id:E,setModelIsOpen:te,feedback:je,setRefetch:U}),Fe&&e.jsx(be,{setCancelModelIsOpen:ae,order_id:E,setRefetch:U}),e.jsx(pe,{sx:f=>({color:"#fff",zIndex:f.zIndex.drawer+1}),open:Ne,children:e.jsx(xe,{color:"inherit"})}),De&&e.jsx(ge,{setModleHandler:se})]})};export{$t as default};
