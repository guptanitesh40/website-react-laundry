import{r as c,j as e,P as N,b as L,x as ye,y as be,p as J,q as Z,z as je,e as I,A as Ne,B as we,G as ve,C as Ce,_ as y,u as ke,m as K,D as Se,h as Pe,E as Ae,H as W,L as Ie,J as De}from"./index-DCi0TphP.js";import{u as Re,a as _e,H as Fe,b as Oe,B as Te}from"./useDeleteProduct-BRYh_AGN.js";import{u as $e,a as ze,A as qe}from"./useFetchAddress-mmGGlbe4.js";import{I as Me}from"./IconButton-JKv2SDKA.js";import{b as Ee,g as Ue,q as X,t as ee,e as V,c as q,m as te,f as Be,h as Le,i as Ve}from"./ButtonBase-BqM8Ptgh.js";import{c as He}from"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./useSlot-CtfRrQYG.js";import"./index.esm-C25zvujW.js";function Qe(a){return Ee("MuiCircularProgress",a)}Ue("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const D=44,U=X`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,B=X`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`,Ge=typeof U!="string"?ee`
        animation: ${U} 1.4s linear infinite;
      `:null,Je=typeof B!="string"?ee`
        animation: ${B} 1.4s ease-in-out infinite;
      `:null,Ze=a=>{const{classes:t,variant:s,color:n,disableShrink:h}=a,x={root:["root",s,`color${q(n)}`],svg:["svg"],circle:["circle",`circle${q(s)}`,h&&"circleDisableShrink"]};return Ve(x,Qe,t)},Ke=V("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(a,t)=>{const{ownerState:s}=a;return[t.root,t[s.variant],t[`color${q(s.color)}`]]}})(te(({theme:a})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:a.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Ge||{animation:`${U} 1.4s linear infinite`}},...Object.entries(a.palette).filter(He()).map(([t])=>({props:{color:t},style:{color:(a.vars||a).palette[t].main}}))]}))),We=V("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(a,t)=>t.svg})({display:"block"}),Ye=V("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(a,t)=>{const{ownerState:s}=a;return[t.circle,t[`circle${q(s.variant)}`],s.disableShrink&&t.circleDisableShrink]}})(te(({theme:a})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:a.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:Je||{animation:`${B} 1.4s ease-in-out infinite`}}]}))),Xe=c.forwardRef(function(t,s){const n=Be({props:t,name:"MuiCircularProgress"}),{className:h,color:x="primary",disableShrink:p=!1,size:i=40,style:l,thickness:u=3.6,value:v=0,variant:f="indeterminate",...w}=n,k={...n,color:x,disableShrink:p,size:i,thickness:u,value:v,variant:f},b=Ze(k),d={},g={},C={};if(f==="determinate"){const o=2*Math.PI*((D-u)/2);d.strokeDasharray=o.toFixed(3),C["aria-valuenow"]=Math.round(v),d.strokeDashoffset=`${((100-v)/100*o).toFixed(3)}px`,g.transform="rotate(-90deg)"}return e.jsx(Ke,{className:Le(b.root,h),style:{width:i,height:i,...g,...l},ownerState:k,ref:s,role:"progressbar",...C,...w,children:e.jsx(We,{className:b.svg,ownerState:k,viewBox:`${D/2} ${D/2} ${D} ${D}`,children:e.jsx(Ye,{className:b.circle,style:d,ownerState:k,cx:D,cy:D,r:(D-u)/2,fill:"none",strokeWidth:u})})})}),ae=({item:a})=>{const t=L(),{deleteProduct:s,loading:n}=Re(),{updateCart:h}=_e(),[x,p]=c.useState(!1),[i,l]=c.useState(!1),[u,v]=c.useState(a.quantity),[f,w]=c.useState(!1),[k,b]=c.useState(!1),[d,g]=c.useState(""),{product_image:C,cart_id:o,product_name:R,service_name:S,price:_,description:A}=a,F=async()=>{p(!0);let j=u+1;v(j),await h(o,{quantity:j})&&t(J({cart_id:o,quantity:j})),p(!1)},T=async()=>{if(p(!0),u>1){let j=u-1;v(j),await h(o,{quantity:j})&&t(J({cart_id:o,quantity:j}))}else await s(o)&&t(Z(o));p(!1)},O=async()=>{await s(o)&&t(Z(o))},$=async()=>{l(!0),await h(o,{description:d})&&(t(je({cart_id:o,itemDescription:d})),w(!1),b(!0)),l(!1)};return c.useEffect(()=>{a!=null&&a.description&&(g(a==null?void 0:a.description),b(!0))},[a==null?void 0:a.description]),e.jsxs("tr",{className:"relative",children:[e.jsxs("td",{className:"items-detail-cell space-y-1 tab-l:space-y-0",children:[e.jsx("h3",{children:R}),e.jsx("p",{children:S}),A&&!f?e.jsx("p",{children:A.length>20?A.slice(0,20)+"...":A}):""]}),e.jsx("td",{className:"text-center",children:e.jsx("img",{src:C,alt:"Product Image",className:"inline-block w-32 h-32 rounded-lg border laptop-l:h-28 laptop-l:w-28 laptop-md:h-24 laptop-md:w-24 laptop-m:rounded-md laptop:rounded tab-s:h-[5.5rem] tab-s:w-[5.5rem]"})}),e.jsxs("td",{className:"text-center",children:["₹",_]}),e.jsx("td",{children:e.jsx("span",{className:"flex justify-center items-center",children:e.jsx("button",{className:"inc-dec-btn overflow-hidden new-add-btn",children:x?e.jsx("span",{className:"h-[4.1rem] w-[9.1rem] flex justify-center items-center laptop-l:w-[8.4rem] laptop-l:h-[3.9rem] laptop-md:w-[6.9rem] laptop-md:h-[3.3rem] laptop-m:w-[6.8rem] laptop:h-[3.1rem] tab-l:-[7rem] tab-m:w-[6.1rem] tab-s:w-20 tab-s:h-10",children:e.jsx("span",{className:"inline-block h-10 w-10 rounded-full border-4 border-gray-200 border-t-[var(--secondary)] animate-spin tab-s:h-8 tab-s:w-8 tab-s:border-[3px]"})}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"py-[1.1rem] pl-[1.2rem] cursor-pointer laptop-l:py-[1rem] laptop-l:pl-[1.1rem] laptop-md:py-[0.85rem] laptop-md:pl-4 laptop:py-3 laptop:pl-3",onClick:()=>T(),children:e.jsx(Fe,{className:"indec-icon"})}),u,e.jsx("span",{className:"py-[1.1rem] pr-[1.2rem] cursor-pointer laptop-l:py-[1rem] laptop-l:pr-[1.2rem] laptop-md:py-[0.85rem] laptop-md:pr-4 laptop:py-3 laptop:pr-3",onClick:()=>F(),children:e.jsx(Oe,{className:"indec-icon"})})]})})})}),e.jsxs("td",{className:"text-center",children:["₹",_*u]}),e.jsxs("td",{className:"flex justify-around items-start laptop-l:justify-center laptop-l:gap-8 tab-l:gap-6",children:[e.jsx("span",{role:"button",onClick:()=>w(!f),className:"h-14 w-14 bg-[rgba(103,113,130,0.2)] rounded-full flex justify-center items-center cursor-pointer laptop-l:h-12 laptop-l:w-12",children:e.jsx(ye,{className:"inline-block h-8 w-8 fill-[var(--primary)] laptop-l:h-6 laptop-l:w-6"})}),e.jsx("span",{className:"h-14 w-14 bg-[rgba(103,113,130,0.2)] rounded-full flex justify-center items-center cursor-pointer laptop-l:h-12 laptop-l:w-12",onClick:()=>O(),children:n?e.jsxs("div",{role:"status",children:[e.jsxs("svg",{"aria-hidden":"true",className:"w-9 h-9 text-white animate-spin fill-blue-600 laptop-l:h-8 laptop-l:w-8",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),e.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),e.jsx("span",{className:"sr-only",children:"Loading..."})]}):e.jsx(be,{className:"inline-block h-8 w-8 fill-[var(--secondary)] laptop-l:h-6 laptop-l:w-6"})})]}),f&&e.jsx("td",{className:"description-cell col-span-full",children:e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:d,onChange:j=>g(j.target.value),rows:"2",placeholder:"Description"}),e.jsx("button",{"aria-label":"save-description",className:"save-description",onClick:$,disabled:i,children:i?"saving..":"save"})]})})]})};ae.propTypes={item:N.shape({product_image:N.string.isRequired,cart_id:N.number.isRequired,product_name:N.string.isRequired,service_name:N.string.isRequired,price:N.number.isRequired,quantity:N.number.isRequired,description:N.string}).isRequired};const et=()=>{const a=I(t=>t.cart.cartItems);return e.jsx("div",{className:"border border-[#b9bccf4d] rounded-2xl overflow-hidden laptop-l:rounded-xl laptop-md:rounded-lg tab-l:rounded-md",children:e.jsxs("table",{className:"cart-table",children:[e.jsx("thead",{className:"bg-[#f7f8fd]",children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"left"},children:"Items"}),e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Subtotal"}),e.jsx("th",{children:" "})]})}),e.jsx("tbody",{children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center",children:"No item found"})}):a.map(t=>e.jsx(ae,{item:t},t.cart_id))})]})})},Y=()=>e.jsxs("div",{className:"flex items-center gap-6 p-8 border border-[#e0e0e0] rounded-xl",children:[e.jsx("span",{className:"inline-block h-10 w-10 bg-gray-200 rounded-full shimmer-2"}),e.jsxs("div",{className:"grow flex flex-col gap-3 items-start rounded-sm relative",children:[e.jsx("span",{className:"inline-block w-20 h-12 rounded-md bg-gray-200 shimmer"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"inline-block w-40 h-10 bg-gray-200 rounded-md shimmer"}),e.jsx("span",{className:"inline-block w-40 h-10 bg-gray-200 rounded-md shimmer"})]}),e.jsx("div",{className:"w-1/2 h-10 bg-gray-200 rounded-md shimmer"})]})]}),se=({setSelectAddId:a})=>{const t=L(),[s,n]=c.useState(!1),[h,x]=c.useState(!1),[p,i]=c.useState(null),{loading:l}=$e(),{deleteAddress:u,loading:v}=ze(),f=I(d=>d.address.address);function w(){n(!0),i(null)}function k(d){i(d),x(!0),n(!0)}async function b(d){await u(d)&&t(we(d))}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-12 laptop-md:gap-10",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap",children:[e.jsx("h4",{className:"cart-sub-title",children:"Select Address"}),e.jsxs("button",{className:"address-btn flex items-center gap-4 laptop-l:gap-3 laptop-md:gap-2",onClick:w,children:[e.jsx(Ne,{className:"inline-block h-[1.6rem] w-[1.6rem] fill-[var(--secondary)] laptop-l:h-5 laptop-l:w-5 laptop-md:h-4 laptop-md:w-4 tab-m:h-5 tab-m:w-5"}),e.jsx("span",{children:"Add New Address"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-x-8 gap-y-10 justify-center laptop-md:gap-8 laptop:gap-6 tab-l:grid-cols-1 tab-l:gap-8 tab-m:grid-cols-2 tab-s:grid-cols-1",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Y,{}),e.jsx(Y,{})]}):f&&f.length>0?f.map(d=>{const{address_id:g,full_name:C,building_number:o,phone_number:R,landmark:S,area:_,city:A,state:F,pincode:T,address_type:O}=d,$={1:"Home",2:"Office",3:"Other"};return e.jsxs("label",{className:"flex items-center gap-8 p-8 border rounded-xl cursor-pointer relative laptop-l:p-7 laptop-md:rounded-lg laptop-md:p-6 laptop-md:gap-6 laptop:p-5 tab-l:p-6 tab-l:rounded-md",children:[e.jsx("input",{type:"radio",name:"address",className:"styled-radio",onChange:()=>{a(g)}}),e.jsxs("div",{className:"flex flex-col gap-3 items-start laptop-md:gap-2 tab-l:grow",children:[e.jsx("span",{className:"bg-[#f0f0f0] px-2 py-2.5 rounded-md uppercase text-[1.2rem] text-[#878787] font-semibold laptop-l:text-[1rem] laptop-md:p-2",children:$[O]}),e.jsxs("div",{className:"flex gap-4 text-[1.6rem] text-[var(--black)] font-semibold laptop-l:text-[1.4rem] laptop:text-[1.3rem] tab-m:text-[1.4rem]",children:[e.jsx("h4",{children:C}),e.jsx("h4",{children:R})]}),e.jsxs("span",{className:"text-[1.6rem] leading-[1.75] text-[var(--black)] font-normal laptop-l:text-[1.4rem] laptop:text-[1.3rem]",children:[`${o}, ${_}, ${S}, ${A}, ${F} - `,e.jsx("h4",{className:"inline-block text-[1.4rem] text-[var(--black)] font-semibold laptop:text-[1.2rem]",children:T})]})]}),e.jsxs("div",{className:"del-edit-menu",children:[e.jsxs("span",{className:"three-dots",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsxs("ul",{className:"shortcut",children:[e.jsx("li",{onClick:()=>k(d),children:"Edit"}),e.jsx("li",{onClick:()=>b(g),children:v?"Deleting..":"Delete"})]})]})]},g)}):e.jsx("span",{className:"self-center text-3xl text-[var(--black)] font-medium",children:"No address Found !"})})]}),s&&e.jsx(qe,{setIsOpen:n,isOpen:s,address:p,isEditMode:h})]})};se.propTypes={setSelectAddId:N.func.isRequired};const re=({instruction:a,setInstruction:t})=>e.jsxs("div",{className:"flex flex-col gap-8 laptop-md:gap-7",children:[e.jsx("label",{htmlFor:"addInstruction",className:"cart-sub-title cursor-pointer",children:"Add Instruction"}),e.jsx("textarea",{name:"add-instruction",id:"addInstruction",value:a,onChange:s=>t(s.target.value),className:"border border-[#B9BCCF4D] rounded-lg focus:outline-none focus:border-indigo-500 px-4 py-6 font-[var(--black)] text-[1.8rem] laptop-l:text-[1.6rem] laptop-l:px-3 laptop-l:py-5 laptop-md:text-[1.5rem] laptop-md:py-4 laptop-md:px-2 laptop:text-[1.4rem]",placeholder:"Write Message here ..."})]});re.propTypes={instruction:N.string,setInstruction:N.func.isRequired};function tt(a){return ve({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11 5.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5z"},child:[]},{tag:"path",attr:{d:"M2 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm13 2v5H1V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1m-1 9H2a1 1 0 0 1-1-1v-1h14v1a1 1 0 0 1-1 1"},child:[]}]})(a)}const le=({setPayementMethod:a})=>e.jsxs("form",{className:"flex flex-col gap-12 laptop-l:gap-10",children:[e.jsx("h4",{className:"cart-sub-title",children:"Select Payment Method"}),e.jsxs("label",{className:"border border-gray-400 cursor-pointer p-6 rounded-md flex justify-between items-center shadow w-[45rem] transition-all duration-300 laptop-md:p-4 laptop-md:w-[38rem] laptop-md:pr-6 laptop:w-[32.5rem]",children:[e.jsxs("div",{className:"flex items-center space-x-5 laptop-l:space-x-6 laptop-md:space-x-4 laptop:space-x-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(tt,{className:"inline-block h-12 w-12 fill-[var(black)] laptop-md:h-10 laptop-md:w-10"})}),e.jsx("h2",{className:"text-[2rem] leading-[1.75] capitalize laptop-l:text-[1.8rem] laptop-md:text-[1.6rem] laptop:text-[1.5rem]",children:"Cash On Delivery"})]}),e.jsx("input",{type:"radio",name:"payment",className:"styled-radio",onChange:()=>{a(1)}})]}),e.jsxs("label",{className:"border border-gray-400 cursor-pointer p-6 rounded-md flex justify-between items-center shadow w-[45rem]  transition-all duration-300 laptop-md:p-4 laptop-md:w-[38rem] laptop-md:pr-6 laptop:w-[32.5rem]",children:[e.jsxs("div",{className:"flex items-center space-x-5 laptop-l:space-x-6 laptop-md:space-x-4 laptop:space-x-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(Ce,{className:"inline-block h-12 w-12 fill-[var(black)] laptop-md:h-10 laptop-md:w-10"})}),e.jsx("h2",{className:"text-[2rem] leading-[1.75] capitalize laptop-l:text-[1.8rem] laptop-md:text-[1.6rem] laptop:text-[1.5rem]",children:"Online Payement"})]}),e.jsx("input",{type:"radio",name:"payment",className:"styled-radio",onChange:()=>{a(2)}})]})]});le.propTypes={setPayementMethod:N.func.isRequired};const at=()=>{const[a,t]=c.useState(!1),s="http://35.154.167.170:3000",n=localStorage.getItem("token"),h=I(p=>p.user.user.user_id);return{placeOrder:async(p,i,l,u,v,f,w,k,b="",d=0)=>{let g=1;f===2&&b&&(g=2);try{t(!0);const C=await fetch(`${s}/orders`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({items:p,description:l,coupon_code:u,sub_total:i,shipping_charges:v,payment_type:f,order_status:1,payment_status:g,address_id:w,user_id:h,express_delivery_charges:k,transaction_id:b,paid_amount:d})}),o=await C.json();return C.ok?(y.success("Order placed successfully!",{className:"toast-success"}),o.data):(y.error(o.message),!1)}catch{return y.error("Failed to place an order!",{className:"toast-error"}),!1}finally{t(!1)}},loading:a}},st=()=>{const[a,t]=c.useState(!1),s="http://35.154.167.170:3000",n=localStorage.getItem("token");return{applyCoupon:async(x,p)=>{try{t(!0);const i=await fetch(`${s}/coupon/apply`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({coupon_code:p,order_Total:x})}),l=await i.json();return i.ok?(y.success((l==null?void 0:l.message)||"Coupon applied successfully.",{className:"toast-success"}),l==null?void 0:l.data):(y.error(l.message||"Invalid coupon code. Please check the code and try again.",{className:"toast-error"}),null)}catch{return y.error("There was an issue applying the coupon. Please try again later.",{className:"toast-error"}),null}finally{t(!1)}},loading:a}},rt=()=>{const[a,t]=c.useState(!1),[s,n]=c.useState([]);return{getAllCoupon:async()=>{const x="http://35.154.167.170:3000",p=localStorage.getItem("token");try{t(!0);const i=await fetch(`${x}/customer/coupon`,{method:"GET",headers:{Authorization:`Bearer ${p}`}}),l=await i.json();i.ok?n(l==null?void 0:l.data):(y.error("Failed to fetch coupons. Please try again later.",{className:"toast-error"}),n([]))}catch{y.error("Network error. Please check your connection and try again.",{className:"toast-error"}),n([])}finally{t(!1)}},loading:a,coupons:s}},lt=()=>{const[a,t]=c.useState(!1),s="http://35.154.167.170:3000",n=localStorage.getItem("token");return{getTransactionId:async x=>{var p;if(!x){y.error("Amount is required to generate the transaction ID.",{className:"toast-error"});return}try{t(!0);const i=await fetch(`${s}/razorpay/create-order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({amount:x})}),l=await i.json();if(!i.ok){y.error("Failed to create order. Please try again.",{className:"toast-error"});return}return(p=l==null?void 0:l.data)==null?void 0:p.razorpay_order_id}catch{y.error("An error occurred while creating the order. Please check your connection.",{className:"toast-error"});return}finally{t(!1)}},loading:a}},ot=()=>{const[a,t]=c.useState(!1),s="http://35.154.167.170:3000",n=localStorage.getItem("token");return{verifyPayement:async x=>{try{return t(!0),(await fetch(`${s}/razorpay/verify`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(x)})).ok?{status:!0}:(y.success("Payment verification failed. Please try again later.",{className:"toast-error"}),{status:!1})}catch{return y.error("An error occurred while verifying the payment. Please check your connection.",{className:"toast-error"}),{status:!1}}finally{t(!1)}},loading:a}},oe=({instruction:a,paymentMethod:t,selectedAddId:s})=>{const n=L(),{getAllCoupon:h,loading:x,coupons:p}=rt(),[i,l]=c.useState(!1),u=I(r=>r.cart.subTotal),v=I(r=>r.cart.cartItems),f=parseInt(I(r=>{var m,P;return(P=(m=r==null?void 0:r.setting)==null?void 0:m.settings)==null?void 0:P.shipping_charge})),w=parseInt(I(r=>r.setting.settings.express_delivery_charge)),k=ke(),[b,d]=c.useState(""),[g,C]=c.useState(0),[o,R]=c.useState({code:"",status:""}),[S,_]=c.useState(!1),{applyCoupon:A,loading:F}=st(),{placeOrder:T,loading:O}=at(),{getTransactionId:$,loading:j}=lt(),{verifyPayement:M,loading:H}=ot(),ne=I(r=>{var m;return(m=r==null?void 0:r.user)==null?void 0:m.user}),[ie,Q]=c.useState(!1),ce=async r=>{if(r.preventDefault(),!b){y.error("Coupon code should  not empty!",{className:"toast-error"});return}const m=await A(u,b.toUpperCase());m&&(C(m==null?void 0:m.discountAmount),R({code:b.toUpperCase(),status:!0}))},pe=async()=>{if(!t&&!s){y.error("Please select Payment Method and Shipping Address",{className:"toast-error"});return}if(!t){y.error("Please select Payment Method",{className:"toast-error"});return}if(!s){y.error("Please select Shipping Address",{className:"toast-error"});return}if(t===1){let r=u-g,m=S?w:0;const P=await T(v,r,a,o.code,f,t,s,m);P&&(n(W()),k("/order",{state:{result:P,paymentMethod:t}}))}if(t===2){let r=Number(u)-Number(g)+Number(f)+(S&&w);const m=await $(r);if(m){const{first_name:P,last_name:E,mobile_number:z}=ne;try{const xe={key:void 0,amount:r*100,currency:"INR",name:"sikka cleaners",description:"Order Payment",order_id:m,handler:async function(he){if(!(await M(he)).status)return;let fe=u-g,ge=S?w:0;const G=await T(v,fe,a,o.code,f,t,s,ge,m,r);G&&(n(W()),k("/order",{state:{result:G,paymentMethod:t}}))},prefill:{name:P+" "+E,email:"user@gmail.com",contact:z},theme:{color:"#161F5F"}};new window.Razorpay(xe).open()}catch{y.error("Failed to initiate online payement please try again letter!",{className:"toast-error"})}}else return}},de=()=>{R({code:"",status:!1}),d(""),C(0)},me=async()=>{l(!i),i||await h()},ue=async r=>{const m=await A(u,r.toUpperCase());m&&(C(m==null?void 0:m.discountAmount),R({code:r.toUpperCase(),status:!0}),d(r.toUpperCase()),l(!1))};return c.useEffect(()=>{Q(!!(j||H||O||F))},[j,H,O,F]),e.jsxs(e.Fragment,{children:[i?e.jsxs("div",{className:"all-coupon-container space-y-10 laptop-l:space-y-8 laptop:space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{children:"Coupons"}),e.jsx("span",{className:"cursor-pointer inline-block h-10 w-10 laptop-l:h-8 laptop-l:w-8 laptop-md:h-7 laptop-md:w-7 tab-m:h-8 tab-m:w-8",onClick:()=>l(!i),children:e.jsx(K,{className:"h-full w-full text-[var(--primary)]"})})]}),x?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("span",{className:"inline-block h-16 w-16 rounded-full border-[5px] border-gray-300 border-r-indigo-500 animate-spin laptop-md:h-14 laptop-md:w-14"})}):e.jsx("table",{className:"coupon-table w-full",children:e.jsx("tbody",{children:p.length!==0?p.map(r=>{const{coupon_id:m,code:P,discount_type:E,discount_value:z}=r;return e.jsxs("tr",{children:[e.jsx("td",{className:"justify-self-start py-3 laptop-md:py-2",children:e.jsx(Se,{className:"h-20 w-20 fill-[var(--secondary)] laptop-l:h-16 laptop-l:w-16 laptop-md:h-14 laptop-md:w-14 tab-m:h-16 tab-m:w-16"})}),e.jsx("td",{children:e.jsx("p",{className:"text-[1.8rem] text-[var(--black)] font-medium uppercase laptop-l:text-[1.6rem] laptop-md:text-[1.4rem] laptop:text-[1.3rem] tab-m:text-[1.4rem]",children:P})}),e.jsx("td",{children:e.jsx("p",{className:"text-[1.8rem] text-[var(--black)] uppercase laptop-l:text-[1.6rem] laptop-md:text-[1.4rem] laptop:text-[1.3rem] tab-m:text-[1.4rem]",children:E===1?"₹"+z+" OFF":z+"% OFF"})}),e.jsx("td",{children:e.jsx("button",{className:"new-apply-btn",onClick:()=>ue(P),children:"apply"})})]},m)}):e.jsx("tr",{children:e.jsx("td",{className:"col-span-full text-3xl font-medium text-[var(--black)] laptop-l:text-2xl laptop-md:text-xl",children:"No coupon code found !"})})})})]}):e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h4",{className:"cart-title cart-cart-title",children:"Order Summary"}),e.jsxs("div",{className:"p-10 border-b border-[#b9bccf4d] flex flex-col gap-8 laptop-l:gap-6 laptop-l:p-8 laptop-md:px-6 laptop:p-6 laptop:gap-4 tab-l:px-4 tab-m:p-6",children:[e.jsxs("form",{onSubmit:ce,className:"flex items-center gap-8 laptop-l:gap-6 laptop:gap-4",children:[e.jsxs("div",{className:"grow relative",children:[e.jsx("input",{type:"text",placeholder:"Add Coupon Code","aria-label":"Add Coupon Code",value:b,onChange:r=>d(r.target.value),className:"w-full uppercase border border-[#EFF3FF] rounded-xl text-[1.8rem] leading-10 py-5 px-4 focus:border-indigo-500 focus:outline-none placeholder:capitalize laptop-l:text-[1.6rem] laptop-l:leading-[1.5] laptop-l:py-4 laptop-l:px-3 laptop-l:rounded-lg laptop-md:text-[1.4rem] laptop-md:p-3 laptop:text-[1.3rem] laptop:rounded-md"}),o.status&&e.jsx("span",{className:"clear-btn",role:"button","aria-label":"remove coupon code",onClick:de,children:e.jsx(K,{className:"h-full w-full p-1 text-[var(--primary)]"})})]}),e.jsx("button",{type:"submit",className:`apply-btn ${o.status?"disabled-apply-btn":""}`,disabled:o.status||F,children:"Apply"})]}),e.jsx("div",{children:e.jsxs("button",{className:"flex items-center gap-8 laptop-l:gap-6 laptop-md:gap-4 laptop:gap-3",onClick:me,children:[e.jsx("p",{className:"text-[1.8rem] text-[var(--primary)] font-medium laptop-l:text-[1.6rem] laptop-md:text-[1.4rem] laptop:text-[1.3rem] tab-m:text-[1.4rem]",children:"View More Offers"}),e.jsx("span",{className:"inline-block h-10 w-10 laptop-l:h-8 laptop-l:w-8 laptop-md:h-7 laptop-md:w-7 laptop:h-6 laptop:w-6 tab-m:h-8 tab-m:w-8",children:e.jsx(Pe,{className:"h-full w-full fill-[var(--primary)]"})})]})})]}),e.jsxs("div",{className:"px-12 py-12 flex flex-col gap-12 laptop-l:gap-10 laptop-l:p-10 laptop-md:px-6 laptop-md:py-8 laptop-md:gap-8 laptop:p-6 tab-l:px-4 tab-l:gap-7 cart-summary tab-m:p-6 tab-m:gap-8",children:[e.jsxs("div",{className:"place-center",children:[e.jsx("p",{children:"Sub Total"}),e.jsxs("h5",{children:["₹",u]})]}),e.jsxs("div",{className:"place-center",children:[e.jsxs("p",{children:["Applied Coupon",o.status&&e.jsx("span",{className:"applied-coupon",children:`( ${o==null?void 0:o.code} )`})]}),e.jsxs("h5",{children:["₹",g]})]}),e.jsxs("div",{className:"place-center",children:[e.jsx("p",{children:"Shipping Charge"}),e.jsxs("h5",{children:["₹",f]})]}),e.jsxs("div",{className:"place-center relative",children:[e.jsxs("div",{className:"flex justify-center items-center gap-3",children:[e.jsx("p",{children:"Express Delivery Charge"}),S&&e.jsxs("div",{className:"relative group my-[-6px]",children:[e.jsx(Me,{onClick:()=>_(!1),children:e.jsx(Ae,{className:"h-9 w-9 fill-[var(--secondary)] laptop-md:h-7 laptop-md:w-7 laptop:h-6 laptop:w-6"})}),e.jsxs("div",{role:"tooltip",className:"absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-[var(--secondary)] text-white rounded-md shadow-sm px-3 py-2 text-lg text-nowrap -top-12 left-1/2 -translate-x-1/2 laptop-md:text-base laptop-md:-top-10 laptop-md:rounded-sm",children:["remove",e.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]})]})]}),S?e.jsxs("h5",{children:["₹",w]}):e.jsx("button",{className:"edc-btn",onClick:()=>_(!0),children:"add"})]}),e.jsx("span",{className:"line"}),e.jsxs("div",{className:"place-center total-container",children:[e.jsx("p",{children:"Total"}),e.jsxs("h5",{children:["₹",Number(u)-Number(g)+Number(f)+(S&&w)]})]}),e.jsx("button",{className:"checkout-btn",onClick:pe,disabled:O,children:"checkout"})]})]}),e.jsx(Te,{sx:r=>({color:"#fff",zIndex:r.zIndex.drawer+1}),open:ie,children:e.jsx(Xe,{color:"inherit"})})]})};oe.propTypes={instruction:N.string.isRequired,paymentMethod:N.number.isRequired,selectedAddId:N.number.isRequired};const nt=()=>e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"max-w-[38rem] flex flex-col items-center gap-5 justify-center laptop-l:max-w-[36rem] laptop-l:gap-4 laptop-md:max-w-[34rem] laptop:max-w-[32rem] laptop:gap-3 laptop-s:max-w-[30rem] tab-m:w-[27.5rem] tab-s:max-w-[25rem] tab:max-w-[22.5rem] mb:max-w-[20rem] mb:gap-2",children:[e.jsx("img",{src:"empty-cart.png",className:"w-full h-auto object-cover"}),e.jsx("h1",{className:"text-5xl font-semibold text-[var(--black)] laptop-l:text-4xl laptop-md:text-3xl tab:text-2xl","aria-label":"Empty Cart",children:"Your cart is empty"}),e.jsx("p",{className:"text-[2rem] text-gray-500 laptop-l:text-[1.8rem] laptop-md:text-[1.6rem] tab:text-[1.4rem]",children:"Add item's to it now."}),e.jsxs(Ie,{to:"/services",className:"mt-4 flex gap-6 items-center px-8 py-4 border border-transparent text-3xl font-medium rounded-md text-white bg-primary focus:outline-none transition-colors duration-200 laptop-l:py-3 laptop-l:px-6 laptop-l:text-2xl laptop-md:mt-2 laptop-md:text-xl laptop-md:py-2 laptop-md:px-4 laptop-md:gap-4 laptop-s:gap-3 tab:px-3 tab:text-lg mb-l:rounded","aria-label":"Start shopping",title:"Start shopping",children:[e.jsx(De,{className:"h-12 w-auto laptop-l:h-10 laptop-md:h-8 tab:h-6"}),"Shop Now"]})]})}),yt=()=>{const a=I(i=>i.cart.cartItemCount),[t,s]=c.useState(""),[n,h]=c.useState(0),[x,p]=c.useState(0);return e.jsx("section",{className:"section-cart",children:e.jsx("div",{className:"cart-container",children:a?e.jsxs("div",{className:"flex justify-between items-start laptop-l:gap-28 laptop-md:gap-24 laptop-m:gap-20 laptop-s:gap-14 tab-m:gap-12 tab-m:flex-col tab-l:items-stretch",children:[e.jsx("div",{className:"basis-[65%] laptop-l:grow",children:e.jsxs("div",{className:"flex flex-col gap-24 laptop-l:gap-20 laptop-md:gap-16 laptop-m:gap-14 tab-l:gap-12 tab-s:gap-10",children:[e.jsx(et,{}),e.jsx(se,{setSelectAddId:p}),e.jsx(re,{instruction:t,setInstruction:s}),e.jsx(le,{setPayementMethod:h})]})}),e.jsx("div",{className:"basis-[31%] border border-[#b9bccf4d] rounded-xl sticky-summary relative laptop-l:basis-[28%] laptop-md:rounded-lg laptop-s:basis-[30%] tab-l:basis-[31%] tab-l:rounded-md  tab-m:w-[32.5rem]",children:e.jsx(oe,{instruction:t,paymentMethod:n,selectedAddId:x})})]}):e.jsx(nt,{})})})};export{yt as default};
