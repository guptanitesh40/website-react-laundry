import{_ as k,r as c,j as e,am as E,ab as I,ac as M,ad as V,ae as G}from"./index-9AahkJ_v.js";import{c as w,d as N}from"./index-Daf9_gZ0.js";import{L as T}from"./Loading-CMCXS1Ih.js";const U=()=>{const v="http://3.110.208.70:3000",u=localStorage.getItem("token");return{getPriceList:async()=>{try{const g=await fetch(`${v}/prices/customer`,{method:"GET",headers:{Authorization:`Bearer ${u}`}}),y=await g.json();return g.ok?y:(k.error("Failed to retrieve price list. Please try again later.",{className:"toast-error"}),!1)}catch{return k.error("Failed to load pricing information. Please check your connection and try again.",{className:"toast-error"}),!1}}}},J=()=>{const{getPriceList:v}=U(),[u,_]=c.useState([]),[g,y]=c.useState(!0),[t,C]=c.useState(0),[s,i]=c.useState(1),[j,l]=c.useState(1),[r,P]=c.useState("asc"),[o,F]=c.useState(""),[R,L]=c.useState([]),[f,$]=c.useState(0),[x,D]=c.useState(10),b=n=>{F(n);const a=r==="asc"?"desc":"asc";P(a);const m=u.sort((p,S)=>{const d=p[n],h=S[n];return typeof d=="string"&&typeof h=="string"?a==="asc"?d.localeCompare(h):h.localeCompare(d):a==="asc"?d-h:h-d});L(m)},A=n=>{let a=n.target.value;D(a),i(1),C(Math.ceil(f/a))},B=n=>{i(1),n.preventDefault();let a=n.target.value;const m=u.filter(p=>p.category_name.toLowerCase().includes(a.toLowerCase())||p.product_name.toLowerCase().includes(a.toLowerCase())||p.service_name.toLowerCase().includes(a.toLowerCase())||p.price_price.toString().toLowerCase().includes(a.toLowerCase()));L(m),C(Math.ceil(m.length/x)),$(m.length)};return c.useEffect(()=>{(async()=>{const a=await v();a&&($(a.length),C(Math.ceil(a.length/10)),_(a),L(a),y(!1))})()},[]),g?e.jsx(T,{}):e.jsxs("div",{className:"price-list-table-container",children:[e.jsx("div",{className:"px-8 py-6 laptop-s:px-6 laptop-s:py-4 tab-m:p-4",children:e.jsxs("form",{className:"flex items-center justify-between relative tab:flex-wrap tab:gap-3 mb-l:flex-col",onSubmit:n=>n.preventDefault(),children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 tab-m:gap-3",children:[e.jsx("label",{htmlFor:"rpp",className:"rpp-label",children:"Rows per page"}),e.jsxs("select",{className:"rpp-dropdown",name:"rpp",id:"rpp",onChange:A,children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:30,children:"30"}),e.jsx("option",{value:40,children:"40"}),e.jsx("option",{value:50,children:"50"})]})]}),e.jsxs("span",{className:"search-input-container relative",children:[e.jsx("input",{type:"text",placeholder:"Search for items",className:"searc-input focus:border-indigo-300 focus:outline-none",onChange:B}),e.jsx("span",{className:"search-icon",children:e.jsx(E,{className:"inline-block h-8 w-8 fill-[#d1d5db] laptop-s:h-6 laptop-s:w-6 tab-m:h-5 tab-m:w-5"})})]})]})}),e.jsx("div",{className:"allow-x-scroll",children:e.jsxs("table",{className:"price-list-table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#F7F8FD]",children:[e.jsx("th",{className:"min-w-[12.5rem] tab-l:min-w-40 tab-s:min-w-32 mb-l:min-w-24",children:"index"}),e.jsx("th",{className:"min-w-[20rem] tab-l:min-w-[17.5rem] tab-s:min-w-[15rem] mb-l:min-w-[12.5rem]",onClick:()=>b("category_name"),children:e.jsxs("div",{className:"flex items-center justify-center gap-2 cursor-pointer tab-m:gap-1",children:[e.jsx("span",{children:"category"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(w,{className:`updown-icon ${r==="asc"&&o==="category_name"?"!fill-[#676788]":""}`}),e.jsx(N,{className:`updown-icon ${r==="desc"&&o==="category_name"?"!fill-[#676788]":""}`})]})]})}),e.jsx("th",{className:"min-w-[22.5rem] tab-l:min-w-[20rem] tab-s:min-w-[17.5rem] mb-l:min-w-[15rem]",onClick:()=>b("product_name"),children:e.jsxs("div",{className:"flex items-center justify-center gap-2 cursor-pointer tab-m:gap-1",children:[e.jsx("span",{children:"product"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(w,{className:`updown-icon ${r==="asc"&&o==="product_name"?"!fill-[#676788]":""}`}),e.jsx(N,{className:`updown-icon ${r==="desc"&&o==="product_name"?"!fill-[#676788]":""}`})]})]})}),e.jsx("th",{className:"min-w-[22.5rem] tab-l:min-w-[20rem] tab-s:min-w-[17.5rem] mb-l:min-w-[15rem]",onClick:()=>b("service_name"),children:e.jsxs("div",{className:"flex items-center justify-center gap-2 cursor-pointer tab-m:gap-1",children:[e.jsx("span",{children:"service"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(w,{className:`updown-icon ${r==="asc"&&o==="service_name"?"!fill-[#676788]":""}`}),e.jsx(N,{className:`updown-icon ${r==="desc"&&o==="service_name"?"!fill-[#676788]":""}`})]})]})}),e.jsx("th",{className:"min-w-[20rem] tab-l:min-w-[17.5rem] tab-s:min-w-[15rem] mb-l:min-w-[12.5rem]",onClick:()=>b("price_price"),children:e.jsxs("div",{className:"flex items-center justify-center gap-2 cursor-pointer tab-m:gap-1",children:[e.jsx("span",{children:"price"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(w,{className:`updown-icon ${r==="asc"&&o==="price_price"?"!fill-[#676788]":""}`}),e.jsx(N,{className:`updown-icon ${r==="desc"&&o==="price_price"?"!fill-[#676788]":""}`})]})]})})]})}),e.jsxs("tbody",{children:[R.slice((s-1)*x,s*x).map((n,a)=>{const{category_name:m,price_price:p,product_name:S,service_name:d}=n;return e.jsxs("tr",{className:"transition duration-200 hover:bg-[rgba(226,225,231,0.39)]",children:[e.jsx("td",{children:(s-1)*x+(a+1)}),e.jsx("td",{children:m}),e.jsx("td",{children:S}),e.jsx("td",{children:d}),e.jsxs("td",{children:["â‚¹ ",p]})]},a)}),f===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,children:"No Item Found !"})})]})]})}),f!=0&&e.jsxs("div",{className:"flex items-center justify-between px-8 laptop-s:px-6 tab-l:px-4 tab-s:flex-wrap tab-s:p-4 tab-s:gap-4 tab:gap-3 mb-l:flex-col",children:[e.jsxs("p",{className:"current-page-num font-medium",children:["Showing ",(s-1)*x+1," to"," ",s===t?f:s*x," entries"]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 laptop-s:gap-3 mb-l:flex-wrap",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>{s!==1&&(i(1),l(1))},children:e.jsx(I,{className:`${s==1?"page-icon-light":"page-icon"}`})}),e.jsx("button",{className:"pagination-btn",onClick:()=>{s!==1&&(i(s-1),l(s-1))},children:e.jsx(M,{className:`${s==1?"page-icon-light":"page-icon"}`})}),t>1&&e.jsx("button",{className:`pagination-btn ${j===1&&"active-page"}`,onClick:()=>{s!==1&&(i(1),l(1))},children:e.jsx("span",{className:"page-num",children:"1"})}),t>2&&e.jsx("button",{className:`pagination-btn ${j===2&&"active-page"}`,onClick:()=>{s!==2&&(i(2),l(2))},children:e.jsx("span",{className:"page-num",children:"2"})}),t>3&&e.jsx("button",{className:`pagination-btn ${j===3&&"active-page"}`,onClick:()=>{s!==3&&(i(3),l(3))},children:e.jsx("span",{className:"page-num",children:"3"})}),t>2&&e.jsx("button",{className:"pagination-btn border-transparent",children:e.jsx("span",{className:"page-num",children:"..."})}),e.jsx("button",{className:`pagination-btn ${j===t&&"active-page"}`,onClick:()=>{s!==t&&(i(t),l(t))},children:e.jsx("span",{className:"page-num",children:t})}),e.jsx("button",{className:"pagination-btn",onClick:()=>{s!==t&&(i(s+1),l(s+1))},children:e.jsx(V,{className:`${s==t?"page-icon-light":"page-icon"}`})}),e.jsx("button",{className:"pagination-btn",onClick:()=>{s!==t&&(i(t),l(t))},children:e.jsx(G,{className:`${s==t?"page-icon-light":"page-icon"}`})})]})]})]})};export{J as default};
