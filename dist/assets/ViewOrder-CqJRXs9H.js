import{_ as j,r as d,d as O,u as C,j as e,X as E,W as u}from"./index-DCi0TphP.js";import{u as M}from"./useDownloadInvoice-CwpcDwze.js";import{L as Y}from"./Loading-BL09EuYC.js";const P=()=>{const l="http://35.154.167.170:3000",c=localStorage.getItem("token");return{getOrderDetail:async n=>{try{const t=await fetch(`${l}/orders/${n}`,{method:"GET",headers:{Authorization:`Bearer ${c}`}}),s=await t.json();return t.ok?s.data:(j.error("Failed to fetch order details. Please check your connection and try again.",{className:"toast-error"}),!1)}catch{return j.error("Failed to retrieve the order details. Please try again later.",{className:"toast-error"}),!1}}}},L=()=>{var o,m,x,p,h;const[l,c]=d.useState(!0),a=O(),n=C(),{getOrderDetail:t}=P(),[s,N]=d.useState([]),{downloadInvoice:v,loading:g}=M();d.useEffect(()=>{a!=null&&a.state?(async()=>{const i=await t(a.state.order_id);i&&(N(i),c(!1))})():n("/dashboard/home")},[a,n]);const y={1:"Cash on delivery",2:"Online payement"},k={1:"Pending payemtn",2:"Full payement received",3:"Partial payement received"},_=async()=>{await v(a.state.order_id)};return l?e.jsx(Y,{}):e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsxs("div",{className:"text-[1.8rem] leading-[4rem] text-[var(--black)] font-semibold py-4 px-6 rounded-xl bg-white border border-[#b9bccf4d] flex items-center justify-between shadow-sm",children:[e.jsxs("span",{children:["Order Details : #",a.state.order_id]}),e.jsx("span",{className:"flex justify-center items-center h-14 w-14 p-3 bg-gray-100 rounded-full border border-[#b9bccf4d] cursor-pointer",onClick:_,children:g?e.jsx("span",{className:"inline-block h-7 w-7 rounded-full border-2 border-indigo-100 border-t-indigo-600 border-r-indigo-600 animate-spin"}):e.jsx(E,{className:"h-full w-full fill-[var(--primary)]"})})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"basis-[48.8%] space-y-8",children:[e.jsxs("div",{className:"py-8 px-12 order-list-container flex flex-col gap-6 shadow-sm",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium mb-2",children:"Order items"}),(o=s==null?void 0:s.items)==null?void 0:o.map(f=>{const{item_id:i,product:b,category:w,quantity:D,service:r}=f;return e.jsx("div",{className:"border border-[#b9bccf4d] rounded-lg py-3 px-4 bg-slate-50",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex justify-start gap-6",children:[e.jsx("img",{src:b.image,alt:"product image",className:"inline-block h-20 w-20 rounded-lg border"}),e.jsxs("div",{className:"flex flex-col justify-evenly",children:[e.jsxs("h3",{className:"text-[1.2rem] font-medium leading-[1.5]",children:[b.name," (",`${D}x`,")"]}),e.jsxs("h4",{className:"text-[1.2rem] text-[#78829d] font-normal leading-[1.5]",children:["Category: ",w.name]})]})]}),e.jsxs("span",{className:"text-[1.1rem] text-[var(--secondary)] border-[0.5px] border-green-500 p-2 rounded-lg",children:["Service : ",r==null?void 0:r.name]})]})},i)})]}),e.jsxs("div",{className:"cus-info-container shadow-sm",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium py-5 px-12 border-b border-[#b9bccf4d]",children:"Order summary"}),e.jsx("div",{className:"text-[1.4rem] text-[var(--black)] font-medium py-8 px-12",children:e.jsxs("div",{className:"grid grid-cols-[20rem_1fr] gap-8 font-normal",children:[e.jsx("span",{className:"inline-block text-[#676788]",children:"Sub Total"}),e.jsxs("span",{children:["₹",(s==null?void 0:s.sub_total)||"0"]}),e.jsx("span",{className:"inline-block text-[#676788]",children:"Shipping charges"}),e.jsxs("span",{children:["₹",(s==null?void 0:s.shipping_charges)||"0"]}),e.jsx("span",{className:"inline-block text-[#676788]",children:"Express Delivery Charges"}),e.jsxs("span",{children:["₹",(s==null?void 0:s.express_delivery_charges)||"0"]}),e.jsx("span",{className:"inline-block text-[#676788]",children:"Kasar amount"}),e.jsxs("span",{children:["₹",(s==null?void 0:s.kasar_amount)||"0"]}),e.jsx("span",{className:"inline-block text-[#676788]",children:"Coupon Code"}),e.jsx("span",{children:(s==null?void 0:s.coupon_code)||"N/A"}),e.jsx("span",{className:"inline-block text-[#676788]",children:"Coupon Discount"}),e.jsxs("span",{children:["₹",(s==null?void 0:s.coupon_discount)||"0"]}),e.jsx("span",{className:"inline-block text-[#676788]",children:"Total"}),e.jsxs("span",{children:["₹",(s==null?void 0:s.total)||"0"]})]})})]})]}),e.jsxs("div",{className:"basis-[48.8%] space-y-8",children:[e.jsxs("div",{className:"common-container shadow-sm",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium py-5 px-12 border-b border-[#b9bccf4d]",children:"Customer information"}),e.jsx("div",{className:"text-[1.4rem] text-[var(--black)] font-medium py-8 px-12",children:e.jsxs("div",{className:"grid grid-cols-[20rem_1fr] gap-8 font-normal",children:[e.jsx("span",{className:"info-label",children:"Name"}),e.jsx("span",{className:"info-ans",children:((m=s==null?void 0:s.user)==null?void 0:m.first_name)+" "+((x=s==null?void 0:s.user)==null?void 0:x.last_name)}),e.jsx("span",{className:"info-label",children:"Email"}),e.jsx("span",{className:"info-ans",children:(p=s==null?void 0:s.user)==null?void 0:p.email}),e.jsx("span",{className:"info-label",children:"Mobile Number"}),e.jsx("span",{className:"info-ans",children:(h=s==null?void 0:s.user)==null?void 0:h.mobile_number})]})})]}),e.jsxs("div",{className:"common-container py-6 px-12 space-y-4 shadow-sm",children:[e.jsx("h3",{className:"text-[1.6rem] text-[var(--black)] font-medium capitalize",children:"shipping address"}),e.jsx("p",{className:"info-label address",children:s==null?void 0:s.address_details})]}),e.jsxs("div",{className:"common-container shadow-sm",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium py-5 px-12 border-b border-[#b9bccf4d]",children:"Payement information"}),e.jsx("div",{className:"text-[1.4rem] text-[var(--black)] font-medium py-8 px-12",children:e.jsxs("div",{className:"grid grid-cols-[20rem_1fr] gap-8 font-normal",children:[e.jsx("span",{className:"info-label",children:"payement type"}),e.jsx("span",{className:"info-ans",children:y[s==null?void 0:s.payment_type]}),e.jsx("span",{className:"info-label",children:"payement status"}),e.jsx("span",{className:"info-ans",children:k[s==null?void 0:s.payment_status]}),e.jsx("span",{className:"info-label",children:"Transaction ID"}),e.jsx("span",{className:"info-ans",children:(s==null?void 0:s.transaction_id)||"N/A"})]})})]}),e.jsxs("div",{className:"common-container shadow-sm",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium py-5 px-12 border-b border-[#b9bccf4d]",children:"Estimated Delivery & Pickup"}),e.jsx("div",{className:"text-[1.4rem] text-[var(--black)] font-medium py-8 px-12",children:e.jsxs("div",{className:"grid grid-cols-[20rem_1fr] gap-8 font-normal",children:[e.jsx("span",{className:"info-label",children:"Estimated Pickup Time:"}),e.jsx("span",{className:"info-ans",children:u(s==null?void 0:s.estimated_pickup_time).format("DD/MM/YYYY")}),e.jsx("span",{className:"info-label",children:"Estimated Delivery Time:"}),e.jsx("span",{className:"info-ans",children:u(s==null?void 0:s.estimated_delivery_time).format("DD/MM/YYYY")})]})})]})]})]})]})};export{L as default};
