import{j as e,G as D,r as d,_ as u,a as N,d as f,e as _,f as A,I,h as w,i as k,R as y,k as O,P as h,u as U,l as F,m as G,L as M}from"./index-DkgfpKSV.js";import{F as W}from"./index-BChsMxpf.js";import{u as H,a as J,H as Q,b as K}from"./useDeleteProduct-4WuUf84W.js";const V=()=>e.jsx("div",{className:"absolute inset-0 max-h-[50.2rem] max-w-full bg-cover bg-center bg-no-repeat z-[-10] bg-[url('/choose-services-bg.png')] laptop-m:max-h-[43.2rem] laptop:max-h-[43rem] laptop-s:max-h-[35.9rem] tab-l:max-h-[31.7rem] tab-m:max-h-[29.3rem] tab-s:max-h-[27.3rem]"});function X(t){return D({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"},child:[]},{tag:"path",attr:{d:"M21 21l-6 -6"},child:[]}]})(t)}const Y=()=>{const t="http://35.154.167.170:3000",[n,c]=d.useState([]),[s,a]=d.useState(!0);return d.useEffect(()=>{(async()=>{var r;try{const i=await fetch(`${t}/web/services`,{method:"GET"}),l=await i.json();i.ok?c((r=l==null?void 0:l.data)==null?void 0:r.services):u.error("Failed to fetch services!")}catch{u.error("Failed to fetch services!")}finally{a(!1)}})()},[t]),{services:n,loading:s}},Z=()=>{const t="http://35.154.167.170:3000";return{fetchCategories:async c=>{try{const s=await fetch(`${t}/web/categories?service_id=${c}`,{method:"GET"}),a=await s.json();if(s.ok)return a==null?void 0:a.data;u.error("Failed to fetch categories!")}catch{u.error("Failed to fetch categories !")}}}},ee=()=>{const{services:t,loading:n}=Y(),{fetchCategories:c}=Z(),s=N(),a=f(o=>o.service.selectedServiceId),[p,r]=d.useState(""),i=async o=>{s(_(o))},l=o=>{o.preventDefault(),p&&(r(""),u.success(p))};return d.useEffect(()=>{!n&&t.length>0&&(a||s(_(t[0].service_id)))},[n,t,a,s]),d.useEffect(()=>{a&&(async()=>{const x=await c(a);x&&(x.length>0?(s(w(x[0].category_category_id)),s(k(x))):(s(w(0)),s(k([]))))})()},[s,c,a]),n?e.jsx(A,{}):e.jsx("section",{className:"section-services",children:e.jsxs("div",{className:"secondary-container",children:[e.jsx("h1",{children:"Choose your Service"}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs("div",{className:"bg-white flex flex-col rounded-3xl shadow-lg laptop-m:rounded-2xl tab-s:rounded-xl",children:[e.jsx("div",{className:"flex justify-center gap-20 pt-12 px-12 border-b border-[#B9BCCF4D] laptop-l:gap-16 laptop-l:px-10 laptop-l:pt-10 laptop-m:pt-8 laptop-m:px-8 laptop-m:gap-12 laptop-s:px-6 laptop-s:pt-6 laptop-s:gap-8 tab-s:px-4 tab-s:pt-4 tab-s:gap-3",children:t.map(o=>{const{name:x,image:g,service_id:v}=o;return e.jsxs("div",{className:`service-container flex flex-col gap-8 items-center ${a===v?"active-service":""} laptop-l:gap-6 laptop-m:gap-4 tab-s:gap-2`,onClick:()=>i(v),children:[e.jsx("div",{className:"h-24 w-24 text-center laptop-l:h-20 laptop-l:w-20 laptop-m:h-16 laptop-m:w-16 laptop-s:h-14 laptop-s:w-14 tab-s:h-12 tab-s:w-12",children:e.jsx("img",{src:g,alt:"Service image",className:"inline-block max-h-full w-auto"})}),e.jsx("h4",{className:"service-name",children:x})]},x)})}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-[0_0_17%] border-r border-[#B9BCCF4D] px-8 py-10 laptop-l:px-10 laptop-l:py-7  laptop-m:py-5 laptop-m:px-5 laptop-m:pl-8 laptop-s:px-4 laptop-s:py-4 laptop-s:pl-6 tab-s:px-4 tab-s:py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{className:"h-12 w-12 fill-[var(--primary)] laptop-l:h-10 laptop-l:w-10 laptop-m:h-8 laptop-m:w-8 laptop-s:h-6 laptop-s:w-6 tab-s:h-4 tab-s:w-4"}),e.jsx("p",{className:"text-[1.6rem] leading-[3rem] font-semibold text-[var(--black)] laptop-l:text-[1.5rem] laptop-l:leading-[2.5rem] laptop-m:text-[1.4rem] laptop-m:leading-normal laptop-s:text-[1.2rem] tab-s:text-[1rem]",children:"Paldi"}),e.jsx(I,{className:"h-10 w-10 laptop-l:h-8 laptop-l:w-8 laptop-s:h-6 laptop-s:w-6 tab-s:h-4 tab-s:w-4"})]})}),e.jsxs("form",{className:"flex-grow flex gap-4 px-8 py-6 laptop-l:px-10 laptop-l:py-3 laptop-m:px-8 laptop-m:py-2 laptop-s:px-6 laptop-s:py-1 tab-s:px-4",onSubmit:l,children:[e.jsx("label",{htmlFor:"search",className:"flex justify-center items-center",children:e.jsx(X,{className:"h-12 w-12 stroke-[#687182] laptop-l:h-10 laptop-l:w-10 laptop-m:h-8 laptop-m:w-8 laptop-s:h-6 laptop-s:w-6 tab-s:h-4 tab-s:w-6"})}),e.jsx("input",{id:"search",type:"text",value:p,onChange:o=>r(o.target.value),placeholder:"Search here...",className:"flex-grow focus:outline-none text-[1.8rem] text-[var(--black)] leading-[2rem] laptop-l:text-[1.6rem] laptop-m:text-[1.4rem] laptop-m:leading-normal laptop-s:text-[1.2rem] tab-s:text-[1.2rem]"}),e.jsx("button",{type:"submit",className:"search-button",children:"Search"})]})]})]})})]})})},te=()=>e.jsxs("div",{className:"filter flex flex-col gap-12 laptop-l:gap-10 laptop-m:gap-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"text-filters",children:"Filters"}),e.jsx("h5",{className:"text-clear",children:"Clear all"})]}),e.jsxs("div",{className:"flex flex-col justify-center items-stretch gap-8 laptop-l:gap-6 laptop-m:gap-4",children:[e.jsx("p",{className:"dd-title",children:"select cloth types"}),e.jsxs("select",{className:"filter-dd",children:[e.jsx("option",{value:"shirt",children:"shirt"}),e.jsx("option",{value:"t-shirt",children:"t-shirt"}),e.jsx("option",{value:"pant",children:"pant"}),e.jsx("option",{value:"zabhbha/kurta",children:"shzabhbha/kurtairt"}),e.jsx("option",{value:"coat/blazer",children:"coat/blazer"})]}),e.jsxs("div",{className:"flex items-center justify-start flex-wrap gap-6",children:[e.jsxs("span",{className:"selected-clothes",children:[e.jsx("span",{children:"pant"}),e.jsx(y,{})]}),e.jsxs("span",{className:"selected-clothes",children:[e.jsx("span",{children:"shirt"}),e.jsx(y,{})]}),e.jsxs("span",{className:"selected-clothes",children:[e.jsx("span",{children:"t-shirt"}),e.jsx(y,{})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-8 laptop-l:gap-6 laptop-m:gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("p",{className:"dd-title",children:"Price"}),e.jsx("p",{className:"filter-price",children:"₹10 - ₹180"})]}),e.jsx("div",{children:e.jsx("form",{children:e.jsx("input",{type:"range",className:"input-range"})})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[1.2rem]",children:"₹10"}),e.jsx("span",{className:"text-[1.2rem]",children:"₹500"})]})]})]}),se=()=>{const t="http://35.154.167.170:3000",n=localStorage.getItem("token");return{addToCart:async({category_id:s,product_id:a,service_id:p,itemCount:r})=>{try{const i=await fetch(`${t}/carts`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({category_id:Number(s),product_id:a,service_id:p,quantity:r})}),l=await i.json();return i.ok?l==null?void 0:l.data:null}catch{return u.error("Error occur while adding item into cart!",{style:{maxWidth:"400px"}}),null}}}},ae=()=>{const t=N(),[n,c]=d.useState(!1),s="http://35.154.167.170:3000",a=localStorage.getItem("token"),p=d.useCallback(async()=>{c(!0);try{const r=await fetch(`${s}/carts`,{method:"GET",headers:{Authorization:`Bearer ${a}`}}),i=await r.json();r.ok?t(O(i==null?void 0:i.data)):u.error("Failed to fetch cart data!")}catch{u.error("Failed to fetch cart data!")}finally{c(!1)}},[s,t,a]);return{loading:n,refetch:p}},R=({categoryItem:t,category_id:n})=>{const{loading:c,refetch:s}=ae(),a=U(),p=N(),[r,i]=d.useState(1),[l,o]=d.useState(null),[x,g]=d.useState(!1),[v,C]=d.useState(!1),L=f(m=>m.auth.isAuthenticated),{addToCart:T}=se(),{deleteProduct:q,loading:ne}=H(),{updateCart:S,loading:oe}=J(),$=async()=>{i(r+1);const m=r+1;await S(l,{quantity:m})&&p(F({cart_id:l,quantity:m}))},B=async()=>{if(r>0&&r-1!=0){i(r-1);const m=r-1;await S(l,{quantity:m})&&p(F({cart_id:l,quantity:m}))}else g(!1),await q(l)&&p(G(l))},E=async(m,j)=>{if(!L)C(!0);else{g(!0);const b=await T({category_id:n,product_id:m,service_id:j,itemCount:r});b?(o(b==null?void 0:b.cart_id),await s()):u.error("Failed to add item into cart!")}},P=()=>{C(!1)},z=()=>{a("/login")};return d.useEffect(()=>{var m,j;t!=null&&t.carts?(o((m=t==null?void 0:t.carts)==null?void 0:m.cart_id),i((j=t==null?void 0:t.carts)==null?void 0:j.quantity),g(!0)):(g(!1),i(1))},[t]),e.jsxs("div",{className:"overflow-hidden",children:[e.jsxs("div",{className:"cat-item-container flex gap-8 laptop-l:gap-6 laptop-m:gap-4",children:[e.jsx("img",{src:t.product.image,alt:"Service Image",className:"h-32 w-32 rounded-2xl laptop-l:h-28 laptop-l:w-28 laptop-m:h-24 laptop-m:w-24 laptop:h-20 laptop:w-20"}),e.jsxs("div",{className:"flex-grow flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col gap-6 laptop-l:gap-4",children:[e.jsx("h5",{className:"cat-item-name",children:t.product.name}),e.jsxs("p",{className:"cat-item-price",children:["₹",t.price]})]}),x?e.jsxs("button",{className:"inc-dec-btn overflow-hidden",children:[e.jsx("span",{className:"py-[1.1rem] pl-[1.2rem] cursor-pointer",onClick:B,children:e.jsx(Q,{className:"indec-icon"})}),r,e.jsx("span",{className:"py-[1.1rem] pr-[1.2rem] cursor-pointer",onClick:$,children:e.jsx(K,{className:"indec-icon"})})]}):e.jsx("button",{className:"add-btn",onClick:()=>E(t.product_id,t.service_id),children:"Add"})]})]},t.product_id),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:e.jsxs("div",{className:"info-login-container",children:[e.jsx("h2",{className:"text-center text-3xl font-bold leading-9 tracking-tight text-gray-900",children:"Login Required"}),e.jsx("p",{className:" text-red-500",children:"Please login to add items to your cart."}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:z,className:"py-4 px-8 rounded-xl bg-indigo-500 text-white font-medium hover:bg-indigo-400",children:"Login"}),e.jsx("button",{onClick:P,className:"py-4 px-8 rounded-xl bg-[#e4e6eb] font-medium",children:"Cancel"})]})]})})]})};R.propTypes={categoryItem:h.shape({carts:h.oneOfType([h.shape({cart_id:h.number.isRequired,quantity:h.number.isRequired}),h.string]),price:h.number.isRequired,service_id:h.number.isRequired,product_id:h.number.isRequired,product:h.shape({product_id:h.number.isRequired,name:h.string.isRequired,image:h.string.isRequired}).isRequired}).isRequired,category_id:h.number.isRequired};const le=()=>{const t="http://35.154.167.170:3000";return{fetchServiceItems:async(c,s)=>{try{const a=localStorage.getItem("token"),p={};a&&(p.Authorization=`Bearer ${a}`);const r=await fetch(`${t}/web/products?category_id=${c}&service_id=${s}`,{method:"GET",headers:p}),i=await r.json();if(r.ok)return i==null?void 0:i.data;u.error("Failed to fetch selected category items !",{style:{maxWidth:"400px"}})}catch{u.error("Failed to fetch selected category items !",{style:{maxWidth:"400px"}})}}}},ce=()=>{const t=N(),{fetchServiceItems:n}=le(),c=f(l=>l.category.categories),s=f(l=>l.service.selectedServiceId),a=f(l=>l.category.selectedCategoryId),[p,r]=d.useState([]);d.useEffect(()=>{s&&a&&(async()=>{const o=await n(a,s);o&&o.length>0&&r(o)})()},[a,s]);const i=l=>{t(w(l))};return e.jsxs("div",{className:"select-clothes-container",children:[e.jsx("h4",{className:"service-title",children:"Select Cloths"}),e.jsx("div",{className:"flex items-center gap-16 laptop-l:gap-12 laptop-m:gap-8",children:c.length>0?c.map(l=>{const{category_name:o,category_category_id:x}=l;return e.jsx("span",{className:`category-tags ${a===x?"active-tag":""}`,onClick:()=>i(x),children:o},x)}):"No category Found"}),e.jsx("div",{className:"flex flex-col gap-12 laptop-l:gap-10 laptop-m:gap-8",children:c.length>0&&p.map(l=>e.jsx(R,{categoryItem:l,category_id:a},l.product_id))})]})},re=()=>{const t=f(c=>{var s;return(s=c==null?void 0:c.cart)==null?void 0:s.subTotal}),n=f(c=>{var s,a;return(a=(s=c==null?void 0:c.setting)==null?void 0:s.settings)==null?void 0:a.shipping_charge});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"card-container",children:[e.jsx("h5",{className:"cart-title",children:"cart"}),e.jsxs("div",{className:"px-12 py-12 flex flex-col gap-10 laptop-l:px-10 laptop-l:gap-9 laptop-m:px-8 laptop-m:py-10 laptop-m:gap-8",children:[e.jsxs("div",{className:"place-center",children:[e.jsx("p",{children:"Sub Total"}),e.jsxs("h5",{children:["₹",t||0]})]}),e.jsxs("div",{className:"place-center",children:[e.jsx("p",{children:"Shipping Charge"}),e.jsxs("h5",{children:["₹",n||0]})]}),e.jsx("span",{className:"line"}),e.jsxs("div",{className:"place-center total-container",children:[e.jsx("p",{children:"Total"}),e.jsxs("h5",{children:["₹",t&&n?Number(t)+Number(n):0]})]}),e.jsx(M,{to:"/cart",className:"view-cart-btn",children:"view cart"})]})]})})},ie=()=>e.jsx("section",{className:"pt-16 pb-48 laptop-l:pt-12 laptop-l:pb-40 laptop-m:pb-32 laptop:pb-24",children:e.jsx("div",{className:"services-con-container",children:e.jsxs("div",{className:"flex items-start justify-between gap-12 laptop:gap-8 laptop:justify-around",children:[e.jsx("div",{className:"flex-[0_0_27.78%] laptop:flex-[0_0_26%]",children:e.jsx(te,{})}),e.jsx("div",{className:"flex-[0_0_45.8%] laptop:flex-[0_0_39%]",children:e.jsx(ce,{})}),e.jsx("div",{className:"flex-[0_0_21.45%] laptop:flex-[0_0_22.5%]",children:e.jsx(re,{})})]})})}),xe=()=>e.jsxs("div",{children:[e.jsx(V,{}),e.jsx(ee,{}),e.jsx(ie,{})]});export{xe as default};
