import{_ as f,G as K,j as e,r as t,P as A,T as Q,u as ee,U as se,V as ae,W as $,X as te,Y as re,Z as ne,$ as le,a0 as oe}from"./index-BkRZouuw.js";import{a as ie,b,c as v}from"./index-CX7Jh-_o.js";import{L as ce}from"./Loading-DOOB_kV0.js";import{u as de}from"./useDownloadInvoice-C-wyxUe3.js";import{c as me}from"./createSvgIcon-BN0xLNdU.js";import{I as F}from"./IconButton-BmK2LIeA.js";import"./ButtonBase-DmxaCh9k.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";const pe=()=>{const c="http://3.110.208.70:3000",n=localStorage.getItem("token");return{getOrders:async()=>{try{const l=await fetch(`${c}/orders`,{method:"GET",headers:{Authorization:`Bearer ${n}`}}),o=await l.json();return l.ok?o==null?void 0:o.data:(f.error("Failed to fetch orders. Please check your connection and try again.",{className:"toast-error"}),!1)}catch{return f.error("Failed to retrieve your orders. Please try again later.",{className:"toast-error"}),!1}}}},xe=()=>{const c="http://3.110.208.70:3000",n=localStorage.getItem("token");return{getOrders02:async(l,o="ASC",m="order_id")=>{try{const d=await fetch(`${c}/orders?sort_by=${m}&order=${o.toUpperCase()}&per_page=10&page_number=${l}`,{method:"GET",headers:{Authorization:`Bearer ${n}`}}),p=await d.json();return d.ok?p.data:(f.error("Failed to fetch orders. Please check your connection and try again.",{className:"toast-error"}),!1)}catch{return f.error("Failed to retrieve your orders. Please try again later.",{className:"toast-error"}),!1}}}};function ue(c){return K({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Star"},child:[{tag:"path",attr:{d:"M16.6,20.463a1.5,1.5,0,0,1-.7-.174l-3.666-1.927a.5.5,0,0,0-.464,0L8.1,20.289a1.5,1.5,0,0,1-2.177-1.581l.7-4.082a.5.5,0,0,0-.143-.442L3.516,11.293a1.5,1.5,0,0,1,.832-2.559l4.1-.6a.5.5,0,0,0,.376-.273l1.833-3.714a1.5,1.5,0,0,1,2.69,0l1.833,3.714a.5.5,0,0,0,.376.274l4.1.6a1.5,1.5,0,0,1,.832,2.559l-2.965,2.891a.5.5,0,0,0-.144.442l.7,4.082A1.5,1.5,0,0,1,16.6,20.463Zm-3.9-2.986L16.364,19.4a.5.5,0,0,0,.725-.527l-.7-4.082a1.5,1.5,0,0,1,.432-1.328l2.965-2.89a.5.5,0,0,0-.277-.853l-4.1-.6a1.5,1.5,0,0,1-1.13-.821L12.449,4.594a.516.516,0,0,0-.9,0L9.719,8.308a1.5,1.5,0,0,1-1.13.82l-4.1.6a.5.5,0,0,0-.277.853L7.18,13.468A1.5,1.5,0,0,1,7.611,14.8l-.7,4.082a.5.5,0,0,0,.726.527L11.3,17.477a1.5,1.5,0,0,1,1.4,0Z"},child:[]}]}]})(c)}const he=me(e.jsx("path",{d:"M12 6.5c3.79 0 7.17 2.13 8.82 5.5-1.65 3.37-5.02 5.5-8.82 5.5S4.83 15.37 3.18 12C4.83 8.63 8.21 6.5 12 6.5m0-2C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5m0 5c1.38 0 2.5 1.12 2.5 2.5s-1.12 2.5-2.5 2.5-2.5-1.12-2.5-2.5 1.12-2.5 2.5-2.5m0-2c-2.48 0-4.5 2.02-4.5 4.5s2.02 4.5 4.5 4.5 4.5-2.02 4.5-4.5-2.02-4.5-4.5-4.5"}),"RemoveRedEyeOutlined"),ge=()=>{const[c,n]=t.useState(!1),j="http://3.110.208.70:3000",l=window.localStorage.getItem("token");return{sendFeedBack:async m=>{if(!m||typeof m!="object"){f.error("Please provide valid feedback data. Ensure all fields are filled correctly.",{className:"toast-error"});return}try{n(!0);const d=await fetch(`${j}/feedback`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(m)}),p=await d.json();if(!d.ok){f.error((p==null?void 0:p.message)||"Oops! Something went wrong while sending your feedback. Please try again later.",{className:"toast-error"});return}return f.success("Thank you for your feedback!",{className:"toast-success"}),p}catch{f.error("Unable to send feedback at the moment. Please check your connection or try again later.",{className:"toast-error"});return}finally{n(!1)}},loading:c}},R=({order_id:c,setModelIsOpen:n})=>{const{sendFeedBack:j,loading:l}=ge(),[o,m]=t.useState({}),[d,p]=t.useState(0),[w,k]=t.useState(""),r=s=>{p(s)},S=async()=>{const s={};if(d===0&&(s.star="Please select at least one star."),w===""&&(s.message="Please enter your message."),Object.keys(s).length>0){m(s);return}m({}),await j({rating:d,comment:w,order_id:c,is_publish:1})&&n(!1)};return e.jsx("div",{className:"feedback-model-container bg-black bg-opacity-70",children:e.jsxs("div",{className:"border border-[#b9bccf4d] rounded-xl bg-white px-14 py-16 flex flex-col gap-10 w-[40rem] relative",children:[e.jsxs("button",{type:"button",title:"close",className:"absolute top-2 right-2 border border-gray-300 shadow-sm rounded-md p-2 inline-flex items-center justify-center text-gray-400 focus:outline-none focus:border-indigo-500",onClick:()=>n(!1),children:[e.jsx("span",{className:"sr-only",children:"Close menu"}),e.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]}),e.jsxs("div",{className:"text-3xl capitalize text-[var(--primary)] font-semibold",children:["Order Id : ",c]}),e.jsxs("div",{children:[e.jsx("div",{className:"rating-star-container flex gap-2",children:Array(5).fill(0).map((s,y)=>e.jsx(Q,{onClick:()=>r(y+1),className:`star cursor-pointer text-3xl ${y<d?"fill-[#FF2E17]":"fill-[#B9BCCF]"}`},y))}),o.star&&e.jsx("span",{className:"block mt-2 text-lg leading-1 text-red-500",children:o.star})]}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("label",{htmlFor:"message",className:"text-[1.4rem] leading-[2rem] text-[var(--black)]",children:"Write a Review"}),e.jsxs("div",{children:[e.jsx("textarea",{id:"message",rows:4,value:w,onChange:s=>k(s.target.value),className:"w-full text-[1.4rem] leading-[2.4rem] text-[var(--black)] border-[1.5px] border-indigo-200 focus:border-indigo-500 focus:outline-none rounded-xl p-4"}),o.message&&e.jsx("span",{className:"block text-lg leading-1 text-red-500",children:o.message})]})]}),e.jsx("div",{children:e.jsx("button",{className:"submit-review",onClick:S,children:l?e.jsx("span",{className:"inline-block h-9 w-9 border-2 border-white border-r-transparent rounded-full animate-spin my-[-5px] mx-[1.5rem]"}):"submit"})})]})})};R.propTypes={order_id:A.number.isRequired,setModelIsOpen:A.func.isRequired};const Ce=()=>{const{getOrders:c}=pe(),{getOrders02:n}=xe(),[j,l]=t.useState([]),[o,m]=t.useState(0),[d,p]=t.useState(0),[w,k]=t.useState(!0),[r,S]=t.useState(0),[s,y]=t.useState(1),[C,B]=t.useState(0),[x,u]=t.useState(1),[_,I]=t.useState("asc"),[D,E]=t.useState(0),[M,T]=t.useState(""),{downloadInvoice:Y,loading:L}=de(),G=ee(),[U,P]=t.useState(!1),h=async i=>{k(!0),y(i);const a=await n(i);a&&(l(a.result),k(!1))},N=async i=>{if(_=="desc"){I("asc");const a=await n(s,_,i);a&&l(a.result)}else{I("desc");const a=await n(s,_,i);a&&l(a.result)}},z=async i=>{E(i),await Y(i)},X=i=>{P(!0),T(i)};return t.useEffect(()=>{(async()=>{var g;const a=await c();a&&(p((g=a==null?void 0:a.totalPendingAmount)==null?void 0:g.total_pending_due_amount),m(a.inProgressCount),B(a.count),S(Math.ceil(a.count/10)),l(a.result),k(!1))})()},[]),w?e.jsx(ce,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsxs("div",{className:"flex gap-14",children:[e.jsxs("div",{className:"status-card flex gap-8 items-center",children:[e.jsx("span",{className:"bg-[#FFE0EB] inline-block h-[6rem] w-[6rem] rounded-full",children:e.jsx(se,{className:"inline-block p-5 h-full w-full fill-[#FF82AC]"})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("p",{className:"card-label",children:"Total Pending Due Amount"}),e.jsxs("p",{className:"card-price",children:["â‚¹",d||"0"]})]})]}),e.jsxs("div",{className:"status-card flex gap-8 items-center",children:[e.jsx("span",{className:"bg-[#DCFAF8] inline-block h-[6rem] w-[6rem] rounded-full",children:e.jsx(ie,{className:"inline-block p-7 h-full w-full fill-[#16DBCC]"})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("p",{className:"card-label",children:"Lifetime Total Order Number"}),e.jsx("p",{className:"card-price",children:C})]})]}),e.jsxs("div",{className:"status-card flex gap-8 items-center",children:[e.jsx("span",{className:"bg-[#FEF7E7] inline-block h-[6rem] w-[6rem] rounded-full",children:e.jsx(ae,{className:"inline-block p-6 h-full w-full fill-[#F2B413]"})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("p",{className:"card-label",children:"Total In Progress Orders"}),e.jsx("p",{className:"card-price",children:o})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsx("h3",{className:"booking-title",children:"Your Booking List"}),e.jsxs("div",{className:"orders-table-container",children:[e.jsxs("table",{className:"orders-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>N("order_id"),children:[e.jsx("span",{children:"order id"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(b,{className:"updown-icon"}),e.jsx(v,{className:"updown-icon"})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>N("created_at"),children:[e.jsx("span",{children:"booking date"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(b,{className:"updown-icon"}),e.jsx(v,{className:"updown-icon"})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>N("estimated_delivery_time"),children:[e.jsx("span",{children:"delivery date"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(b,{className:"updown-icon"}),e.jsx(v,{className:"updown-icon"})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>N("total"),children:[e.jsx("span",{children:"amount"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(b,{className:"updown-icon"}),e.jsx(v,{className:"updown-icon"})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>N("kasar_amount"),children:[e.jsx("span",{children:"kasar"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(b,{className:"updown-icon"}),e.jsx(v,{className:"updown-icon"})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>N("paid_amount"),children:[e.jsx("span",{children:"paid amt"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(b,{className:"updown-icon"}),e.jsx(v,{className:"updown-icon"})]})]}),e.jsxs("th",{className:"flex items-center justify-center gap-2 cursor-pointer",onClick:()=>N("order_status"),children:[e.jsx("span",{children:"status"}),e.jsxs("span",{className:"flex flex-col",children:[e.jsx(b,{className:"updown-icon"}),e.jsx(v,{className:"updown-icon"})]})]}),e.jsx("th",{className:"col-span-3",children:"actions"})]})}),e.jsx("tbody",{children:C>0?j.map((i,a)=>{const{order_id:g,total:W,created_at:Z,estimated_delivery_time:q,kasar_amount:H,paid_amount:V,order_status:O,order_status_name:J}=i;return e.jsxs("tr",{children:[e.jsx("td",{children:g}),e.jsx("td",{children:$(Z).format("DD/MM/YYYY, hh:mm A")}),e.jsx("td",{children:$(q).format("DD/MM/YYYY")}),e.jsxs("td",{children:["â‚¹",W]}),e.jsxs("td",{children:["â‚¹",H]}),e.jsx("td",{children:V||"â‚¹0"}),e.jsx("td",{style:{padding:"5px",textAlign:"left"},className:"flex items-center justify-center",children:e.jsx("span",{className:`inline-block px-4 py-1 rounded-lg font-medium text-[1rem] leading-[2.4rem] order-status-label-${O>=4&&O<9?0:O}`,children:J})}),e.jsx("td",{style:{padding:"5px"},className:"flex items-center justify-center",children:e.jsxs("div",{className:"relative group",children:[e.jsx(F,{onClick:()=>G("/dashboard/view-order",{state:{order_id:g}}),children:e.jsx(he,{sx:{height:"22.5px",width:"22.5px",color:"var(--primary)"}})}),e.jsxs("div",{role:"tooltip",className:"absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-[var(--primary)] text-white rounded-md shadow-sm px-3 py-2 text-sm text-nowrap",style:{top:"-25px",left:"50%",transform:"translateX(-50%)"},children:["View",e.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]})]})}),e.jsx("td",{style:{padding:"5px"},className:"flex items-center justify-center",children:L&&D===g?e.jsx(F,{children:e.jsx("span",{className:"inline-block h-8 w-8 rounded-full border-[3px] border-indigo-100 border-t-indigo-600 border-r-indigo-600 animate-spin"})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative group",children:[e.jsx(F,{disabled:L,onClick:()=>z(g),children:e.jsx(te,{className:"inline-block h-9 w-9 cursor-pointer fill-[var(--primary)]"})}),e.jsxs("div",{role:"tooltip",className:"absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-[var(--primary)] text-white rounded-md shadow-sm px-3 py-2 text-sm text-nowrap",style:{top:"-25px",left:"50%",transform:"translateX(-50%)"},children:["Download",e.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]})]})})}),e.jsx("td",{style:{padding:"5px"},className:"flex items-center justify-center tooltip-style",children:e.jsxs("div",{className:"relative group",children:[e.jsx(F,{onClick:()=>X(g),children:e.jsx(ue,{className:"inline-block h-9 w-9 cursor-pointer fill-[var(--primary)]"})}),e.jsxs("div",{role:"tooltip",className:"absolute z-10 invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-[var(--primary)] text-white rounded-md shadow-sm px-3 py-2 text-sm text-nowrap",style:{top:"-25px",left:"50%",transform:"translateX(-50%)"},children:["Give Feedback",e.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]})]})})]},a)}):e.jsx("tr",{children:e.jsx("td",{className:"text-center col-span-full",children:"No record found!"})})})]}),e.jsx("div",{className:"bg-white flex items-center justify-between px-8 w-[117rem]",children:C>10&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"current-page-num",children:["Showing"," ",s===1&&"1"||(s-1)*10+1," ","to ",s===r?C:s*10," ","entries"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{className:`pagination-btn ${x===-2&&"active-page"}`,onClick:()=>{s!==1&&(h(1),u(-2))},children:e.jsx(re,{className:"page-icon"})}),e.jsx("button",{className:`pagination-btn ${x===-1&&"active-page"}`,onClick:()=>{s!==1&&(h(s-1),u(-1))},children:e.jsx(ne,{className:"page-icon"})}),e.jsx("button",{className:`pagination-btn ${x===1&&"active-page"}`,onClick:()=>{s!==1&&(h(1),u(1))},children:e.jsx("span",{className:"page-num",children:"1"})}),r>1&&e.jsx("button",{className:`pagination-btn ${x===2&&"active-page"}`,onClick:()=>{s!==2&&(h(2),u(2))},children:e.jsx("span",{className:"page-num",children:"2"})}),r>2&&e.jsx("button",{className:`pagination-btn ${x===3&&"active-page"}`,onClick:()=>{s!==3&&(h(3),u(3))},children:e.jsx("span",{className:"page-num",children:"3"})}),r>3&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"pagination-btn border-transparent",children:e.jsx("span",{className:"page-num",children:"..."})}),e.jsx("button",{className:`pagination-btn ${x===r&&"active-page"}`,onClick:()=>{s!==r&&(h(r),u(r))},children:e.jsx("span",{className:"page-num",children:r})})]}),e.jsx("button",{className:`pagination-btn ${x===100&&"active-page"}`,children:e.jsx(le,{className:"page-icon",onClick:()=>{s!==r&&(h(s+1),u(100))}})}),e.jsx("button",{className:`pagination-btn ${x===200&&"active-page"}`,children:e.jsx(oe,{className:"page-icon",onClick:()=>{s!==r&&(h(r),u(200))}})})]})]})})]})]})]}),U&&e.jsx(R,{order_id:M,setModelIsOpen:P})]})};export{Ce as default};
