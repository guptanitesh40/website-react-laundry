import{u as b,r as m,_ as h,b as v,j as s,L as f,I as y,a as S,c as k,s as L}from"./index-DCi0TphP.js";import{c as E,a as w}from"./index.esm-C25zvujW.js";const C=()=>{const n=b(),[u,o]=m.useState(!1),e="http://35.154.167.170:3000",i=5;return{login:async(p,a)=>{try{o(!0);const t=await(await fetch(`${e}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:p,password:a,role_id:i})})).json();if(t.statusCode==200)return h.success(t.message||"Login successfull",{className:"toast-success"}),localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user)),n("/"),t.data;h.error("Invalid username or password.",{className:"toast-error"})}catch{h.error("Oops! Something went wrong during the login process. Please try again.",{className:"toast-error"})}finally{o(!1)}},loading:u}},I=()=>{const n=v(),{login:u,loading:o}=C(),[e,i]=m.useState({}),[c,p]=m.useState(!1),[a,g]=m.useState({username:"",password:""}),t=l=>{const{name:r,value:d}=l.target;g({...a,[r]:d})},j=E().shape({username:w().min(10,"Username must be at least 10 characters").required("Username is required"),password:w().min(6,"Password must be at least 6 characters").required("Password is required")}),N=async l=>{l.preventDefault();try{await j.validate(a,{abortEarly:!1});const r=await u(a.username,a.password);r&&(n(k(r.user)),n(L(!!r.token))),i("")}catch(r){const d={};r.inner.forEach(x=>{d[x.path]=x.message}),i(d)}};return s.jsx("section",{className:"flex justify-center items-center p-6 h-[100vh] w-[100vw] overflow-y-auto",children:s.jsxs("form",{className:"login-form-container",children:[s.jsxs("div",{className:"flex flex-col justify-center items-center gap-8 laptop-l:gap-6",children:[s.jsx("img",{src:"sc-logo.png",alt:"Sikka Cleaner Logo",loading:"lazy",className:"h-16 w-auto laptop-l:h-14"}),s.jsx("h2",{className:"text-[2.4rem] leading-[1.5] font-bold text-[var(--black)] laptop-l:text-[2rem]",children:"Login in to your account"})]}),s.jsxs("div",{className:`flex flex-col ${e.username||e.password?"gap-6":"gap-10"}`,children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"form-label",children:"Username"}),s.jsx("div",{className:"mt-4",children:s.jsx("input",{id:"username",name:"username",placeholder:"Email or mobile number",className:"form-input",value:a.username,onChange:t})}),e.username&&s.jsx("p",{className:"error-label",children:e.username})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),s.jsx("div",{children:s.jsx(f,{to:"/forget-password",className:"forget-link","aria-label":"Forget password",title:"Forget password",children:"Forgot password ?"})})]}),s.jsxs("div",{className:"mt-2 relative",children:[s.jsx("input",{id:"password",name:"password",type:c?"text":"password",placeholder:"password",className:"form-input",value:a.password,onChange:t}),s.jsx("span",{className:"absolute inline-block top-1/2 right-4 -translate-y-1/2 cursor-pointer",onClick:()=>p(!c),children:c?s.jsx(y,{className:"h-8 w-8 fill-[#83848a]"}):s.jsx(S,{className:"h-8 w-8 fill-[#83848a]"})})]}),e.password&&s.jsx("p",{className:"error-label",children:e.password})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",className:"login-btn",title:"login","aria-label":"login",onClick:l=>N(l),disabled:o,children:o?"Logging in...":"Login"})}),s.jsxs("p",{className:"text-center text-xl text-[#83848a]",children:["Don't have any account ?",s.jsx(f,{to:"/signup",className:"ml-4 text-[#818cf8]","aria-label":"register now",title:"register",children:"Register"})]})]})})};export{I as default};
