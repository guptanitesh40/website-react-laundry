import{r as x,_ as b,aC as L,ab as Y,P as d,u as V,j as o,F as Z,aD as ee,aE as te,f as ne,aF as ae}from"./index-DAuzWvrj.js";import{c as re,a as w}from"./index.esm-fUAUudp_.js";import{b as oe}from"./index-hATH4RYe.js";const se=()=>{const[r,a]=x.useState(!1),n="http://35.154.167.170:3000",e=localStorage.getItem("token");return{addAddress:async s=>{var i;if(!e)return b.error("User is not authenticated!"),null;const l={...s,address_type:parseInt(s.address_type)};try{a(!0);const m=await fetch(`${n}/address`,{method:"POST",headers:{"Content-type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(l)}),c=await m.json();return m.ok?(b.success(c==null?void 0:c.message,{className:"toast-success"}),(i=c==null?void 0:c.data)==null?void 0:i.result):(b.error("Failed to add address!",{className:"toast-error"}),null)}catch{return b.error("Failed to add address!"),null}finally{a(!1)}},loading:r}},ie=()=>{const[r,a]=x.useState(!1),n="http://35.154.167.170:3000",e=localStorage.getItem("token");return{loading:r,editAddress:async(s,l)=>{if(!e)return b.error("User is not authenticated!"),null;const i={...s,address_type:Number(s.address_type),pincode:String(s.pincode),lat:Number(s.lat),long:Number(s.long)};try{a(!0);const m=await fetch(`${n}/address/${l}`,{method:"PUT",headers:{"Content-type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(i)}),c=await m.json();return m.ok?(b.success(c.message),c):(b.error(c.message,{style:{maxWidth:"700px"}}),null)}catch{return b.error("Unable to update address"),null}finally{a(!1)}}}};var A={},$={},le="Expected a function",W=NaN,ce="[object Symbol]",ue=/^\s+|\s+$/g,de=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,me=/^0o[0-7]+$/i,pe=parseInt,fe=typeof L=="object"&&L&&L.Object===Object&&L,he=typeof self=="object"&&self&&self.Object===Object&&self,be=fe||he||Function("return this")(),ye=Object.prototype,ve=ye.toString,xe=Math.max,Se=Math.min,B=function(){return be.Date.now()};function we(r,a,n){var e,t,s,l,i,m,c=0,F=!1,S=!1,I=!0;if(typeof r!="function")throw new TypeError(le);a=z(a)||0,U(n)&&(F=!!n.leading,S="maxWait"in n,s=S?xe(z(n.maxWait)||0,a):s,I="trailing"in n?!!n.trailing:I);function p(u){var h=e,g=t;return e=t=void 0,c=u,l=r.apply(g,h),l}function _(u){return c=u,i=setTimeout(P,a),F?p(u):l}function q(u){var h=u-m,g=u-c,v=a-h;return S?Se(v,s-g):v}function k(u){var h=u-m,g=u-c;return m===void 0||h>=a||h<0||S&&g>=s}function P(){var u=B();if(k(u))return T(u);i=setTimeout(P,q(u))}function T(u){return i=void 0,I&&e?p(u):(e=t=void 0,l)}function y(){i!==void 0&&clearTimeout(i),c=0,e=m=t=i=void 0}function D(){return i===void 0?l:T(B())}function E(){var u=B(),h=k(u);if(e=arguments,t=this,m=u,h){if(i===void 0)return _(m);if(S)return i=setTimeout(P,a),p(m)}return i===void 0&&(i=setTimeout(P,a)),l}return E.cancel=y,E.flush=D,E}function U(r){var a=typeof r;return!!r&&(a=="object"||a=="function")}function je(r){return!!r&&typeof r=="object"}function _e(r){return typeof r=="symbol"||je(r)&&ve.call(r)==ce}function z(r){if(typeof r=="number")return r;if(_e(r))return W;if(U(r)){var a=typeof r.valueOf=="function"?r.valueOf():r;r=U(a)?a+"":a}if(typeof r!="string")return r===0?r:+r;r=r.replace(ue,"");var n=ge.test(r);return n||me.test(r)?pe(r.slice(2),n?2:8):de.test(r)?W:+r}var Ae=we,M={};Object.defineProperty(M,"__esModule",{value:!0});M.compose=function(){for(var a=arguments.length,n=Array(a),e=0;e<a;e++)n[e]=arguments[e];return function(){for(var t=arguments.length,s=Array(t),l=0;l<t;l++)s[l]=arguments[l];n.forEach(function(i){return i&&i.apply(void 0,s)})}};M.pick=function(a){for(var n=arguments.length,e=Array(n>1?n-1:0),t=1;t<n;t++)e[t-1]=arguments[t];return e.reduce(function(s,l){return a&&a.hasOwnProperty(l)&&(s[l]=a[l]),s},{})};Object.defineProperty($,"__esModule",{value:!0});var O=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(r[e]=n[e])}return r},Ne=function(){function r(a,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}return function(a,n,e){return n&&r(a.prototype,n),e&&r(a,e),a}}(),Ie=x,ke=R(Ie),Pe=Y,f=R(Pe),Oe=Ae,Ee=R(Oe),j=M;function R(r){return r&&r.__esModule?r:{default:r}}function Ce(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function Fe(r,a){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:r}function Te(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(r,a):r.__proto__=a)}var Le=function(a){return{mainText:a.main_text,secondaryText:a.secondary_text}},K=function(r){Te(a,r);function a(n){Ce(this,a);var e=Fe(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,n));return e.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");e.autocompleteService=new window.google.maps.places.AutocompleteService,e.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,e.setState(function(t){return t.ready?null:{ready:!0}})},e.autocompleteCallback=function(t,s){if(e.setState({loading:!1}),s!==e.autocompleteOK){e.props.onError(s,e.clearSuggestions);return}var l=e.props.highlightFirstSuggestion;e.setState({suggestions:t.map(function(i,m){return{id:i.id,description:i.description,placeId:i.place_id,active:!!(l&&m===0),index:m,formattedSuggestion:Le(i.structured_formatting),matchedSubstrings:i.matched_substrings,terms:i.terms,types:i.types}})})},e.fetchPredictions=function(){var t=e.props.value;t.length&&(e.setState({loading:!0}),e.autocompleteService.getPlacePredictions(O({},e.props.searchOptions,{input:t}),e.autocompleteCallback))},e.clearSuggestions=function(){e.setState({suggestions:[]})},e.clearActive=function(){e.setState({suggestions:e.state.suggestions.map(function(t){return O({},t,{active:!1})})})},e.handleSelect=function(t,s,l){e.clearSuggestions(),e.props.onSelect?e.props.onSelect(t,s,l):e.props.onChange(t)},e.getActiveSuggestion=function(){return e.state.suggestions.find(function(t){return t.active})},e.selectActiveAtIndex=function(t){var s=e.state.suggestions.find(function(l){return l.index===t}).description;e.setActiveAtIndex(t),e.props.onChange(s)},e.selectUserInputValue=function(){e.clearActive(),e.props.onChange(e.state.userInputValue)},e.handleEnterKey=function(){var t=e.getActiveSuggestion();t===void 0?e.handleSelect(e.props.value,null,null):e.handleSelect(t.description,t.placeId,t)},e.handleDownKey=function(){if(e.state.suggestions.length!==0){var t=e.getActiveSuggestion();t===void 0?e.selectActiveAtIndex(0):t.index===e.state.suggestions.length-1?e.selectUserInputValue():e.selectActiveAtIndex(t.index+1)}},e.handleUpKey=function(){if(e.state.suggestions.length!==0){var t=e.getActiveSuggestion();t===void 0?e.selectActiveAtIndex(e.state.suggestions.length-1):t.index===0?e.selectUserInputValue():e.selectActiveAtIndex(t.index-1)}},e.handleInputKeyDown=function(t){switch(t.key){case"Enter":t.preventDefault(),e.handleEnterKey();break;case"ArrowDown":t.preventDefault(),e.handleDownKey();break;case"ArrowUp":t.preventDefault(),e.handleUpKey();break;case"Escape":e.clearSuggestions();break}},e.setActiveAtIndex=function(t){e.setState({suggestions:e.state.suggestions.map(function(s,l){return l===t?O({},s,{active:!0}):O({},s,{active:!1})})})},e.handleInputChange=function(t){var s=t.target.value;if(e.props.onChange(s),e.setState({userInputValue:s}),!s){e.clearSuggestions();return}e.props.shouldFetchSuggestions&&e.debouncedFetchPredictions()},e.handleInputOnBlur=function(){e.mousedownOnSuggestion||e.clearSuggestions()},e.getActiveSuggestionId=function(){var t=e.getActiveSuggestion();return t?"PlacesAutocomplete__suggestion-"+t.placeId:void 0},e.getIsExpanded=function(){return e.state.suggestions.length>0},e.getInputProps=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(t.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var s={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":e.getIsExpanded(),"aria-activedescendant":e.getActiveSuggestionId(),disabled:!e.state.ready};return O({},s,t,{onKeyDown:(0,j.compose)(e.handleInputKeyDown,t.onKeyDown),onBlur:(0,j.compose)(e.handleInputOnBlur,t.onBlur),value:e.props.value,onChange:function(i){e.handleInputChange(i)}})},e.getSuggestionItemProps=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=e.handleSuggestionMouseEnter.bind(e,t.index),i=e.handleSuggestionClick.bind(e,t);return O({},s,{key:t.id,id:e.getActiveSuggestionId(),role:"option",onMouseEnter:(0,j.compose)(l,s.onMouseEnter),onMouseLeave:(0,j.compose)(e.handleSuggestionMouseLeave,s.onMouseLeave),onMouseDown:(0,j.compose)(e.handleSuggestionMouseDown,s.onMouseDown),onMouseUp:(0,j.compose)(e.handleSuggestionMouseUp,s.onMouseUp),onTouchStart:(0,j.compose)(e.handleSuggestionTouchStart,s.onTouchStart),onTouchEnd:(0,j.compose)(e.handleSuggestionMouseUp,s.onTouchEnd),onClick:(0,j.compose)(i,s.onClick)})},e.handleSuggestionMouseEnter=function(t){e.setActiveAtIndex(t)},e.handleSuggestionMouseLeave=function(){e.mousedownOnSuggestion=!1,e.clearActive()},e.handleSuggestionMouseDown=function(t){t.preventDefault(),e.mousedownOnSuggestion=!0},e.handleSuggestionTouchStart=function(){e.mousedownOnSuggestion=!0},e.handleSuggestionMouseUp=function(){e.mousedownOnSuggestion=!1},e.handleSuggestionClick=function(t,s){s&&s.preventDefault&&s.preventDefault();var l=t.description,i=t.placeId;e.handleSelect(l,i,t),setTimeout(function(){e.mousedownOnSuggestion=!1})},e.state={loading:!1,suggestions:[],userInputValue:n.value,ready:!n.googleCallbackName},e.debouncedFetchPredictions=(0,Ee.default)(e.fetchPredictions,n.debounce),e}return Ne(a,[{key:"componentDidMount",value:function(){var e=this.props.googleCallbackName;if(e){var t=window.google&&window.google.maps&&window.google.maps.places;t?this.init():window[e]=this.init}else this.init()}},{key:"componentWillUnmount",value:function(){var e=this.props.googleCallbackName;e&&window[e]&&delete window[e]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),a}(ke.default.Component);K.propTypes={onChange:f.default.func.isRequired,value:f.default.string.isRequired,children:f.default.func.isRequired,onError:f.default.func,onSelect:f.default.func,searchOptions:f.default.shape({bounds:f.default.object,componentRestrictions:f.default.object,location:f.default.object,offset:f.default.oneOfType([f.default.number,f.default.string]),radius:f.default.oneOfType([f.default.number,f.default.string]),types:f.default.array}),debounce:f.default.number,highlightFirstSuggestion:f.default.bool,shouldFetchSuggestions:f.default.bool,googleCallbackName:f.default.string};K.defaultProps={onError:function(a,n){return console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,a)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0};$.default=K;var C={};Object.defineProperty(C,"__esModule",{value:!0});C.geocodeByAddress=function(a){var n=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(t,s){n.geocode({address:a},function(l,i){i!==e&&s(i),t(l)})})};C.getLatLng=function(a){return new Promise(function(n,e){try{var t={lat:a.geometry.location.lat(),lng:a.geometry.location.lng()};n(t)}catch(s){e(s)}})};C.geocodeByPlaceId=function(a){var n=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(t,s){n.geocode({placeId:a},function(l,i){i!==e&&s(i),t(l)})})};Object.defineProperty(A,"__esModule",{value:!0});var J=A.getLatLng=A.geocodeByPlaceId=H=A.geocodeByAddress=void 0,Me=$,qe=De(Me),G=C;function De(r){return r&&r.__esModule?r:{default:r}}var H=A.geocodeByAddress=G.geocodeByAddress;A.geocodeByPlaceId=G.geocodeByPlaceId;J=A.getLatLng=G.getLatLng;var Be=A.default=qe.default;const Ue=re().shape({full_name:w().trim().min(6,"Full name must be at least 2 characters").max(50,"Full name cannot exceed 50 characters").required("Full name is required"),phone_number:w().matches(/^[0-9]{10}$/,"Phone number must be exactly 10 digits").required("Phone number is required"),address_type:w().required("Address type is require"),building_number:w().trim().required("Building number is required"),area:w().trim().required("Area is required"),landmark:w().trim().required("Landmark is required"),city:w().trim().required("City is required"),state:w().trim().required("State is required"),country:w().trim().required("Country is required"),pincode:w().matches(/^\d{6}$/,"Pincode must be exactly 6 digits").required("Pincode is required")}),$e=({setIsOpen:r,isOpen:a,address:n,isEditMode:e})=>{const t=V(),{addAddress:s,loading:l}=se(),{editAddress:i,loading:m}=ie(),[c,F]=x.useState({}),[S,I]=x.useState({visible:!1,status:!1}),[p,_]=x.useState({full_name:"",phone_number:"",address_type:"1",building_number:"",area:"",lat:"",long:"",landmark:"",pincode:"",city:"",state:"",country:""}),[q,k]=x.useState(!1),P=u=>{_({...p,area:u}),k(!0)},T=async u=>{I({...S,status:!0}),_({...p,area:u});try{const h=await H(u),g=await J(h[0]);g&&_(v=>({...v,lat:g==null?void 0:g.lat,long:g==null?void 0:g.lng}))}catch{b.error("Failed to fetch address detail",{className:"toast-error"})}},y=u=>{const{name:h,value:g}=u.target;_({...p,[h]:g})},D=async u=>{u.preventDefault(),S.status||I({...S,visible:!0});try{await Ue.validate(p,{abortEarly:!1})}catch(g){if(g.inner){const v={};g.inner.forEach(N=>{v[N.path]=N.message}),F(v)}return}if(e){const{address_id:g}=n;if(await i(p,g)){t(ee({formData:p,address_id:g})),r(!1);return}return}const h=await s(p);h&&(t(te(h)),r(!1))},E=()=>{r(!1),_({address_type:"1",full_name:"",phone_number:"",building_number:"",area:"",landmark:"",pincode:"",city:"",state:"",country:""})};return x.useEffect(()=>{n&&_({full_name:n==null?void 0:n.full_name,phone_number:n==null?void 0:n.phone_number,address_type:n==null?void 0:n.address_type,building_number:n==null?void 0:n.building_number,area:n==null?void 0:n.area,lat:n==null?void 0:n.lat,long:n==null?void 0:n.long,landmark:n==null?void 0:n.landmark,pincode:n==null?void 0:n.pincode,city:n==null?void 0:n.city,state:n==null?void 0:n.state,country:n==null?void 0:n.country})},[]),o.jsx("section",{className:`fixed inset-0 p-8 bg-black bg-opacity-75 grid place-items-center min-h-screen w-full overflow-auto z-50 mb-l:p-6 ${a?"block":"hidden"}`,children:o.jsxs("div",{className:"w-full max-w-[60rem] bg-white shadow-2xl p-12 pb-16 rounded-2xl tab-l:rounded-xl mb-l:rounded-lg mb-l:p-10 mb:p-8",children:[o.jsxs("div",{className:"mb-10 flex justify-between items-center flex-wrap tab-l:mb-8",children:[o.jsx("h2",{className:"text-[2.4rem] leading-[1] text-[var(--black)] tab-l:text-[2rem]",children:e?"Edit Address":"Add New Address"}),o.jsx("button",{type:"button",title:"close",className:"border border-gray-300 rounded-md inline-flex items-center justify-center text-gray-400 focus:outline-none focus:border-indigo-500 shadow-2xl h-10 w-10",onClick:E,children:o.jsx(oe,{className:"h-8 w-8 tab-s:h-6 tab-s:w-6"})})]}),o.jsxs("form",{onSubmit:D,className:"grid grid-cols-[repeat(auto-fill,_minmax(25rem,_1fr))] w-full gap-x-10 gap-y-12 tab-s:gap-10 mb-l:grid-cols-1 mb:gap-8",children:[o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{htmlFor:"full_name",className:"aam-label",children:"Fullname"}),o.jsxs("div",{children:[o.jsx("input",{name:"full_name",id:"full_name",type:"text",onChange:y,value:p.full_name,className:"aam-input"}),c.full_name&&o.jsx("p",{className:"aam-error-label",children:c.full_name})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{htmlFor:"phone_number",className:"aam-label",children:"Phone number"}),o.jsxs("div",{children:[o.jsx("input",{name:"phone_number",id:"phone_number",type:"text",onChange:y,value:p.phone_number,className:"aam-input"}),c.phone_number&&o.jsx("p",{className:"aam-error-label",children:c.phone_number})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{htmlFor:"address_type",className:"aam-label",children:"Address type"}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{name:"address_type",id:"address_type",className:"aam-input appearance-none",onChange:y,value:Number(p.address_type),children:[o.jsx("option",{value:1,children:"home"}),o.jsx("option",{value:2,children:"Office"}),o.jsx("option",{value:3,children:"Other"})]}),o.jsx(Z,{className:"absolute top-1/2 right-3 transform -translate-y-1/2 text-gray-500 pointer-events-none"}),c.address_type&&o.jsx("p",{className:"aam-error-label",children:c.address_type})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{htmlFor:"building_number",className:"aam-label",children:"Building number"}),o.jsxs("div",{children:[o.jsx("input",{name:"building_number",id:"building_number",type:"text",onChange:y,value:p.building_number,className:"aam-input"}),c.building_number&&o.jsx("p",{className:"aam-error-label",children:c.building_number})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{htmlFor:"area",className:"aam-label",children:"area"}),o.jsxs("div",{className:"relative",children:[o.jsx(Be,{value:p.area,onChange:P,onSelect:T,children:({getInputProps:u,suggestions:h,getSuggestionItemProps:g,loading:v})=>o.jsxs(o.Fragment,{children:[o.jsx("input",{...u({className:"aam-input",id:"area",type:"text",onFocus:()=>k(!0),onBlur:()=>k(!1)})}),q&&h.length>0&&o.jsx("div",{className:"absolute z-10 bg-white rounded-lg shadow-lg w-full mt-1 border border-gray-200 laptop-l:mt-1 max-h-[150px] overflow-y-auto",children:o.jsxs("ul",{className:"text-[1.4rem] font-normal text-[var(--black)]",children:[v&&o.jsx("li",{className:"block px-4 py-[0.8rem] hover:bg-gray-100",children:"Loading..."}),!v&&h.map((N,X)=>{const{...Q}=g(N);return o.jsx("li",{...Q,className:"block px-4 py-[0.8rem] hover:bg-gray-100",children:N==null?void 0:N.description},X)})]})})]})}),c.area&&o.jsx("p",{className:"aam-error-label",children:c.area})||S.visible&&o.jsx("p",{className:"aam-error-label",children:"please select valid area from dropdown"})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{htmlFor:"landmark",className:"aam-label",children:"landmark"}),o.jsxs("div",{children:[o.jsx("input",{name:"landmark",id:"landmark",type:"text",onChange:y,value:p.landmark,className:"aam-input"}),c.landmark&&o.jsx("p",{className:"aam-error-label",children:c.landmark})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{htmlFor:"pincode",className:"aam-label",children:"pincode"}),o.jsxs("div",{children:[o.jsx("input",{name:"pincode",id:"pincode",type:"text",onChange:y,value:p.pincode,className:"aam-input"}),c.pincode&&o.jsx("p",{className:"aam-error-label",children:c.pincode})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{htmlFor:"city",className:"self-start text-[1.2rem] text-[var(--black)]",children:"city"}),o.jsxs("div",{children:[o.jsx("input",{name:"city",id:"city",type:"text",onChange:y,value:p.city,className:"aam-input"}),c.city&&o.jsx("p",{className:"aam-error-label",children:c.city})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{htmlFor:"state",className:"aam-label",children:"state"}),o.jsxs("div",{children:[o.jsx("input",{name:"state",id:"state",type:"text",onChange:y,value:p.state,className:"aam-input"}),c.state&&o.jsx("p",{className:"aam-error-label",children:c.state})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{htmlFor:"country",className:"aam-label",children:"country"}),o.jsx("input",{name:"country",id:"country",type:"text",onChange:y,value:p.country,className:"aam-input"}),c.country&&o.jsx("p",{className:"aam-error-label",children:c.country})]}),o.jsx("div",{className:"flex justify-start items-end",children:o.jsx("button",{type:"submit",className:"text-white bg-primary text-[1.4rem] font-medium px-6 py-4 rounded-md flex gap-4 items-center",disabled:l||m,children:e?m?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"inline-block h-10 w-10 rounded-full border-4 border-t-white border-white/30 animate-spin"}),o.jsx("span",{children:"Processing..."})]}):"Edit Address":l?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"inline-block h-10 w-10 rounded-full border-4 border-t-white border-white/30 animate-spin"}),o.jsx("span",{children:"Processing..."})]}):"Add Address"})})]})]})})};$e.propTypes={setIsOpen:d.func.isRequired,isOpen:d.bool.isRequired,address:d.shape({address_id:d.number,full_name:d.string,phone_number:d.string,address_type:d.oneOfType([d.number,d.string]),building_number:d.string,area:d.string,lat:d.oneOfType([d.number,d.string]),long:d.oneOfType([d.number,d.string]),landmark:d.string,pincode:d.oneOfType([d.number,d.string]),city:d.string,state:d.string,country:d.string}),isEditMode:d.bool.isRequired};const We=()=>{const[r,a]=x.useState(!1),n="http://35.154.167.170:3000",e=localStorage.getItem("token");return{deleteAddress:async s=>{if(!s){b.error("Address Id is required to delete address");return}try{a(!0);const l=await fetch(`${n}/address/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}}),i=await l.json();return l.ok?(b.success((i==null?void 0:i.message)||"Address deleted successfully"),i==null?void 0:i.data):null}catch{return b.error("Unable to delete address, please try again later!"),null}finally{a(!1)}},loading:r}},ze=()=>{const r=V(),a=ne(l=>{var i;return(i=l==null?void 0:l.auth)==null?void 0:i.isAuthenticated}),[n,e]=x.useState(!0),t="http://35.154.167.170:3000",s=localStorage.getItem("token");return x.useEffect(()=>{if(!a||!s){e(!1);return}(async()=>{var i;try{const m=await fetch(`${t}/address`,{method:"GET",headers:{Authorization:`Bearer ${s}`}}),c=await m.json();m.ok?r(ae((i=c==null?void 0:c.data)==null?void 0:i.result)):b.error("Failed to fetch address data!")}catch{b.error("Failed to fetch address data!")}finally{e(!1)}})()},[a,t,r,s]),{loading:n}};export{$e as A,We as a,ze as u};
