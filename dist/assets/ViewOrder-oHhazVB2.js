import{_ as v,r as p,a2 as z,A as G,j as e,ai as R,a3 as _}from"./index-CRLLXnfL.js";import{u as q}from"./useDownloadInvoice-Bm2wrP0Y.js";import{L as K}from"./Loading-CtOFaDqr.js";const U=()=>{const i="http://3.110.208.70:3000",c=localStorage.getItem("token");return{getOrderDetail:async r=>{try{const l=await fetch(`${i}/orders/${r}`,{method:"GET",headers:{Authorization:`Bearer ${c}`}}),m=await l.json();return l.ok?m.data:(v.error("Failed to fetch order details. Please check your connection and try again.",{className:"toast-error"}),!1)}catch{return v.error("Failed to retrieve the order details. Please try again later.",{className:"toast-error"}),!1}}}},Q=()=>{const[i,c]=p.useState(!0),a=z(),r=G(),{getOrderDetail:l}=U(),[m,w]=p.useState([]),{downloadInvoice:k,loading:D}=q();p.useEffect(()=>{a!=null&&a.state?(async()=>{const n=await l(a.state.order_id);n&&(w(n),c(!1))})():r("/dashboard/home")},[a,r]);const F={1:"Cash on delivery",2:"Online payement"},O={1:"Pending payement",2:"Full payement received",3:"Partial payement received"},C=async()=>{await k(a.state.order_id)},{order_id:E,express_delivery_charges:b,items:s=[],sub_total:M=0,normal_delivery_charges:x,kasar_amount:h,coupon_code:f,coupon_discount:g=0,total:T=0,order_status:t,branch:j={},address_details:Y,payment_type:P,payment_status:I,transaction_id:S,estimated_pickup_time:L,estimated_delivery_time:$}=m,{branch_name:d,branch_phone_number:y}=j;return i?e.jsx(K,{}):e.jsxs("div",{className:"flex flex-col gap-8 tab-s:gap-6",children:[e.jsxs("div",{className:"text-[1.8rem] leading-[4rem] text-[var(--black)] font-semibold py-4 px-6 rounded-xl bg-white border border-[#b9bccf4d] flex items-center justify-between shadow-sm laptop-s:text-[1.6rem] laptop-s:leading-[3rem] laptop-s:rounded-lg tab-s:p-4 tab-s:text-[1.5rem]",children:[e.jsxs("span",{children:["Order Details : #",E]}),t===11&&e.jsx("span",{className:"flex justify-center items-center h-14 w-14 p-3 bg-gray-100 rounded-full border border-[#b9bccf4d] cursor-pointer laptop-s:h-12 laptop-s:w-12 laptop-s:p-2",onClick:C,children:D?e.jsx("span",{className:"inline-block h-7 w-7 rounded-full border-2 border-indigo-100 border-t-indigo-600 border-r-indigo-600 animate-spin"}):e.jsx(R,{className:"h-full w-full fill-[var(--primary)]"})}),t===12||t===13&&e.jsx("span",{className:"self-center border border-secondary text-[1.4rem] leading-[1.25] font-normal rounded-lg text-secondary p-3",children:"This order is cancelled"})]}),e.jsxs("div",{className:"grid grid-cols-2 laptop:grid-cols-1 gap-8 tab-s:gap-6",children:[e.jsxs("div",{className:"space-y-8 tab-s:space-y-6",children:[e.jsxs("div",{className:"py-10 px-12 common-container shadow-sm tab-s:py-8 tab-s:px-10 tab:py-6 tab:px-8 mb-l:py-4 mb-l:px-6",children:[e.jsxs("div",{className:"flex justify-between items-center gap-8 mb-4",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium tab-l:text-[1.5rem] tab-s:text-[1.4rem]",children:"Order items"}),e.jsxs("span",{className:"text-[#676788] text-2xl font-medium tab-l:text-xl tab-s:text-lg",children:["Total items : ",s==null?void 0:s.length]})]}),e.jsx("div",{className:"flex flex-col gap-6 max-h-[50rem] overflow-y-auto -mr-12 pr-12 scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 tab-s:-mr-10 tab-s:pr-10 tab:gap-4 tab:-mr-8 tab:pr-8 tab:overflow-x-auto tab:max-h-[37.5rem] mb-l:-mr-6 mb-l:pr-6 mb-l:max-h-[51rem]",children:s==null?void 0:s.map(N=>{const{item_id:n,product:u,category:A,quantity:B,service:o}=N;return e.jsx("div",{className:"border border-[#b9bccf4d] rounded-lg py-3 px-4 bg-slate-50 tab:bg-",children:e.jsxs("div",{className:"flex justify-between items-center mb-l:gap-3 mb-l:flex-col",children:[e.jsxs("div",{className:"flex justify-start gap-6 tab:gap-4 mb-l:flex-col mb-l:items-center mb-l:gap-3",children:[e.jsx("img",{src:u.image,alt:"product image",className:"inline-block h-24 w-24 rounded-lg tab:h-20 tab:w-20 mb-l:h-24 mb-l:w-24"}),e.jsxs("div",{className:"flex flex-col justify-evenly mb-l:gap-2 mb-l:items-center",children:[e.jsxs("h3",{className:"text-[1.2rem] font-medium leading-[1.5]",children:[u.name," (",`${B}x`,")"]}),e.jsxs("h4",{className:"text-[1.2rem] text-[#78829d] font-normal leading-[1.5]",children:["Category: ",A.name]})]})]}),e.jsxs("span",{className:"text-lg text-[var(--secondary)] border-[0.5px] border-green-500 p-2 rounded-lg",children:[e.jsxs("span",{className:"tab:hidden mb-l:inline-block",children:["Service :"," "]}),e.jsx("span",{children:o==null?void 0:o.name})]})]})},n)})})]}),e.jsxs("div",{className:"common-container shadow-sm",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium py-6 px-12 border-b border-[#b9bccf4d] tab-l:text-[1.5rem] tab-s:px-10 tab-s:text-[1.4rem] tab:px-8 mb-l:py-4 mb-l:px-6",children:"Order summary"}),e.jsx("div",{className:"py-8 px-12 tab-s:px-10 tab:px-8 tab:py-6 mb-l:py-4 mb-l:px-6",children:e.jsxs("div",{className:"grid grid-cols-[20rem_1fr] gap-8 font-normal tab-s:grid-cols-[17.5rem_1fr] tab:gap-6 mb-l:gap-4 mb-l:grid-cols-[repeat(auto-fill,_minmax(12.5rem,_1fr))]",children:[e.jsx("span",{className:"info-label",children:"Sub Total"}),e.jsxs("span",{className:"info-ans",children:["₹",M||"0"]}),x>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Shipping charges"}),e.jsxs("span",{className:"info-ans",children:["₹",x]})]}),b>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Express Delivery Charges"}),e.jsxs("span",{className:"info-ans",children:["₹",b]})]}),h>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Kasar amount"}),e.jsxs("span",{className:"info-ans",children:["₹",h]})]}),f&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Coupon Code"}),e.jsx("span",{className:"info-ans",children:f})]}),g>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Coupon Discount"}),e.jsxs("span",{className:"info-ans",children:["₹",g||"0"]})]}),e.jsx("span",{className:"info-label",children:"Total"}),e.jsxs("span",{className:"info-ans",children:["₹",T||"0"]})]})})]})]}),e.jsxs("div",{className:"space-y-8 tab-s:space-y-6",children:[e.jsxs("div",{className:"common-container shadow-sm",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium py-6 px-12 border-b border-[#b9bccf4d] tab-l:text-[1.5rem] tab-s:px-10 tab-s:text-[1.4rem] tab:px-8 mb-l:py-4 mb-l:px-6",children:"Branch information"}),e.jsx("div",{className:"text-[1.4rem] text-[var(--black)] font-medium py-8 px-12 tab-s:px-10 tab:px-8 tab:py-6 mb-l:py-4 mb-l:px-6",children:e.jsxs("div",{className:"grid grid-cols-[20rem_1fr] gap-8 font-normal tab-s:grid-cols-[15rem_1fr] tab:grid-cols-[12.5rem_1fr] tab:gap-6 mb-l:gap-4 mb-l:grid-cols-[repeat(auto-fill,_minmax(13.5rem,_1fr))]",children:[!j&&e.jsx(e.Fragment,{children:e.jsx("span",{className:"info-label",children:"No branch assigned"})}),d&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Name"}),e.jsx("span",{className:"info-ans",children:d})]}),d&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Email"}),e.jsx("span",{className:"info-ans",children:"Branchname@gmail.com"})]}),y&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Mobile Number"}),e.jsx("span",{className:"info-ans",children:y})]})]})})]}),e.jsxs("div",{className:"common-container py-8 px-12 space-y-4 shadow-sm tab-s:px-10 tab:px-8 tab:py-6 tab:space-y-3 mb-l:py-4 mb-l:px-6",children:[e.jsx("h3",{className:"text-[1.6rem] text-[var(--black)] font-medium capitalize tab-l:text-[1.5rem] tab-s:text-[1.4rem]",children:"shipping address"}),e.jsx("p",{className:"info-label address",children:Y})]}),e.jsxs("div",{className:"common-container shadow-sm",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium py-6 px-12 border-b border-[#b9bccf4d] tab-l:text-[1.5rem] tab-s:px-10 tab-s:text-[1.4rem] tab:px-8 mb-l:py-4 mb-l:px-6",children:"Payement information"}),e.jsx("div",{className:"py-8 px-12 tab-s:px-10 tab:px-8 tab:py-6 mb-l:py-4 mb-l:px-6",children:e.jsxs("div",{className:"grid grid-cols-[20rem_1fr] gap-8 font-normal tab-s:grid-cols-[15rem_1fr] tab:grid-cols-[12.5rem_1fr] tab:gap-6 mb-l:gap-4 mb-l:grid-cols-[repeat(auto-fill,_minmax(12.5rem,_1fr))]",children:[e.jsx("span",{className:"info-label",children:"payement type"}),e.jsx("span",{className:"info-ans",children:F[P]}),e.jsx("span",{className:"info-label",children:"payement status"}),e.jsx("span",{className:"info-ans",children:O[I]}),e.jsx("span",{className:"info-label",children:"Transaction ID"}),e.jsx("span",{className:"info-ans",children:S||"N/A"})]})})]}),e.jsxs("div",{className:"common-container shadow-sm",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium py-6 px-12 border-b border-[#b9bccf4d] tab-l:text-[1.5rem] tab-s:px-10 tab-s:text-[1.4rem] tab:px-8 mb-l:py-4 mb-l:px-6",children:"Estimated Delivery & Pickup"}),e.jsx("div",{className:"py-8 px-12 tab-s:px-10 tab:px-8 tab:py-6 mb-l:py-4 mb-l:px-6",children:e.jsxs("div",{className:"grid grid-cols-[20rem_1fr] gap-8 font-normal tab-s:grid-cols-[17.5rem_1fr] tab:grid-cols-[16rem_1fr] tab:gap-6 mb-l:gap-4 mb-l:grid-cols-[repeat(auto-fill,_minmax(15rem,_1fr))]",children:[t!==11&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Estimated Pickup Time:"}),e.jsx("span",{className:"info-ans",children:_(L).format("DD/MM/YYYY")})]}),e.jsx("span",{className:"info-label",children:"Estimated Delivery Time:"}),e.jsx("span",{className:"info-ans",children:_($).format("DD/MM/YYYY")})]})})]})]})]})]})};export{Q as default};
