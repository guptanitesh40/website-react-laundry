import{_ as C,r as f,B as Q,A as U,j as e,ai as V,a3 as j}from"./index-DoP6QDOR.js";import{u as J}from"./useDownloadInvoice-erxKUWGe.js";import{L as W}from"./Loading-Djx_h4qy.js";const X=()=>{const p="http://35.154.167.170:3000",b=localStorage.getItem("token");return{getOrderDetail:async m=>{try{const c=await fetch(`${p}/orders/${m}`,{method:"GET",headers:{Authorization:`Bearer ${b}`}}),h=await c.json();return c.ok?h.data:(C.error("Failed to fetch order details. Please check your connection and try again.",{className:"toast-error"}),!1)}catch{return C.error("Failed to retrieve the order details. Please try again later.",{className:"toast-error"}),!1}}}},se=()=>{const[p,b]=f.useState(!0),s=Q(),m=U(),{getOrderDetail:c}=X(),[h,M]=f.useState([]),{downloadInvoice:E,loading:N}=J();f.useEffect(()=>{s!=null&&s.state?(async()=>{const n=await c(s.state.order_id);n&&(M(n),b(!1))})():m("/dashboard/home")},[s,m]);const T={1:"Cash on delivery",2:"Online payement"},I={1:"Pending payment",2:"Full payment received",3:"Partial payment received"},P=async()=>{await E(s.state.order_id)},{order_id:S,express_delivery_charges:u,items:r=[],sub_total:L=0,normal_delivery_charges:y,kasar_amount:v,coupon_code:_,coupon_discount:w=0,total:$=0,order_status:l,branch:D={},address_details:A,payment_type:B,payment_status:G,transaction_id:z,estimated_pickup_time:H,estimated_delivery_time:R,order_status_name:q,gst_company_name:k,gstin:F,order_notes:t}=h,{branch_name:g,branch_phone_number:O,branch_email:K}=D;return p?e.jsx(W,{}):e.jsxs("div",{className:"flex flex-col gap-8 tab-s:gap-6",children:[e.jsxs("div",{className:"text-[1.8rem] leading-[4rem] text-[var(--black)] font-semibold py-4 px-6 rounded-xl bg-white border border-[#b9bccf4d] flex flex-wrap items-start justify-between gap-y-4 shadow-sm laptop-s:text-[1.6rem] laptop-s:leading-[3rem] laptop-s:rounded-lg tab-s:p-4 tab-s:text-[1.5rem]",children:[e.jsxs("span",{className:"w-full sm:w-auto",children:["Order Details : #",S]}),(l===12||l===13)&&e.jsx("span",{className:"w-full sm:w-auto self-center border border-secondary text-[1.4rem] leading-[1.25] font-normal rounded-lg text-secondary p-3",children:"This order is cancelled"}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center gap-4 sm:gap-5 w-full sm:w-auto",children:[e.jsx("span",{className:`px-4 py-1 rounded-lg font-medium text-[1rem] leading-[2.4rem] order-status-label-${l>=4&&l<9?0:l}`,children:q}),e.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg border border-gray-200 bg-white text-gray-700 hover:border-gray-300 transition-all duration-200 shadow-sm",onClick:P,disabled:N,children:[N?e.jsx("span",{className:"h-6 w-6 animate-spin rounded-full border-2 border-indigo-200 border-t-indigo-600"}):e.jsx(V,{className:"h-6 w-6 text-indigo-600"}),e.jsx("span",{className:"text-base font-medium",children:"Download Invoice"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 laptop:grid-cols-1 gap-8 tab-s:gap-6",children:[e.jsxs("div",{className:"space-y-8 tab-s:space-y-6",children:[e.jsxs("div",{className:"py-10 px-12 common-container shadow-sm tab-s:py-8 tab-s:px-10 tab:py-6 tab:px-8 mb-l:py-4 mb-l:px-6",children:[e.jsxs("div",{className:"flex justify-between items-center gap-8 mb-4",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium tab-l:text-[1.5rem] tab-s:text-[1.4rem]",children:"Order items"}),e.jsxs("span",{className:"text-[#676788] text-2xl font-medium tab-l:text-xl tab-s:text-lg",children:["Total items : ",r==null?void 0:r.length]})]}),e.jsx("div",{className:"flex flex-col gap-6 max-h-[50rem] overflow-y-auto -mr-12 pr-12 scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 tab-s:-mr-10 tab-s:pr-10 tab:gap-4 tab:-mr-8 tab:pr-8 tab:overflow-x-auto tab:max-h-[37.5rem] mb-l:-mr-6 mb-l:pr-6 mb-l:max-h-[51rem]",children:r==null?void 0:r.map(a=>{const{item_id:n,product:d,category:o,quantity:x,service:i}=a;return e.jsx("div",{className:"border border-[#b9bccf4d] rounded-lg py-3 px-4 bg-slate-50 tab:bg-",children:e.jsxs("div",{className:"flex justify-between items-center mb-l:gap-3 mb-l:flex-col",children:[e.jsxs("div",{className:"flex justify-start gap-6 tab:gap-4 mb-l:flex-col mb-l:items-center mb-l:gap-3",children:[e.jsx("img",{src:d.image,alt:"product image",className:"inline-block h-24 w-24 rounded-lg tab:h-20 tab:w-20 mb-l:h-24 mb-l:w-24"}),e.jsxs("div",{className:"flex flex-col justify-evenly mb-l:gap-2 mb-l:items-center",children:[e.jsx("h3",{className:"text-[1.2rem] font-medium leading-[1.5]",children:d.name}),e.jsxs("h4",{className:"text-[1.2rem] text-[#78829d] font-normal leading-[1.5]",children:["Category: ",o.name]}),e.jsxs("h4",{className:"text-[1.2rem] text-[#78829d] font-normal leading-[1.5]",children:["Qty: ",x]})]})]}),e.jsxs("span",{className:"text-lg text-[var(--secondary)] border-[0.5px] border-green-500 p-2 rounded-lg",children:[e.jsx("span",{className:"tab:hidden mb-l:inline-block",children:"Service : "}),e.jsx("span",{children:i==null?void 0:i.name})]})]})},n)})})]}),e.jsxs("div",{className:"common-container shadow-sm",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium py-6 px-12 border-b border-[#b9bccf4d] tab-l:text-[1.5rem] tab-s:px-10 tab-s:text-[1.4rem] tab:px-8 mb-l:py-4 mb-l:px-6",children:"Order summary"}),e.jsx("div",{className:"py-8 px-12 tab-s:px-10 tab:px-8 tab:py-6 mb-l:py-4 mb-l:px-6",children:e.jsxs("div",{className:"grid grid-cols-[20rem_1fr] gap-8 font-normal tab-s:grid-cols-[17.5rem_1fr] tab:gap-6 mb-l:gap-4 mb-l:grid-cols-[repeat(auto-fill,_minmax(12.5rem,_1fr))]",children:[e.jsx("span",{className:"info-label",children:"Sub Total"}),e.jsxs("span",{className:"info-ans",children:["₹",L||"0"]}),y>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Shipping charges"}),e.jsxs("span",{className:"info-ans",children:["₹",y]})]}),u>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Express Delivery Charges"}),e.jsxs("span",{className:"info-ans",children:["₹",u]})]}),v>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Kasar amount"}),e.jsxs("span",{className:"info-ans",children:["₹",v]})]}),_&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Coupon Code"}),e.jsx("span",{className:"info-ans",children:_})]}),w>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Coupon Discount"}),e.jsxs("span",{className:"info-ans",children:["₹",w||"0"]})]}),e.jsx("span",{className:"info-label",children:"Total"}),e.jsxs("span",{className:"info-ans",children:["₹",$||"0"]})]})})]})]}),e.jsxs("div",{className:"space-y-8 tab-s:space-y-6",children:[e.jsxs("div",{className:"common-container shadow-sm",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium py-6 px-12 border-b border-[#b9bccf4d] tab-l:text-[1.5rem] tab-s:px-10 tab-s:text-[1.4rem] tab:px-8 mb-l:py-4 mb-l:px-6",children:"Branch information"}),e.jsx("div",{className:"text-[1.4rem] text-[var(--black)] font-medium py-8 px-12 tab-s:px-10 tab:px-8 tab:py-6 mb-l:py-4 mb-l:px-6",children:e.jsxs("div",{className:"grid grid-cols-[20rem_1fr] gap-8 font-normal tab-s:grid-cols-[15rem_1fr] tab:grid-cols-[12.5rem_1fr] tab:gap-6 mb-l:gap-4 mb-l:grid-cols-[repeat(auto-fill,_minmax(13.5rem,_1fr))]",children:[!D&&e.jsx(e.Fragment,{children:e.jsx("span",{className:"info-label",children:"No branch assigned"})}),g&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Name"}),e.jsx("span",{className:"info-ans",children:g})]}),g&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Email"}),e.jsx("span",{className:"info-ans",children:K})]}),O&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Mobile Number"}),e.jsx("span",{className:"info-ans",children:O})]})]})})]}),e.jsxs("div",{className:"common-container py-8 px-12 space-y-4 shadow-sm tab-s:px-10 tab:px-8 tab:py-6 tab:space-y-3 mb-l:py-4 mb-l:px-6",children:[e.jsx("h3",{className:"text-[1.6rem] text-[var(--black)] font-medium capitalize tab-l:text-[1.5rem] tab-s:text-[1.4rem]",children:"shipping address"}),e.jsx("p",{className:"info-label address",children:A})]}),e.jsxs("div",{className:"common-container shadow-sm",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium py-6 px-12 border-b border-[#b9bccf4d] tab-l:text-[1.5rem] tab-s:px-10 tab-s:text-[1.4rem] tab:px-8 mb-l:py-4 mb-l:px-6",children:"Payement information"}),e.jsx("div",{className:"py-8 px-12 tab-s:px-10 tab:px-8 tab:py-6 mb-l:py-4 mb-l:px-6",children:e.jsxs("div",{className:"grid grid-cols-[20rem_1fr] gap-8 font-normal tab-s:grid-cols-[15rem_1fr] tab:grid-cols-[12.5rem_1fr] tab:gap-6 mb-l:gap-4 mb-l:grid-cols-[repeat(auto-fill,_minmax(12.5rem,_1fr))]",children:[e.jsx("span",{className:"info-label",children:"payment type"}),e.jsx("span",{className:"info-ans",children:T[B]}),e.jsx("span",{className:"info-label",children:"payment status"}),e.jsx("span",{className:"info-ans",children:I[G]}),e.jsx("span",{className:"info-label",children:"Transaction ID"}),e.jsx("span",{className:"info-ans",children:z||"N/A"}),k&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Company Name"}),e.jsx("span",{className:"info-ans",children:k})]}),F&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"GSTIN"}),e.jsx("span",{className:"info-ans",children:F})]})]})})]}),e.jsxs("div",{className:"common-container shadow-sm",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium py-6 px-12 border-b border-[#b9bccf4d] tab-l:text-[1.5rem] tab-s:px-10 tab-s:text-[1.4rem] tab:px-8 mb-l:py-4 mb-l:px-6",children:"Estimated Delivery & Pickup"}),e.jsx("div",{className:"py-8 px-12 tab-s:px-10 tab:px-8 tab:py-6 mb-l:py-4 mb-l:px-6",children:e.jsxs("div",{className:"grid grid-cols-[20rem_1fr] gap-8 font-normal tab-s:grid-cols-[17.5rem_1fr] tab:grid-cols-[16rem_1fr] tab:gap-6 mb-l:gap-4 mb-l:grid-cols-[repeat(auto-fill,_minmax(15rem,_1fr))]",children:[l!==11&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"info-label",children:"Estimated Pickup Time:"}),e.jsx("span",{className:"info-ans",children:j(H).format("DD/MM/YYYY")})]}),e.jsx("span",{className:"info-label",children:"Estimated Delivery Time:"}),e.jsx("span",{className:"info-ans",children:j(R).format("DD/MM/YYYY")})]})})]})]})]}),(t==null?void 0:t.length)>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-[1.8rem] leading-[4rem] text-[var(--black)] font-semibold laptop-s:text-[1.6rem] laptop-s:leading-[3rem] laptop-s:rounded-lg tab-s:p-4 tab-s:text-[1.5rem]",children:"Order Notes"}),e.jsx("ul",{className:"space-y-4 -mt-5",children:t==null?void 0:t.map((a,n)=>{var o,x;const d=j(a.created_at).format("HH:mm, DD/MM/YYYY");return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"block text-sm text-gray-600"}),e.jsx("span",{className:"text-[1.2rem] text-gray-500",children:d})]}),e.jsxs("li",{className:"p-4 px-10 border rounded-md shadow-sm bg-white relative",children:[e.jsx("p",{className:"text-gray-800 mb-2",children:a==null?void 0:a.text_note}),(a==null?void 0:a.images)&&((o=a==null?void 0:a.images)==null?void 0:o.length)>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 mt-3",children:(x=a==null?void 0:a.images)==null?void 0:x.map((i,Y)=>e.jsx("img",{src:i,className:"w-full h-auto rounded-md border shadow-sm",alt:`Note Attachment ${Y+1}`},Y))})]})]},n)})})]})]})};export{se as default};
