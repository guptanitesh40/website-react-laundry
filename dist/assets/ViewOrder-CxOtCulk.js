import{_ as u,r as d,d as C,u as E,j as e,Y,U as N}from"./index-CHeY8Kvc.js";import{u as M}from"./useDownloadInvoice-dOYOmEiV.js";import{L as P}from"./Loading-COnbCcoV.js";const T=()=>{const l="http://35.154.167.170:3000",c=localStorage.getItem("token");return{getOrderDetail:async n=>{try{const t=await fetch(`${l}/orders/${n}`,{method:"GET",headers:{Authorization:`Bearer ${c}`}}),s=await t.json();return t.ok?s.data:(u.error("Failed to fetch order details. Please check your connection and try again.",{className:"toast-error"}),!1)}catch{return u.error("Failed to retrieve the order details. Please try again later.",{className:"toast-error"}),!1}}}},$=()=>{var m,o,x,p,h,f;const[l,c]=d.useState(!0),a=C(),n=E(),{getOrderDetail:t}=T(),[s,g]=d.useState([]),{downloadInvoice:v,loading:y}=M();d.useEffect(()=>{a!=null&&a.state?(async()=>{const i=await t(a.state.order_id);i&&(g(i),c(!1))})():n("/dashboard/home")},[a,n]);const k={1:"Cash on delivery",2:"Online payement"},_={1:"Pending payement",2:"Full payement received",3:"Partial payement received"},w=async()=>{await v(a.state.order_id)};return l?e.jsx(P,{}):e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsxs("div",{className:"text-[1.8rem] leading-[4rem] text-[var(--black)] font-semibold py-4 px-6 rounded-xl bg-white border border-[#b9bccf4d] flex items-center justify-between shadow-sm",children:[e.jsxs("span",{children:["Order Details : #",a.state.order_id]}),e.jsx("span",{className:"flex justify-center items-center h-14 w-14 p-3 bg-gray-100 rounded-full border border-[#b9bccf4d] cursor-pointer",onClick:w,children:y?e.jsx("span",{className:"inline-block h-7 w-7 rounded-full border-2 border-indigo-100 border-t-indigo-600 border-r-indigo-600 animate-spin"}):e.jsx(Y,{className:"h-full w-full fill-[var(--primary)]"})})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"basis-[48.8%] space-y-8",children:[e.jsxs("div",{className:"py-8 px-12 order-list-container shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center gap-10 mb-2",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium",children:"Order items"}),e.jsxs("span",{className:"text-[#676788] text-xl font-medium",children:["Total items : ",(m=s==null?void 0:s.items)==null?void 0:m.length]})]}),e.jsx("div",{className:"flex flex-col gap-6 max-h-[50rem] overflow-y-auto -mr-4 pr-4 scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200",children:(o=s==null?void 0:s.items)==null?void 0:o.map(b=>{const{item_id:i,product:j,category:D,quantity:O,service:r}=b;return e.jsx("div",{className:"border border-[#b9bccf4d] rounded-lg py-3 px-4 bg-slate-50",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex justify-start gap-6",children:[e.jsx("img",{src:j.image,alt:"product image",className:"inline-block h-20 w-20 rounded-lg border"}),e.jsxs("div",{className:"flex flex-col justify-evenly",children:[e.jsxs("h3",{className:"text-[1.2rem] font-medium leading-[1.5]",children:[j.name," (",`${O}x`,")"]}),e.jsxs("h4",{className:"text-[1.2rem] text-[#78829d] font-normal leading-[1.5]",children:["Category: ",D.name]})]})]}),e.jsxs("span",{className:"text-[1.1rem] text-[var(--secondary)] border-[0.5px] border-green-500 p-2 rounded-lg",children:["Service : ",r==null?void 0:r.name]})]})},i)})})]}),e.jsxs("div",{className:"cus-info-container shadow-sm",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium py-5 px-12 border-b border-[#b9bccf4d]",children:"Order summary"}),e.jsx("div",{className:"text-[1.4rem] text-[var(--black)] font-medium py-8 px-12",children:e.jsxs("div",{className:"grid grid-cols-[20rem_1fr] gap-8 font-normal",children:[e.jsx("span",{className:"inline-block text-[#676788]",children:"Sub Total"}),e.jsxs("span",{children:["₹",(s==null?void 0:s.sub_total)||"0"]}),e.jsx("span",{className:"inline-block text-[#676788]",children:"Shipping charges"}),e.jsxs("span",{children:["₹",(s==null?void 0:s.shipping_charges)||"0"]}),e.jsx("span",{className:"inline-block text-[#676788]",children:"Express Delivery Charges"}),e.jsxs("span",{children:["₹",(s==null?void 0:s.express_delivery_charges)||"0"]}),e.jsx("span",{className:"inline-block text-[#676788]",children:"Kasar amount"}),e.jsxs("span",{children:["₹",(s==null?void 0:s.kasar_amount)||"0"]}),e.jsx("span",{className:"inline-block text-[#676788]",children:"Coupon Code"}),e.jsx("span",{children:(s==null?void 0:s.coupon_code)||"N/A"}),e.jsx("span",{className:"inline-block text-[#676788]",children:"Coupon Discount"}),e.jsxs("span",{children:["₹",(s==null?void 0:s.coupon_discount)||"0"]}),e.jsx("span",{className:"inline-block text-[#676788]",children:"Total"}),e.jsxs("span",{children:["₹",(s==null?void 0:s.total)||"0"]})]})})]})]}),e.jsxs("div",{className:"basis-[48.8%] space-y-8",children:[e.jsxs("div",{className:"common-container shadow-sm",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium py-5 px-12 border-b border-[#b9bccf4d]",children:"Customer information"}),e.jsx("div",{className:"text-[1.4rem] text-[var(--black)] font-medium py-8 px-12",children:e.jsxs("div",{className:"grid grid-cols-[20rem_1fr] gap-8 font-normal",children:[e.jsx("span",{className:"info-label",children:"Name"}),e.jsx("span",{className:"info-ans",children:((x=s==null?void 0:s.user)==null?void 0:x.first_name)+" "+((p=s==null?void 0:s.user)==null?void 0:p.last_name)}),e.jsx("span",{className:"info-label",children:"Email"}),e.jsx("span",{className:"info-ans",children:(h=s==null?void 0:s.user)==null?void 0:h.email}),e.jsx("span",{className:"info-label",children:"Mobile Number"}),e.jsx("span",{className:"info-ans",children:(f=s==null?void 0:s.user)==null?void 0:f.mobile_number})]})})]}),e.jsxs("div",{className:"common-container py-6 px-12 space-y-4 shadow-sm",children:[e.jsx("h3",{className:"text-[1.6rem] text-[var(--black)] font-medium capitalize",children:"shipping address"}),e.jsx("p",{className:"info-label address",children:s==null?void 0:s.address_details})]}),e.jsxs("div",{className:"common-container shadow-sm",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium py-5 px-12 border-b border-[#b9bccf4d]",children:"Payement information"}),e.jsx("div",{className:"text-[1.4rem] text-[var(--black)] font-medium py-8 px-12",children:e.jsxs("div",{className:"grid grid-cols-[20rem_1fr] gap-8 font-normal",children:[e.jsx("span",{className:"info-label",children:"payement type"}),e.jsx("span",{className:"info-ans",children:k[s==null?void 0:s.payment_type]}),e.jsx("span",{className:"info-label",children:"payement status"}),e.jsx("span",{className:"info-ans",children:_[s==null?void 0:s.payment_status]}),e.jsx("span",{className:"info-label",children:"Transaction ID"}),e.jsx("span",{className:"info-ans",children:(s==null?void 0:s.transaction_id)||"N/A"})]})})]}),e.jsxs("div",{className:"common-container shadow-sm",children:[e.jsx("div",{className:"text-[1.6rem] text-[var(--black)] font-medium py-5 px-12 border-b border-[#b9bccf4d]",children:"Estimated Delivery & Pickup"}),e.jsx("div",{className:"text-[1.4rem] text-[var(--black)] font-medium py-8 px-12",children:e.jsxs("div",{className:"grid grid-cols-[20rem_1fr] gap-8 font-normal",children:[e.jsx("span",{className:"info-label",children:"Estimated Pickup Time:"}),e.jsx("span",{className:"info-ans",children:N(s==null?void 0:s.estimated_pickup_time).format("DD/MM/YYYY")}),e.jsx("span",{className:"info-label",children:"Estimated Delivery Time:"}),e.jsx("span",{className:"info-ans",children:N(s==null?void 0:s.estimated_delivery_time).format("DD/MM/YYYY")})]})})]})]})]})]})};export{$ as default};
