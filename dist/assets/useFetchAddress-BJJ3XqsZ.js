import{r as x,_ as y,aB as B,a9 as ae,P as d,j as n,G as re,I as N,u as X,aC as oe,aD as se,aE as le,aF as ie,a as ce,aG as ue}from"./index-CsahHiBd.js";import{b as Z}from"./index-BuH6_NHp.js";import{a as de,G as ge}from"./esm-W82WBsWY.js";const pe=()=>{const[r,o]=x.useState(!1),a="http://3.110.208.70:3000",e=localStorage.getItem("token");return{addAddress:async s=>{var l;if(!e)return y.error("User is not authenticated!"),null;const i={...s,address_type:parseInt(s.address_type)};try{o(!0);const p=await fetch(`${a}/address`,{method:"POST",headers:{"Content-type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(i)}),c=await p.json();return p.ok?(y.success(c==null?void 0:c.message,{className:"toast-success"}),(l=c==null?void 0:c.data)==null?void 0:l.result):(y.error("Failed to add address!",{className:"toast-error"}),null)}catch{return y.error("Failed to add address!"),null}finally{o(!1)}},loading:r}},me=()=>{const[r,o]=x.useState(!1),a="http://3.110.208.70:3000",e=localStorage.getItem("token");return{loading:r,editAddress:async(s,i)=>{if(!e)return y.error("User is not authenticated!"),null;const l={...s,address_type:Number(s.address_type),pincode:String(s.pincode),lat:Number(s.lat),long:Number(s.long)};try{o(!0);const p=await fetch(`${a}/address/${i}`,{method:"PUT",headers:{"Content-type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(l)}),c=await p.json();return p.ok?(y.success(c.message),c):(y.error(c.message,{style:{maxWidth:"700px"}}),null)}catch{return y.error("Unable to update address"),null}finally{o(!1)}}}};var E={},G={},fe="Expected a function",H=NaN,he="[object Symbol]",be=/^\s+|\s+$/g,xe=/^[-+]0x[0-9a-f]+$/i,ye=/^0b[01]+$/i,ve=/^0o[0-7]+$/i,we=parseInt,je=typeof B=="object"&&B&&B.Object===Object&&B,Se=typeof self=="object"&&self&&self.Object===Object&&self,Ae=je||Se||Function("return this")(),Ne=Object.prototype,_e=Ne.toString,Ie=Math.max,ke=Math.min,$=function(){return Ae.Date.now()};function Ce(r,o,a){var e,t,s,i,l,p,c=0,C=!1,_=!1,P=!0;if(typeof r!="function")throw new TypeError(fe);o=J(o)||0,K(a)&&(C=!!a.leading,_="maxWait"in a,s=_?Ie(J(a.maxWait)||0,o):s,P="trailing"in a?!!a.trailing:P);function u(m){var A=e,T=t;return e=t=void 0,c=m,i=r.apply(T,A),i}function g(m){return c=m,l=setTimeout(S,o),C?u(m):i}function j(m){var A=m-p,T=m-c,v=o-A;return _?ke(v,s-T):v}function b(m){var A=m-p,T=m-c;return p===void 0||A>=o||A<0||_&&T>=s}function S(){var m=$();if(b(m))return F(m);l=setTimeout(S,j(m))}function F(m){return l=void 0,P&&e?u(m):(e=t=void 0,i)}function U(){l!==void 0&&clearTimeout(l),c=0,e=p=t=l=void 0}function R(){return l===void 0?i:F($())}function w(){var m=$(),A=b(m);if(e=arguments,t=this,p=m,A){if(l===void 0)return g(p);if(_)return l=setTimeout(S,o),u(p)}return l===void 0&&(l=setTimeout(S,o)),i}return w.cancel=U,w.flush=R,w}function K(r){var o=typeof r;return!!r&&(o=="object"||o=="function")}function Pe(r){return!!r&&typeof r=="object"}function Oe(r){return typeof r=="symbol"||Pe(r)&&_e.call(r)==he}function J(r){if(typeof r=="number")return r;if(Oe(r))return H;if(K(r)){var o=typeof r.valueOf=="function"?r.valueOf():r;r=K(o)?o+"":o}if(typeof r!="string")return r===0?r:+r;r=r.replace(be,"");var a=ye.test(r);return a||ve.test(r)?we(r.slice(2),a?2:8):xe.test(r)?H:+r}var Ee=Ce,D={};Object.defineProperty(D,"__esModule",{value:!0});D.compose=function(){for(var o=arguments.length,a=Array(o),e=0;e<o;e++)a[e]=arguments[e];return function(){for(var t=arguments.length,s=Array(t),i=0;i<t;i++)s[i]=arguments[i];a.forEach(function(l){return l&&l.apply(void 0,s)})}};D.pick=function(o){for(var a=arguments.length,e=Array(a>1?a-1:0),t=1;t<a;t++)e[t-1]=arguments[t];return e.reduce(function(s,i){return o&&o.hasOwnProperty(i)&&(s[i]=o[i]),s},{})};Object.defineProperty(G,"__esModule",{value:!0});var M=Object.assign||function(r){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e])}return r},Fe=function(){function r(o,a){for(var e=0;e<a.length;e++){var t=a[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(o,t.key,t)}}return function(o,a,e){return a&&r(o.prototype,a),e&&r(o,e),o}}(),Te=x,Le=z(Te),Me=ae,f=z(Me),qe=Ee,Be=z(qe),k=D;function z(r){return r&&r.__esModule?r:{default:r}}function De(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function Ue(r,o){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:r}function Re(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);r.prototype=Object.create(o&&o.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(r,o):r.__proto__=o)}var $e=function(o){return{mainText:o.main_text,secondaryText:o.secondary_text}},W=function(r){Re(o,r);function o(a){De(this,o);var e=Ue(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,a));return e.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");e.autocompleteService=new window.google.maps.places.AutocompleteService,e.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,e.setState(function(t){return t.ready?null:{ready:!0}})},e.autocompleteCallback=function(t,s){if(e.setState({loading:!1}),s!==e.autocompleteOK){e.props.onError(s,e.clearSuggestions);return}var i=e.props.highlightFirstSuggestion;e.setState({suggestions:t.map(function(l,p){return{id:l.id,description:l.description,placeId:l.place_id,active:!!(i&&p===0),index:p,formattedSuggestion:$e(l.structured_formatting),matchedSubstrings:l.matched_substrings,terms:l.terms,types:l.types}})})},e.fetchPredictions=function(){var t=e.props.value;t.length&&(e.setState({loading:!0}),e.autocompleteService.getPlacePredictions(M({},e.props.searchOptions,{input:t}),e.autocompleteCallback))},e.clearSuggestions=function(){e.setState({suggestions:[]})},e.clearActive=function(){e.setState({suggestions:e.state.suggestions.map(function(t){return M({},t,{active:!1})})})},e.handleSelect=function(t,s,i){e.clearSuggestions(),e.props.onSelect?e.props.onSelect(t,s,i):e.props.onChange(t)},e.getActiveSuggestion=function(){return e.state.suggestions.find(function(t){return t.active})},e.selectActiveAtIndex=function(t){var s=e.state.suggestions.find(function(i){return i.index===t}).description;e.setActiveAtIndex(t),e.props.onChange(s)},e.selectUserInputValue=function(){e.clearActive(),e.props.onChange(e.state.userInputValue)},e.handleEnterKey=function(){var t=e.getActiveSuggestion();t===void 0?e.handleSelect(e.props.value,null,null):e.handleSelect(t.description,t.placeId,t)},e.handleDownKey=function(){if(e.state.suggestions.length!==0){var t=e.getActiveSuggestion();t===void 0?e.selectActiveAtIndex(0):t.index===e.state.suggestions.length-1?e.selectUserInputValue():e.selectActiveAtIndex(t.index+1)}},e.handleUpKey=function(){if(e.state.suggestions.length!==0){var t=e.getActiveSuggestion();t===void 0?e.selectActiveAtIndex(e.state.suggestions.length-1):t.index===0?e.selectUserInputValue():e.selectActiveAtIndex(t.index-1)}},e.handleInputKeyDown=function(t){switch(t.key){case"Enter":t.preventDefault(),e.handleEnterKey();break;case"ArrowDown":t.preventDefault(),e.handleDownKey();break;case"ArrowUp":t.preventDefault(),e.handleUpKey();break;case"Escape":e.clearSuggestions();break}},e.setActiveAtIndex=function(t){e.setState({suggestions:e.state.suggestions.map(function(s,i){return i===t?M({},s,{active:!0}):M({},s,{active:!1})})})},e.handleInputChange=function(t){var s=t.target.value;if(e.props.onChange(s),e.setState({userInputValue:s}),!s){e.clearSuggestions();return}e.props.shouldFetchSuggestions&&e.debouncedFetchPredictions()},e.handleInputOnBlur=function(){e.mousedownOnSuggestion||e.clearSuggestions()},e.getActiveSuggestionId=function(){var t=e.getActiveSuggestion();return t?"PlacesAutocomplete__suggestion-"+t.placeId:void 0},e.getIsExpanded=function(){return e.state.suggestions.length>0},e.getInputProps=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(t.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var s={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":e.getIsExpanded(),"aria-activedescendant":e.getActiveSuggestionId(),disabled:!e.state.ready};return M({},s,t,{onKeyDown:(0,k.compose)(e.handleInputKeyDown,t.onKeyDown),onBlur:(0,k.compose)(e.handleInputOnBlur,t.onBlur),value:e.props.value,onChange:function(l){e.handleInputChange(l)}})},e.getSuggestionItemProps=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.handleSuggestionMouseEnter.bind(e,t.index),l=e.handleSuggestionClick.bind(e,t);return M({},s,{key:t.id,id:e.getActiveSuggestionId(),role:"option",onMouseEnter:(0,k.compose)(i,s.onMouseEnter),onMouseLeave:(0,k.compose)(e.handleSuggestionMouseLeave,s.onMouseLeave),onMouseDown:(0,k.compose)(e.handleSuggestionMouseDown,s.onMouseDown),onMouseUp:(0,k.compose)(e.handleSuggestionMouseUp,s.onMouseUp),onTouchStart:(0,k.compose)(e.handleSuggestionTouchStart,s.onTouchStart),onTouchEnd:(0,k.compose)(e.handleSuggestionMouseUp,s.onTouchEnd),onClick:(0,k.compose)(l,s.onClick)})},e.handleSuggestionMouseEnter=function(t){e.setActiveAtIndex(t)},e.handleSuggestionMouseLeave=function(){e.mousedownOnSuggestion=!1,e.clearActive()},e.handleSuggestionMouseDown=function(t){t.preventDefault(),e.mousedownOnSuggestion=!0},e.handleSuggestionTouchStart=function(){e.mousedownOnSuggestion=!0},e.handleSuggestionMouseUp=function(){e.mousedownOnSuggestion=!1},e.handleSuggestionClick=function(t,s){s&&s.preventDefault&&s.preventDefault();var i=t.description,l=t.placeId;e.handleSelect(i,l,t),setTimeout(function(){e.mousedownOnSuggestion=!1})},e.state={loading:!1,suggestions:[],userInputValue:a.value,ready:!a.googleCallbackName},e.debouncedFetchPredictions=(0,Be.default)(e.fetchPredictions,a.debounce),e}return Fe(o,[{key:"componentDidMount",value:function(){var e=this.props.googleCallbackName;if(e){var t=window.google&&window.google.maps&&window.google.maps.places;t?this.init():window[e]=this.init}else this.init()}},{key:"componentWillUnmount",value:function(){var e=this.props.googleCallbackName;e&&window[e]&&delete window[e]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),o}(Le.default.Component);W.propTypes={onChange:f.default.func.isRequired,value:f.default.string.isRequired,children:f.default.func.isRequired,onError:f.default.func,onSelect:f.default.func,searchOptions:f.default.shape({bounds:f.default.object,componentRestrictions:f.default.object,location:f.default.object,offset:f.default.oneOfType([f.default.number,f.default.string]),radius:f.default.oneOfType([f.default.number,f.default.string]),types:f.default.array}),debounce:f.default.number,highlightFirstSuggestion:f.default.bool,shouldFetchSuggestions:f.default.bool,googleCallbackName:f.default.string};W.defaultProps={onError:function(o,a){return console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,o)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0};G.default=W;var q={};Object.defineProperty(q,"__esModule",{value:!0});q.geocodeByAddress=function(o){var a=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(t,s){a.geocode({address:o},function(i,l){l!==e&&s(l),t(i)})})};q.getLatLng=function(o){return new Promise(function(a,e){try{var t={lat:o.geometry.location.lat(),lng:o.geometry.location.lng()};a(t)}catch(s){e(s)}})};q.geocodeByPlaceId=function(o){var a=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(t,s){a.geocode({placeId:o},function(i,l){l!==e&&s(l),t(i)})})};Object.defineProperty(E,"__esModule",{value:!0});var Q=E.getLatLng=E.geocodeByPlaceId=Y=E.geocodeByAddress=void 0,Ke=G,Ge=ze(Ke),V=q;function ze(r){return r&&r.__esModule?r:{default:r}}var Y=E.geocodeByAddress=V.geocodeByAddress;E.geocodeByPlaceId=V.geocodeByPlaceId;Q=E.getLatLng=V.getLatLng;var We=E.default=Ge.default;const Ve={width:"100%",height:"100%"},He=["places"],ee=({setIsMapOpen:r,setFormData:o,initialCenter:a})=>{const{isLoaded:e}=de({googleMapsApiKey:"AIzaSyBZ8HbiXxHEd7x4tlmFli-WK88bLEZScXI",libraries:He}),[t,s]=x.useState(a),[i,l]=x.useState(null),[p,c]=x.useState("Fetching location..."),C=async(g,j)=>{if(!window.google){y.error("Google Maps API is not loaded yet.");return}try{new window.google.maps.Geocoder().geocode({location:{lat:g,lng:j}},(S,F)=>{F==="OK"&&S.length>0?c(S[0].formatted_address):c("Location not found")})}catch(b){c("Unable to fetch location"),y.error(b)}},_=g=>{if(g){l(g);const j=g.getCenter(),b=j.lat(),S=j.lng();s({lat:b,lng:S}),C(b,S)}},P=x.useCallback(()=>{if(!i)return;const g=i.getCenter(),j=g.lat(),b=g.lng();(j!==t.lat||b!==t.lng)&&(s({lat:j,lng:b}),C(j,b))},[i,t]),u=()=>{o(g=>({...g,lat:t==null?void 0:t.lat,long:t==null?void 0:t.lng,area:p})),r(g=>!g)};return e?n.jsx("div",{className:"fixed inset-0 p-8 bg-black bg-opacity-50 grid place-items-center min-h-screen w-full overflow-auto z-50 mb-l:p-4",children:n.jsxs("div",{className:"bg-white rounded-lg h-full w-full overflow-hidden relative",children:[n.jsx(ge,{mapContainerStyle:Ve,center:t,zoom:18,options:{streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1,zoomControl:!1,disableDefaultUI:!0,clickableIcons:!1},onLoad:g=>_(g),onIdle:P}),n.jsx("button",{type:"button",title:"close",className:"absolute top-4 right-4 border border-blue-500 rounded-md inline-flex items-center justify-center text-white focus:outline-none shadow-2xl h-10 w-10 bg-black cursor-pointer",onClick:()=>r(g=>!g),children:n.jsx(Z,{className:"h-8 w-8 tab-s:h-6 tab-s:w-6"})}),n.jsx("span",{className:"inline-block absolute top-1/2 right-1/2 translate-x-1/2 -translate-y-1/2",children:n.jsx("span",{className:"inline-block h-8 w-8 rounded-full border-4 border-indigo-600"})}),n.jsx("div",{className:"absolute bottom-4 right-0 left-0 h-auto",children:n.jsxs("div",{className:"max-w-md bg-white mx-auto rounded-lg flex flex-col gap-4 p-2 border border-gray-400 text-[1.6rem]",children:[n.jsx("p",{className:"px-1 leading-[2rem] text-[var(--black)]",children:p}),n.jsx("button",{className:"self-center bg-primary text-white py-1 px-4 rounded-lg",onClick:u,children:"Save"})]})})]})}):n.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 min-h-screen w-full",children:n.jsxs("div",{className:"bg-white inline-flex gap-4 items-center justify-center px-8 py-4 rounded-md",children:[n.jsx("span",{className:"h-12 w-12 rounded-full border-4 border-black/40 border-t-transparent animate-spin"}),n.jsx("span",{className:"text-[1.6rem] leading-[1.5] font-medium",children:"Loading..."})]})})};ee.propTypes={setIsMapOpen:d.func.isRequired,setFormData:d.func.isRequired,initialCenter:d.object.isRequired};const Je=re().shape({full_name:N().trim().min(6,"Full name must be at least 2 characters").max(50,"Full name cannot exceed 50 characters").required("Full name is required"),phone_number:N().matches(/^[0-9]{10}$/,"Phone number must be exactly 10 digits").required("Phone number is required"),address_type:N().required("Address type is require"),building_number:N().trim().required("Building number is required"),area:N().trim().required("Area is required"),landmark:N().trim().required("Landmark is required"),city:N().trim().required("City is required"),state:N().trim().required("State is required"),country:N().trim().required("Country is required"),pincode:N().matches(/^\d{6}$/,"Pincode must be exactly 6 digits").required("Pincode is required")}),Xe=({setIsOpen:r,isOpen:o,address:a,isEditMode:e})=>{const t=X(),{addAddress:s,loading:i}=pe(),{editAddress:l,loading:p}=me(),[c,C]=x.useState({}),[_,P]=x.useState(!1),[u,g]=x.useState({full_name:"",phone_number:"",address_type:"1",building_number:"",area:"",lat:"",long:"",landmark:"",pincode:"",city:"",state:"",country:""}),[j,b]=x.useState(!1),[S,F]=x.useState(!1),U=v=>{g({...u,area:v}),b(!0)},R=async v=>{g({...u,area:v});try{const I=await Y(v),h=await Q(I[0]);h&&g(O=>({...O,lat:h==null?void 0:h.lat,long:h==null?void 0:h.lng}))}catch{y.error("Failed to fetch address detail",{className:"toast-error"})}},w=v=>{const{name:I,value:h}=v.target;g({...u,[I]:h})},m=async v=>{v.preventDefault(),!u.lat||!u.long?P(!0):P(!1);try{await Je.validate(u,{abortEarly:!1})}catch(h){if(h.inner){const O={};h.inner.forEach(L=>{O[L.path]=L.message}),C(O)}return}if(C({}),e){const{address_id:h}=a;if(await l(u,h)){t(le({formData:u,address_id:h})),r(!1);return}return}const I=await s(u);I&&(t(ie(I)),r(!1))},A=()=>{r(!1),g({address_type:"1",full_name:"",phone_number:"",building_number:"",area:"",landmark:"",pincode:"",city:"",state:"",country:""})},T=v=>{v.preventDefault(),F(!0)};return x.useEffect(()=>{a&&g({full_name:a==null?void 0:a.full_name,phone_number:a==null?void 0:a.phone_number,address_type:a==null?void 0:a.address_type,building_number:a==null?void 0:a.building_number,area:a==null?void 0:a.area,lat:a==null?void 0:a.lat,long:a==null?void 0:a.long,landmark:a==null?void 0:a.landmark,pincode:a==null?void 0:a.pincode,city:a==null?void 0:a.city,state:a==null?void 0:a.state,country:a==null?void 0:a.country})},[]),n.jsxs("section",{className:`fixed inset-0 p-8 bg-black bg-opacity-75 grid place-items-center min-h-screen w-full overflow-auto z-50 mb-l:p-6 ${o?"block":"hidden"}`,children:[n.jsxs("div",{className:"w-full max-w-[60rem] bg-white shadow-2xl p-12 pb-16 rounded-[0.75rem] tab-l:rounded-xl mb-l:rounded-lg mb-l:p-10 mb:p-8",children:[n.jsxs("div",{className:"mb-10 flex justify-between items-center flex-wrap tab-l:mb-8",children:[n.jsx("h2",{className:"text-[2.4rem] leading-[1] text-[var(--black)] tab-l:text-[2rem]",children:e?"Edit Address":"Add New Address"}),n.jsx("button",{type:"button",title:"close",className:"border border-gray-300 rounded-md inline-flex items-center justify-center text-gray-400 focus:outline-none focus:border-indigo-500 shadow-2xl h-10 w-10",onClick:A,children:n.jsx(Z,{className:"h-8 w-8 tab-s:h-6 tab-s:w-6"})})]}),n.jsxs("form",{onSubmit:m,className:"grid grid-cols-[repeat(auto-fill,_minmax(25rem,_1fr))] w-full gap-x-10 gap-y-12 tab-s:gap-10 mb-l:grid-cols-1 mb:gap-8",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"full_name",className:"aam-label",children:"Fullname"}),n.jsxs("div",{children:[n.jsx("input",{name:"full_name",id:"full_name",type:"text",onChange:w,value:u.full_name,className:"aam-input"}),c.full_name&&n.jsx("p",{className:"aam-error-label",children:c.full_name})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"phone_number",className:"aam-label",children:"Phone number"}),n.jsxs("div",{children:[n.jsx("input",{name:"phone_number",id:"phone_number",type:"text",onChange:w,value:u.phone_number,className:"aam-input"}),c.phone_number&&n.jsx("p",{className:"aam-error-label",children:c.phone_number})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"address_type",className:"aam-label",children:"Address type"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{name:"address_type",id:"address_type",className:"aam-input appearance-none",onChange:w,value:Number(u.address_type),children:[n.jsx("option",{value:1,children:"home"}),n.jsx("option",{value:2,children:"Office"}),n.jsx("option",{value:3,children:"Other"})]}),n.jsx(oe,{className:"absolute top-1/2 right-3 transform -translate-y-1/2 text-gray-500 pointer-events-none"}),c.address_type&&n.jsx("p",{className:"aam-error-label",children:c.address_type})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"building_number",className:"aam-label",children:"Building number"}),n.jsxs("div",{children:[n.jsx("input",{name:"building_number",id:"building_number",type:"text",onChange:w,value:u.building_number,className:"aam-input"}),c.building_number&&n.jsx("p",{className:"aam-error-label",children:c.building_number})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"area",className:"aam-label",children:"area"}),n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"relative",children:[n.jsx(We,{value:u.area,onChange:U,onSelect:R,children:({getInputProps:v,suggestions:I,getSuggestionItemProps:h,loading:O})=>n.jsxs(n.Fragment,{children:[n.jsx("input",{...v({className:"aam-input",id:"area",type:"text",onFocus:()=>b(!0),onBlur:()=>b(!1)})}),j&&I.length>0&&n.jsx("div",{className:"absolute z-10 bg-white rounded-lg shadow-lg w-full mt-1 border border-gray-200 laptop-l:mt-1 max-h-[150px] overflow-y-auto",children:n.jsxs("ul",{className:"text-[1.4rem] font-normal text-[var(--black)]",children:[O&&n.jsx("li",{className:"block px-4 py-[0.8rem] hover:bg-gray-100",children:"Loading..."}),!O&&I.map((L,te)=>{const{...ne}=h(L);return n.jsx("li",{...ne,className:"block px-4 py-[0.8rem] hover:bg-gray-100",children:L==null?void 0:L.description},te)})]})})]})}),n.jsx("button",{className:"h-full bg-primary text-white px-4 py-1 rounded-br-lg rounded-tr-lg  absolute top-1/2 right-0 -translate-y-1/2",onClick:T,children:n.jsx(se,{className:"h-8 w-8"})})]}),c.area&&n.jsx("p",{className:"aam-error-label",children:c.area})||_&&n.jsx("p",{className:"aam-error-label",children:"please select valid area from dropdown"})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"landmark",className:"aam-label",children:"landmark"}),n.jsxs("div",{children:[n.jsx("input",{name:"landmark",id:"landmark",type:"text",onChange:w,value:u.landmark,className:"aam-input"}),c.landmark&&n.jsx("p",{className:"aam-error-label",children:c.landmark})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"pincode",className:"aam-label",children:"pincode"}),n.jsxs("div",{children:[n.jsx("input",{name:"pincode",id:"pincode",type:"text",onChange:w,value:u.pincode,className:"aam-input"}),c.pincode&&n.jsx("p",{className:"aam-error-label",children:c.pincode})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"city",className:"self-start text-[1.2rem] text-[var(--black)]",children:"city"}),n.jsxs("div",{children:[n.jsx("input",{name:"city",id:"city",type:"text",onChange:w,value:u.city,className:"aam-input"}),c.city&&n.jsx("p",{className:"aam-error-label",children:c.city})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"state",className:"aam-label",children:"state"}),n.jsxs("div",{children:[n.jsx("input",{name:"state",id:"state",type:"text",onChange:w,value:u.state,className:"aam-input"}),c.state&&n.jsx("p",{className:"aam-error-label",children:c.state})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("label",{htmlFor:"country",className:"aam-label",children:"country"}),n.jsx("input",{name:"country",id:"country",type:"text",onChange:w,value:u.country,className:"aam-input"}),c.country&&n.jsx("p",{className:"aam-error-label",children:c.country})]}),n.jsx("div",{className:"flex justify-start items-end",children:n.jsx("button",{type:"submit",className:"text-white bg-primary text-[1.4rem] font-medium px-6 py-4 rounded-md flex gap-4 items-center",disabled:i||p,children:e?p?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-block h-10 w-10 rounded-full border-4 border-t-white border-white/30 animate-spin"}),n.jsx("span",{children:"Processing..."})]}):"Edit Address":i?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"inline-block h-10 w-10 rounded-full border-4 border-t-white border-white/30 animate-spin"}),n.jsx("span",{children:"Processing..."})]}):"Add Address"})})]})]}),S&&n.jsx(ee,{setIsMapOpen:F,setFormData:g,initialCenter:{lat:(u==null?void 0:u.lat)||23.03153299642489,lng:(u==null?void 0:u.long)||72.57217419501315}})]})};Xe.propTypes={setIsOpen:d.func.isRequired,isOpen:d.bool.isRequired,address:d.shape({address_id:d.number,full_name:d.string,phone_number:d.string,address_type:d.oneOfType([d.number,d.string]),building_number:d.string,area:d.string,lat:d.oneOfType([d.number,d.string]),long:d.oneOfType([d.number,d.string]),landmark:d.string,pincode:d.oneOfType([d.number,d.string]),city:d.string,state:d.string,country:d.string}),isEditMode:d.bool.isRequired};const et=()=>{const[r,o]=x.useState(!1),a="http://3.110.208.70:3000",e=localStorage.getItem("token");return{deleteAddress:async s=>{if(!s){y.error("Address Id is required to delete address");return}try{o(!0);const i=await fetch(`${a}/address/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}}),l=await i.json();return i.ok?(y.success((l==null?void 0:l.message)||"Address deleted successfully"),l==null?void 0:l.data):null}catch{return y.error("Unable to delete address, please try again later!"),null}finally{o(!1)}},loading:r}},tt=()=>{const r=X(),o=ce(i=>{var l;return(l=i==null?void 0:i.auth)==null?void 0:l.isAuthenticated}),[a,e]=x.useState(!0),t="http://3.110.208.70:3000",s=localStorage.getItem("token");return x.useEffect(()=>{if(!o||!s){e(!1);return}(async()=>{var l;try{const p=await fetch(`${t}/address`,{method:"GET",headers:{Authorization:`Bearer ${s}`}}),c=await p.json();p.ok?r(ue((l=c==null?void 0:c.data)==null?void 0:l.result)):y.error("Failed to fetch address data!")}catch{y.error("Failed to fetch address data!")}finally{e(!1)}})()},[o,t,r,s]),{loading:a}};export{Xe as A,et as a,tt as u};
