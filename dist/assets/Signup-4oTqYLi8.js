import{r as u,_ as g,u as S,a as O,j as e,I as P,b as C,L as F,c as q,s as k}from"./index-BHmYt6bW.js";import{c as E,a as m}from"./index.esm-DzoCB4FC.js";const L=()=>{const[d,i]=u.useState(!1),b="http://35.154.167.170:3000";return{signup:async p=>{var t,s;let o={...p,gender:Number(p.gender)};try{i(!0);const h=await fetch(`${b}/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),a=await h.json();if(h.ok)return g.success(a.message||"Signup successful!",{className:"toast-success"}),localStorage.setItem("token",(t=a==null?void 0:a.data)==null?void 0:t.token),localStorage.setItem("user",JSON.stringify((s=a==null?void 0:a.data)==null?void 0:s.user)),a==null?void 0:a.data;g.error(a.message||"An error occurred during signup. Please try again later.",{className:"toast-error"})}catch{g.error("Failed to signup. Please check your connection and try again.",{className:"toast-error"})}finally{i(!1)}},loading:d}},M=()=>{const[d,i]=u.useState(!1),b="http://35.154.167.170:3000";return{generateOtp:async p=>{try{i(!0);const o=await fetch(`${b}/user/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mobile_number:p,type:1})}),t=await o.json();o.ok?g.success(t.message||"OTP sent successfully!",{className:"toast-success"}):g.error((t==null?void 0:t.message)||"Unable to send OTP. Please try again later.",{className:"toast-error"})}catch{g.error("Failed to send OTP. Please try again later.",{className:"toast-error"})}finally{i(!1)}},loading:d}},$=()=>{const d=S(),i=O(),{signup:b,loading:x}=L(),{generateOtp:p}=M(),[o,t]=u.useState(""),[s,h]=u.useState({}),[a,N]=u.useState(!1),[l,y]=u.useState({first_name:"",last_name:"",mobile_number:"",password:"",gender:"",role_id:"5",email:"",otp:""}),r=c=>{const{name:n,value:f}=c.target;y({...l,[n]:f})},v=E().shape({first_name:m().required("first name is required"),last_name:m().required("lastname is required"),mobile_number:m().matches(/^[0-9]{10}$/,"Mobile number must be 10 digits").required("Mobile number is required"),gender:m().required("Please select you gender"),password:m().min(6,"Password must be at least 6 characters").required("Password is required"),email:m().email("Invalid email address").required("Email is required"),otp:m().matches(/^\d{6}$/,"OTP must be exactly 6 digits").required("OTP is required")}),w=async c=>{c.preventDefault();try{await v.validate(l,{abortEarly:!1});const n=await b(l);n&&(d(q(n.user)),d(k(!!n.token)),i("/")),h("")}catch(n){const f={};n.inner.forEach(j=>{f[j.path]=j.message}),h(f)}},_=()=>{const c=l.mobile_number,n=/^[0-9]{10}$/.test(c);c?n?(t(""),p(c)):t("Mobile number must be 10 digits"):t("Mobile number is required")};return e.jsx("section",{className:"grid place-items-center p-6 min-h-screen w-full overflow-auto tab:p-8 mb-l:p-6 mb:p-4",children:e.jsxs("div",{className:"signup-form-container",children:[e.jsxs("div",{className:"flex flex-col justify-center items-center gap-6 laptop-l:gap-4",children:[e.jsx("img",{src:"sc-logo.png",alt:"Sikka Cleaner Logo",loading:"lazy",className:"h-16 w-auto laptop-l:h-14 mb:h-12"}),e.jsx("h2",{className:"text-[2.4rem] leading-[1.5] font-bold text-[var(--black)] laptop-l:text-[2rem] mb:text-[1.8rem]",children:"Create an account"})]}),e.jsxs("div",{children:[e.jsxs("form",{className:"grid grid-cols-2 gap-12 tab-s:gap-10 tab:grid-cols-1 tab:gap-8",onSubmit:w,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"signup-label",children:"First Name"}),e.jsx("input",{type:"text",id:"first_name",name:"first_name",placeholder:"First name",value:l.first_name,onChange:r,className:"signup-input"}),s.first_name&&e.jsx("p",{className:"signup-error-label",children:s.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"signup-label",children:"Last Name"}),e.jsx("input",{type:"text",id:"last_name",name:"last_name",placeholder:"last name",value:l.last_name,onChange:r,className:"signup-input"}),s.last_name&&e.jsx("p",{className:"signup-error-label",children:s.last_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mobile",className:"signup-label",children:"Mobile Number"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"mobile",name:"mobile_number",placeholder:"99099XXXXX",value:l.mobile_number,onChange:r,className:"signup-input"}),e.jsx("button",{type:"button",className:"send-btn",onClick:_,children:"send"})]}),o&&e.jsx("p",{className:"signup-error-label",children:o})||s.mobile_number&&e.jsx("p",{className:"signup-error-label",children:s.mobile_number})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"otp",className:"signup-label",children:"Otp"}),e.jsx("input",{type:"text",id:"otp",name:"otp",placeholder:"otp",value:l.otp,onChange:r,className:"signup-input"}),s.otp&&e.jsx("p",{className:"signup-error-label",children:s.otp})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"signup-label",children:"Email"}),e.jsx("input",{type:"text",id:"email",name:"email",placeholder:"user@gmail.com",value:l.email,onChange:r,className:"signup-input"}),s.email&&e.jsx("p",{className:"signup-error-label",children:s.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"signup-label",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:a?"text":"password",id:"password",name:"password",placeholder:"password",value:l.password,onChange:r,className:"signup-input"}),e.jsx("span",{className:"absolute cursor-pointer top-1/2 right-4 -translate-y-1/2 h-12 w-12 flex justify-center items-center rounded-full hover:bg-gray-100",onClick:()=>N(!a),children:a?e.jsx(P,{className:"h-8 w-8 fill-[#83848a]"}):e.jsx(C,{className:"h-8 w-8 fill-[#83848a]"})})]}),s.password&&e.jsx("p",{className:"signup-error-label",children:s.password})]}),e.jsxs("div",{className:"col-span-2 tab:col-span-1",children:[e.jsx("label",{className:"signup-label",children:"Gender"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 mb:max-w-full mb:overflow-x-auto",children:[e.jsxs("label",{htmlFor:"male",className:"inline-flex justify-center items-center gap-6 text-[1.3rem] font-normal leading-[1.5] border-[0.5px] border-[#83848a] px-6 py-4 rounded-lg mb-l:px-4 mb-l:gap-4 mb:rounded-[0.25rem]",children:[e.jsx("input",{type:"radio",name:"gender",id:"male",value:"1",onChange:r,className:"gender-radio-btn"}),e.jsx("span",{children:"Male"})]}),e.jsxs("label",{htmlFor:"female",className:"inline-flex justify-center items-center gap-6 text-[1.3rem] font-normal leading-[1.5] border-[0.5px] border-[#83848a] px-6 py-4 rounded-lg mb-l:px-4 mb-l:gap-4 mb:rounded-[0.25rem]",children:[e.jsx("input",{type:"radio",name:"gender",id:"female",value:"2",onChange:r,className:"gender-radio-btn"}),e.jsx("span",{children:"Female"})]}),e.jsxs("label",{htmlFor:"others",className:"inline-flex justify-center items-center gap-6 text-[1.3rem] font-normal leading-[1.5] border-[0.5px] border-[#83848a] px-6 py-4 rounded-lg mb-l:px-4 mb-l:gap-4 mb:rounded-[0.25rem]",children:[e.jsx("input",{type:"radio",name:"gender",id:"others",value:"3",className:"gender-radio-btn",onChange:r}),e.jsx("span",{children:"Other"})]})]}),s.gender&&e.jsx("p",{className:"signup-error-label",children:s.gender})]}),e.jsx("button",{type:"submit",className:"col-span-2 w-[40%] justify-self-center signup-button tab:col-span-1 tab:max-w-[20rem] tab:w-full mb:min-w-full",disabled:x,children:x?"Signing Up...":"Sign Up"})]}),e.jsxs("p",{className:"mt-10 text-center text-xl text-[#83848a] tab:mt-8",children:["Alredy have an account ?",e.jsx(F,{to:"/login","aria-label":"register now",title:"login now",className:"ml-4 font-semibold leading-6 text-indigo-600 hover:text-indigo-500",children:"Login"})]})]})]})})};export{$ as default};
