import{j as e,P as f,u as P,r as o,a as O,a0 as R,a1 as L,a2 as T,_ as y,X as q}from"./index-DoP6QDOR.js";import{u as z,a as M,A as U}from"./useFetchAddress-DRDtBvn-.js";import{B as G}from"./index-Dsr6fPXb.js";import{F as H}from"./index-BMtFW3Ln.js";const E=()=>e.jsxs("div",{className:"flex items-center gap-6 p-8 border border-[#e0e0e0] rounded-xl",children:[e.jsx("span",{className:"inline-block h-10 w-10 bg-gray-200 rounded-full shimmer-2"}),e.jsxs("div",{className:"grow flex flex-col gap-3 items-start rounded-sm relative",children:[e.jsx("span",{className:"inline-block w-20 h-12 rounded-md bg-gray-200 shimmer"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"inline-block w-40 h-10 bg-gray-200 rounded-md shimmer"}),e.jsx("span",{className:"inline-block w-40 h-10 bg-gray-200 rounded-md shimmer"})]}),e.jsx("div",{className:"w-1/2 h-10 bg-gray-200 rounded-md shimmer"})]})]}),J=({setSelectAddId:a})=>{const l=P(),[r,d]=o.useState(!1),[u,x]=o.useState(!1),[p,m]=o.useState(null),{loading:c}=z(),{deleteAddress:b,loading:g}=M(),s=O(t=>t.address.address),[i,h]=o.useState();o.useEffect(()=>{if(s.length>0){const t=s==null?void 0:s.find(n=>n.is_default===!0);h(t==null?void 0:t.address_id),a(t==null?void 0:t.address_id)}},[s]);function _(){x(!1),d(!0),m(null)}function N(t,n){t.preventDefault(),m(n),x(!0),d(!0)}async function S(t,n){t.preventDefault(),await b(n)&&l(L(n))}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-12 laptop-md:gap-10",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap mb-l:gap-4 mb:justify-center",children:[e.jsx("h4",{className:"cart-sub-title",children:"Select Address"}),e.jsxs("button",{className:"address-btn flex items-center gap-4 laptop-l:gap-3 laptop-md:gap-2",onClick:_,children:[e.jsx(R,{className:"inline-block h-[1.6rem] w-[1.6rem] fill-[var(--secondary)] laptop-l:h-5 laptop-l:w-5 laptop-md:h-4 laptop-md:w-4 tab-m:h-5 tab-m:w-5"}),e.jsx("span",{children:"Add New Address"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-x-8 gap-y-10 justify-center laptop-md:gap-8 laptop:gap-6 tab-l:grid-cols-1 tab-l:gap-8 tab-m:grid-cols-2 tab-s:grid-cols-1",children:c?e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsx(E,{})]}):s&&s.length>0?s.map(t=>{const{address_id:n,full_name:w,building_number:C,phone_number:v,landmark:k,area:B,city:j,state:A,pincode:D,address_type:I}=t,$={1:"Home",2:"Office",3:"Other"};return e.jsxs("label",{className:"flex items-center gap-8 p-8 border rounded-xl cursor-pointer relative laptop-l:p-7 laptop-md:rounded-lg laptop-md:p-6 laptop-md:gap-6 laptop:p-5 tab-l:p-6",children:[e.jsx("input",{type:"radio",name:"address",className:"styled-radio",checked:n===i,onChange:()=>{h(n),a(n)}}),e.jsxs("div",{className:"flex flex-col gap-3 items-start laptop-md:gap-2 tab-l:grow",children:[e.jsx("span",{className:"bg-[#f0f0f0] px-2 py-2.5 rounded-md uppercase text-[1.2rem] text-[#878787] font-semibold laptop-l:text-[1rem] laptop-md:p-2",children:$[I]}),e.jsxs("div",{className:"flex gap-4 text-[1.6rem] text-[var(--black)] font-semibold laptop-l:text-[1.4rem] laptop:text-[1.3rem] tab-m:text-[1.4rem]",children:[e.jsx("h4",{children:w}),e.jsx("h4",{children:v})]}),e.jsxs("span",{className:"text-[1.6rem] leading-[1.75] text-[var(--black)] font-normal laptop-l:text-[1.4rem] laptop:text-[1.3rem]",children:[`${C}, ${B}, ${k}, ${j}, ${A} - `,e.jsx("h4",{className:"inline-block text-[1.4rem] text-[var(--black)] font-semibold laptop:text-[1.2rem]",children:D})]})]}),e.jsxs("div",{className:"del-edit-menu",children:[e.jsxs("span",{className:"three-dots",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsxs("ul",{className:"shortcut",children:[e.jsx("li",{onClick:F=>N(F,t),children:"Edit"}),e.jsx("li",{onClick:F=>S(F,n),children:g?"Deleting..":"Delete"})]})]})]},n)}):e.jsx("span",{className:"self-center text-3xl text-[var(--black)] font-medium",children:"No address Found !"})})]}),r&&e.jsx(U,{setIsOpen:d,isOpen:r,address:p,isEditMode:u})]})};J.propTypes={setSelectAddId:f.func.isRequired};const W=({instruction:a,setInstruction:l})=>e.jsxs("div",{className:"flex flex-col gap-8 laptop-md:gap-7",children:[e.jsx("label",{htmlFor:"addInstruction",className:"cart-sub-title cursor-pointer",children:"Add Instruction"}),e.jsx("textarea",{name:"add-instruction",id:"addInstruction",value:a,onChange:r=>l(r.target.value),className:"border border-[#B9BCCF4D] rounded-xl focus:outline-none focus:border-indigo-500 px-4 py-6 font-[var(--black)] text-[1.8rem] laptop-l:text-[1.6rem] laptop-l:px-3 laptop-l:py-5 laptop-l:rounded-lg laptop-md:text-[1.5rem] laptop-md:py-4 laptop-md:px-2 laptop:text-[1.4rem] mb-l:p-4",placeholder:"Write Message here ..."})]});W.propTypes={instruction:f.string,setInstruction:f.func.isRequired};const X=({paymentMethod:a,setPayementMethod:l,isPickupClothes:r})=>(o.useEffect(()=>{l(1)},[]),e.jsxs("form",{className:"flex flex-col gap-12 laptop-l:gap-10 mb-l:gap-8",children:[e.jsxs("h4",{className:"cart-sub-title",children:[r?"":"Select"," Payment Method"]}),e.jsxs("label",{className:"border border-gray-400 cursor-pointer p-6 rounded-xl flex justify-between items-center shadow w-[45rem] transition-all duration-300 laptop-l:rounded-lg laptop-md:p-4 laptop-md:w-[38rem] laptop-md:pr-6 laptop:w-[32.5rem] tab-m:w-[35rem] tab-m:rounded-md mb-l:w-full",children:[e.jsxs("div",{className:"flex items-center space-x-5 laptop-l:space-x-6 laptop-md:space-x-4 laptop:space-x-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(G,{className:"inline-block h-12 w-12 fill-[var(black)] laptop-md:h-10 laptop-md:w-10"})}),e.jsx("h2",{className:"text-[2rem] leading-[1.75] capitalize laptop-l:text-[1.8rem] laptop-md:text-[1.6rem] laptop:text-[1.5rem]",children:"Cash On Delivery"})]}),e.jsx("input",{type:"radio",name:"payment",className:"styled-radio",checked:a===1||r,onChange:()=>{l(1)}})]}),!r&&e.jsxs("label",{className:"border border-gray-400 cursor-pointer p-6 rounded-xl flex justify-between items-center shadow w-[45rem] transition-all duration-300 laptop-l:rounded-lg laptop-md:p-4 laptop-md:w-[38rem] laptop-md:pr-6 laptop:w-[32.5rem] tab-m:w-[35rem] tab-m:rounded-md mb-l:w-full",children:[e.jsxs("div",{className:"flex items-center space-x-5 laptop-l:space-x-6 laptop-md:space-x-4 laptop:space-x-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(T,{className:"inline-block h-12 w-12 fill-[var(black)] laptop-md:h-10 laptop-md:w-10"})}),e.jsx("h2",{className:"text-[2rem] leading-[1.75] capitalize laptop-l:text-[1.8rem] laptop-md:text-[1.6rem] laptop:text-[1.5rem]",children:"Online Payment"})]}),e.jsx("input",{type:"radio",name:"payment",value:2,checked:a===2,className:"styled-radio",onChange:()=>{l(2)}})]})]}));X.propTypes={paymentMethod:f.number.isRequired,setPayementMethod:f.func.isRequired,isPickupClothes:f.bool};const se=()=>{const[a,l]=o.useState(!1),r="http://35.154.167.170:3000",d=localStorage.getItem("token"),u=O(p=>p.user.user.user_id);return{placeOrder:async({items:p,sub_total:m,description:c="",coupon_code:b,normal_delivery_charges:g,payment_type:s,address_id:i,express_delivery_charges:h,express_delivery_hour:_,transaction_id:N="",paid_amount:S=0,branch_id:t,is_quick_order:n=!1,gst_company_name:w,gstin:C})=>{const v=new URLSearchParams;n&&v.append("is_quick_order","true");let k=1;s===2&&N&&(k=2);const B={items:Array.isArray(p)?p:[],sub_total:Number(m??0),description:c??"",coupon_code:b??"",normal_delivery_charges:Number(g??0),payment_type:s??1,address_id:i,express_delivery_charges:Number(h??0),express_delivery_hour:_,transaction_id:N??"",paid_amount:Number(S??0),branch_id:t,payment_status:k,user_id:u,order_status:1,gst_company_name:w??"",gstin:C??""};try{l(!0);const j=await fetch(`${r}/orders?${v.toString()}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify(B)}),A=await j.json();return j.ok?(y.success("Order placed successfully!",{className:"toast-success"}),A.data):(y.error(A.message),!1)}catch{return y.error("Failed to place an order!",{className:"toast-error"}),!1}finally{l(!1)}},loading:a}},K=()=>{const a="http://35.154.167.170:3000",l=window.localStorage.getItem("token"),[r,d]=o.useState(!0),[u,x]=o.useState([]);return o.useEffect(()=>{(async()=>{try{const m=await fetch(`${a}/branches/list`,{method:"GET"});if(!m.ok){y.error("Failed to fetch branches.",{className:"toast-error"});return}const c=await m.json();x((c==null?void 0:c.data)||[])}catch{y.error("Failed to fetch branches. Please check your internet connection.",{className:"toast-error"})}finally{d(!1)}})()},[a,l]),{branches:u,loading:r}},Q=({setSelectedBranchId:a,noSelection:l,setNoSelection:r})=>{const{branches:d}=K(),[u,x]=o.useState(!1),[p,m]=o.useState("Select Branch"),c=o.useRef(null),b=()=>{x(s=>!s)},g=(s,i)=>{m(s),a(i),b(),r(!1)};return o.useEffect(()=>{const s=i=>{c.current&&!c.current.contains(i.target)&&x(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[p]),e.jsxs("div",{className:"flex flex-col gap-8 laptop-md:gap-7 tab-s:gap-6",children:[e.jsx("label",{className:"cart-sub-title",children:"Select Branch"}),e.jsx("div",{className:`self-start border ${l?"border-red-400":"border-gray-400"} rounded-lg w-[45rem] laptop-md:w-[38rem] laptop:w-[32.5rem] tab-m:w-[35rem] tab-m:rounded-md mb-l:w-full mb-l:max-w-full`,ref:c,children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:b,className:"box-border capitalize w-full px-10 py-7 inline-flex items-center justify-between gap-10 rounded-lg text-[1.8rem] text-[var(--black)] focus:outline-none font-medium text-center laptop-l:py-6 laptop-l:px-9 laptop-l:text-[1.7rem] laptop-md:py-4 laptop-md:px-6 laptop-md:text-[1.6rem] laptop:text-[1.5rem] tab-m:rounded-md mb-l:px-5",type:"button",children:[e.jsx(H,{className:"h-10 w-10 fill-primary laptop-l:h-9 laptop-l:w-9 laptop-md:h-8 laptop-md:w-8"}),p,e.jsx(q,{className:`transition-transform h-8 w-8 fill-primary laptop-l:h-7 laptop-l:w-7 mb-l:h-6 mb-l:w-6 ${u?"rotate-180":""}`})]}),u&&e.jsx("div",{className:"absolute z-10 bg-white rounded-lg shadow-lg w-full mt-2 border laptop-l:mt-1 overflow-hidden",children:e.jsx("ul",{className:"py-2 text-[1.7rem] text-[var(--black)] laptop-l:py-0 laptop-l:text-[1.5rem] laptop-md:text-[1.4rem]",children:d&&d.length>0?d.map(s=>{const{branch_id:i,branch_name:h}=s;return e.jsx("li",{className:"block px-8 py-[1.25rem] capitalize hover:bg-gray-100 laptop-l:py-[1.1rem] laptop-l:px-7",onClick:()=>g(h,i),children:h},i)}):e.jsx("li",{className:"block px-8 py-[1.25rem] font-medium hover:bg-gray-100",children:"No Branch Found !"})})})]})})]})};Q.propTypes={setSelectedBranchId:f.func.isRequired};export{J as A,Q as B,X as P,W as a,se as u};
