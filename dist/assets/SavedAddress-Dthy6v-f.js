import{r as a,_ as h,u as P,a as R,j as e,a1 as B}from"./index-DRHF7GeI.js";import{b as $}from"./index-Bz4KH7L1.js";import{u as q,a as z,A as H}from"./useFetchAddress-CkCF8fov.js";import{L as J}from"./Loading-ymCwsGwc.js";import"./index-DuvE3m0x.js";import"./esm-CBHNTOBX.js";const T=()=>{const[u,d]=a.useState(!1),o="http://35.154.167.170:3000",n=localStorage.getItem("token");return{setDefaultAddress:async c=>{if(!c){h.error("Address Id is required to delete address");return}const p={address_id:c};try{d(!0);const m=await fetch(`${o}/address/set-default`,{method:"POST",headers:{"Content-type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(p)}),t=await m.json();return m.ok?(h.success((t==null?void 0:t.message)||"Default address setted successfully"),t==null?void 0:t.data):null}catch{return h.error("Fail to set default address, please try again later!"),null}finally{d(!1)}},loading:u}},Y=()=>{const u=P(),[d,o]=a.useState(!1),[n,i]=a.useState(!1),[c,p]=a.useState(null),[m,t]=a.useState({}),g=R(s=>s.address.address),{loading:j,fetchAddress:A}=q(),{loading:y,deleteAddress:N}=z(),{setDefaultAddress:v}=T(),[f,w]=a.useState();a.useEffect(()=>{if(!f)return;(async()=>{await v(f)&&await A()})()},[f]);const S={1:"Home",2:"Office",3:"Other"},k=()=>{o(!1),i(!0),p(null)},D=s=>{p(s),o(!0),i(!0)},E=async s=>{t(r=>({...r,[s]:!0})),await N(s)&&u(B(s)),t(r=>({...r,[s]:!1}))};return j?e.jsx(J,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-14 border border-[#b9bccf4d] bg-white rounded-2xl laptop:rounded-xl laptop:p-10 laptop-s:rounded-lg tab-m:p-9 tab:p-8 mb-l:p-6",children:e.jsxs("div",{className:"addresses-container",children:[e.jsx("div",{className:"col-span-full justify-self-end",children:e.jsxs("button",{className:"add-btn",onClick:k,children:[e.jsx($,{className:"inline-block h-[1.6rem] w-[1.6rem] fill-[var(--secondary)] laptop:h-[1.4rem] laptop:w-[1.4rem] laptop-s:h-[1.2rem] laptop-s:w-[1.2rem]"}),e.jsx("span",{children:"Add New Address"})]})}),g&&g.map(s=>{const{address_id:l,address_type:r,building_number:F,area:O,landmark:_,city:C,pincode:x,full_name:M,phone_number:L}=s,I=m[l]||!1,b=[F,O,_,C,x&&x!==0?x:null].filter(Boolean).join(", ");return e.jsxs("div",{className:"border border-[#b9bccf4d] rounded-2xl laptop:rounded-xl laptop-s:rounded-lg relative overflow-hidden",children:[s.is_default&&e.jsx(e.Fragment,{children:e.jsx("span",{className:"absolute top-0 right-0 bg-[#008080BF] text-[#FAF3E0] px-4 py-1.5 font-medium rounded-bl-xl border border-[#0080804d] text-[1.2rem] mb-l:text-[0.9rem] mb:text-[0.7rem]",children:"Default"})}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("input",{type:"radio",name:"defaultAddress",className:"w-7 h-7 accent-[#008080] cursor-pointer custom-radio",checked:s.is_default,onChange:()=>w(l)})}),e.jsxs("div",{className:"flex mt-8 flex-col items-start gap-4 px-6 py-8 border-b border-[#b9bccf4d] laptop:p-6 laptop:gap-3 laptop-s:p-5 mb-l:p-4",children:[e.jsx("span",{className:"bg-[#f0f0f0] p-3 rounded-lg uppercase text-xl text-[#878787] font-semibold laptop:p-2 laptop:text-lg laptop:rounded-md laptop-s:text-base",children:S[r]}),e.jsxs("div",{className:"flex items-center justify-start gap-6 laptop:gap-4",children:[e.jsx("h4",{className:"text-[1.5rem] text-[var(--black)] font-semibold laptop:text-[1.4rem] laptop:leading-[1.5] laptop-s:text-[1.2rem]",children:M}),e.jsx("h4",{className:"text-[1.5rem] text-[var(--black)] font-semibold laptop:text-[1.3rem] laptop:leading-[1.5] laptop-s:text-[1.2rem]",children:L})]}),e.jsx("p",{className:"text-[1.5rem] leading-10 laptop:text-[1.4rem] laptop:leading-[1.75] laptop-s:text-[1.2rem] tab-m:w-full",children:b.length>50?b.slice(0,50)+" ...":b+"."})]}),e.jsxs("div",{className:"flex items-stretch justify-center",children:[e.jsx("div",{className:"basis-1/2 border-r border-[#b9bccf4d]",children:e.jsx("button",{className:"text-2xl text-[var(--primary)] font-medium py-5 w-full laptop:text-[1.4rem] laptop-s:text-[1.2rem] laptop-s:py-4 mb:py-3",onClick:()=>D(s),children:"Edit"})}),e.jsx("div",{className:"basis-1/2",children:e.jsx("button",{className:"text-2xl text-[var(--primary)] font-medium h-full w-full text-center laptop:text-[1.4rem] laptop-s:text-[1.2rem] laptop-s:py-4 mb:py-3",disabled:y,onClick:()=>E(l),children:I?"Removing...":"Remove"})})]})]},l)})]})}),n&&e.jsx(H,{setIsOpen:i,isOpen:n,address:c,isEditMode:d})]})};export{Y as default};
